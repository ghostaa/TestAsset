/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["com.ibm.btt.util.I18nBundle"]){dojo._hasResource["com.ibm.btt.util.I18nBundle"]=true;dojo.provide("com.ibm.btt.util.I18nBundle");dojo.declare("com.ibm.btt.util.I18nBundle",null,{bundle:null,constructor:function(_1,_2,_3){try{dojo.requireLocalization(_1,_2,_3, "");this.bundle=dojo.i18n.getLocalization(_1,_2,_3);}catch(e){console.info("Can not load NLS resources. packageName="+_1+", bundleName="+_2+", locale="+_3);this.bundle=undefined;}},getMessage:function(_4,_5){if(typeof (this.bundle)!="undefined"&&typeof (_4)!="undefined"&&typeof (this.bundle[_4])!="undefined"){if((_5!==undefined)&&(dojo.isArray(_5))){var _6=this.bundle[_4];var i=0;_6=dojo.replace(_6,dojo.hitch(_5,function(_7,k){if(i<_5.length){if(_5[i]!==undefined&&_5[i++]!==null){return _5[i-1];}}return "{"+k+"}";}));return _6;}else{if(_5!==undefined&&_5!==null&&dojo.isObject(_5)){return dojo.replace(this.bundle[_4],dojo.hitch(_5,function(_8,k){var _9=dojo.getObject(k,false,_5);if(_9!==null&&_9!==undefined){return _9;}else{return "{"+k+"}";}}));}else{if(_5!==undefined&&_5!==null){var _a=[];for(var i=1;i<arguments.length;i++){_a.push(arguments[i]);}return arguments.callee.apply(this,[_4,_a]);}else{return this.bundle[_4];}}}}else{return undefined;}}});}if(!dojo._hasResource["com.ibm.btt.util.I18nUtil"]){dojo._hasResource["com.ibm.btt.util.I18nUtil"]=true;dojo.provide("com.ibm.btt.util.I18nUtil");(function(){I18nUtil={getI18nString:function(_b,_c){if((_b===null)||(_b===undefined)||(_b==="")){return _b;}var _d="%";var _e="/";_b=_b.toString();var _f=_b.substring(0,1);if(_b.substring(0,1)!=_d){return _b;}else{var _10=_b.replace(_d,"");var tmp=_10.split(_e);var _11=tmp[0].substring(0,tmp[0].lastIndexOf("."));var _12=tmp[0].substring(tmp[0].lastIndexOf(".")+1,tmp[0].length);var _13=tmp[1];if(typeof (_11)=="undefined"||typeof (_12)=="undefined"||_11==""||_12==""){return _b;}var _14=new com.ibm.btt.util.I18nBundle(_11,_12);var _15=_14.getMessage(_13,_c);if(_15==undefined||_15==null){return _b;}else{return _15;}}}};})();}if(!dojo._hasResource["com.ibm.btt.util.StringUtil"]){dojo._hasResource["com.ibm.btt.util.StringUtil"]=true;dojo.provide("com.ibm.btt.util.StringUtil");(function(){StringUtil={escapeHTML:function(_16){if(_16){var _17=_16.replace(new RegExp("\r\n","g"),"\n");_17=_17.replace(new RegExp("\n","g"),"<br/>");return StringUtil.replaceAll(_17," ","&nbsp;");}else{return _16;}},escapeEnterWrap:function(str){if(str){var _18=str.replace(new RegExp("\r\n","g"),"\n");_18=_18.replace(new RegExp("\n","g"),"<br/>");return _18;}else{return str;}},replaceAll:function(str,_19,_1a){if(str&&_19&&_1a){return str.replace(new RegExp(_19,"gm"),_1a);}else{return str;}},removeWarp:function(str){if(str){var _1b=str.replace(new RegExp("\r","g"),"");_1b=_1b.replace(new RegExp("\n","g"),"");return _1b;}else{return str;}}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetMixin",null,{visibility:"visible",accessKey:"",hint:"",postCreate:function(){this.applyAccessKey();this.inherited(arguments);},getI18NString:function(key,_1c){return I18nUtil.getI18nString(key,_1c);},replaceWrap:function(){},_setVisibilityAttr:function(_1d){this.visibility=_1d;if(_1d=="gone"){dojo.style(this.domNode,"visibility","");dojo.style(this.domNode,"display","none");}else{if(_1d=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","");}}},_setHintAttr:function(_1e){this.hint=_1e;this.domNode.title=StringUtil.removeWarp(this.getI18NString(_1e));},isFocusable:function(){if(dojo.style(this.domNode,"visibility")=="hidden"){return false;}else{if(this.disabled){return false;}else{return this.inherited(arguments);}}},applyAccessKey:function(){if(this.focusNode&&this.accessKey){this.focusNode.setAttribute("accessKey",this.accessKey);}},handleLenUint:function(_1f){var _20=function(src,_21){var reg=new RegExp(_21+"$");return reg.test(src);};if(_20(_1f,"px")||_20(_1f,"%")||_20(_1f,"em")){return _1f;}else{return _1f+"px";}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Anchor"]){dojo._hasResource["com.ibm.btt.dijit.Anchor"]=true;dojo.provide("com.ibm.btt.dijit.Anchor");dojo.declare("com.ibm.btt.dijit.Anchor",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<a class='dijitLabelBase' dojoAttachEvent='onclick:_onClick'></a>",action:"#",target:"_parent",bttParams:"",text:"",tabIndex:"0",disabled:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{target:{node:"domNode"},tabIndex:{node:"domNode"},text:{node:"domNode",type:"innerHTML"},visibility:{node:"domNode"},disabled:{node:"domNode"},action:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);},_parameterHandler:function(e){var _22="";var _23=dojo.fromJson(e);_23[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();for(var _24 in _23){if(typeof (_24)!="undefined"){var _25=_23[_24];if(_22==""){_22+=_24+"="+_25;}else{_22+="&"+_24+"="+_25;}}}return _22;},_setActionAttr:function(_26){this.action=_26;var _27="";if(this.bttParams!=""&&this.action!=""&&this.action!=="#"){_27=this.action;if(this.bttParams!=""){if(_27.indexOf("?")==-1){_27+="?";}if(this.bttParams!=""){var _28=this._parameterHandler(this.bttParams);if(_27.substring(_27.length-1)=="?"){_27+=_28;}else{_27+="&"+_28;}}}}else{if(this.action!=""&&this.action!=="#"){_27=this.action;}else{_27="javascript:void(0)";}}this.domNode.href=_27;},_setTextAttr:function(_29){this.text=_29;this.domNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_29));},_setDisabledAttr:function(_2a){this.disabled=_2a;},focus:function(){this.domNode.focus();},applyAccessKey:function(){if(this.accessKey){this.domNode.setAttribute("accessKey",this.accessKey);}},_onClick:function(e){if(this.disabled||this.onClick(e)===false){e.preventDefault();}},onClick:function(e){},_setTextWrapAttr:function(_2b){this.textWrap=_2b;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setWidthAttr:function(_2c){if(this.width!=""){this.width=_2c;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_2d){if(this.height!=""){this.height=_2d;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Button"]){dojo._hasResource["com.ibm.btt.dijit.Button"]=true;dojo.provide("com.ibm.btt.dijit.Button");dojo.declare("com.ibm.btt.dijit.Button",[dijit.form.Button,com.ibm.btt.dijit.AbstractWidgetMixin],{bttParams:"",icon:"",text:"",inValid:false,width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.Button.prototype.attributeMap,{visibility:{node:"domNode"},text:{node:"textNode",type:"innerHTML"},icon:{node:"iconImageNode",type:"attribute",attribute:"src"},width:{node:"domNode"},height:{node:"domNode"}}),buildRendering:function(){this.inherited(arguments);this.iconImageNode=dojo.create("img",{"style":"display:none;"},this.containerNode,"last");this.textNode=dojo.create("span",{"class":"dijitLabelBase"},this.containerNode,"last");dojo.style(this.focusNode,"overflow","hidden");dojo.addClass(this.focusNode.parentNode,"dijitLabelBase");if(dojo.isIE&&dojo.isIE>8){dojo.style(this.focusNode.parentNode,"overflow","visible");}},postCreate:function(){this.inherited(arguments);this._setIconAttr(this.icon);},_setTextAttr:function(_2e){this.text=_2e;this.textNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_2e));},_setTextWrapAttr:function(_2f){this.textWrap=_2f;if(this.textWrap){dojo.addClass(this.textNode,"dijitLabelWrap");}else{dojo.removeClass(this.textNode,"dijitLabelWrap");}},_setIconAttr:function(_30){this.icon=_30;if(_30){this.iconImageNode.src=_30;dojo.style(this.iconImageNode,"display","");}else{dojo.style(this.iconImageNode,"display","none");}},_setWidthAttr:function(_31){if(_31!=""){this.width=_31;dojo.style(this.focusNode.parentNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_32){if(_32!=""){this.height=_32;dojo.style(this.focusNode.parentNode,"height",this.handleLenUint(this.height));}},_setInValidAttr:function(_33){this.inValid=_33;if(this.type=="submit"){var _34=this._getParentForm();if(_34&&_34.setSubmitButtonState){_34.setSubmitButtonState();}else{this.set("disabled",_33);}}else{this.set("disabled",_33);}},_onButtonClick:function(e){var _35=this._getParentForm();if(_35&&this.get("disabled")==false&&this.type=="cancel"){this._onClick(e);this._doCancelAction(_35);e.preventDefault();}else{if(_35&&this.get("disabled")==false&&this.type=="save"){this._onClick(e);this._doSaveAction(_35);e.preventDefault();}else{if(_35){_35._lastClickedButton=this;}this.inherited(arguments);}}},_getParentForm:function(){for(var _36=this.domNode;_36.parentNode;_36=_36.parentNode){var _37=dijit.byNode(_36);if(_37&&typeof _37._onSubmit=="function"){return _37;}}},_doCancelAction:function(_38){var _38=this._createHiddenForm(_38,dojo.fromJson(this.bttParams));_38.submit();},_doSaveAction:function(_39){var _39=this._getParentForm();if(_39.onFormSubmit){_39.onFormSubmit();}var _3a=_39.get("validValue");var _39=this._createHiddenForm(_39,dojo.mixin(_3a,dojo.fromJson(this.bttParams)));_39.submit();},_createHiddenForm:function(_3b,_3c){var _3b=dojo.create("form",{"style":"display:none;","action":_3b.get("action"),"method":_3b.get("method")},dojo.body(),"last");var _3d=[];for(var _3e in _3c){if(_3e!=undefined&&_3e!=null&&_3e!=""){_3d=_3d.concat(this._convertToKeyValuePair(_3e,_3c[_3e]));}}for(var i=0;i<_3d.length;i++){dojo.create("input",{"type":"hidden","name":_3d[i].key,"value":_3d[i].value},_3b,"last");}return _3b;},_convertToKeyValuePair:function(_3f,_40){var res=[];if(dojo.isObject(_40)){for(var key in _40){if(key!=undefined&&key!=null&&key!=""){res=res.concat(this._convertToKeyValuePair(_3f+"."+key,_40[key]));}}}else{if(dojo.isArray(_40)){for(var i=0;i<_40.length;i++){res=res.concat(this._convertToKeyValuePair(_3f+"."+i,_40[i]));}}else{res.push({"key":_3f,"value":_40});}}return res;}});}if(!dojo._hasResource["com.ibm.btt.dijit.CheckBox"]){dojo._hasResource["com.ibm.btt.dijit.CheckBox"]=true;dojo.provide("com.ibm.btt.dijit.CheckBox");dojo.declare("com.ibm.btt.dijit.CheckBox",[dijit.form.CheckBox,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",visibility:"visible",uncheckedField:null,checkedValue:"true",unCheckedValue:"false",isChecked:false,checked:"",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.CheckBox.prototype.attributeMap,{isChecked:{node:"domNode",type:"attribute"},style:{node:"labelNode",type:"attribute"},visibility:{node:"domNode"},text:{node:"labelNode",type:"innerHTML"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");this.set("visibility",this.visibility);},postCreate:function(){this.inherited(arguments);this._setSubmitValue();this.set("value",this.checkedValue);if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}},setUncheckedValue:function(arg){if(!this.get("name")){return;}if(arg==true){if(this.uncheckedField==null){this.uncheckedField=dojo.create("input",{type:"hidden",value:this.unCheckedValue,name:this.get("name")});}dojo.place(this.uncheckedField,this.focusNode,"after");}else{if(this.uncheckedField!=null){dojo.destroy(this.uncheckedField);}}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},_setSubmitValue:function(){if(this.get("isChecked")){this.setUncheckedValue(false);}else{this.setUncheckedValue(true);}},_setIsCheckedAttr:function(_41){this.set("checked",_41);},_setCheckedAttr:function(_42){if(_42==false||_42=="false"||_42==""){this.isChecked=false;}else{this.isChecked=true;}this._setSubmitValue();this.inherited(arguments);},_setTextAttr:function(_43){this.text=_43;this.labelNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_43));},_setStyleAttr:function(_44){dojo.attr(this.labelNode,"style",_44);},_setClassAttr:function(_45){dojo.attr(this.labelNode,"class",_45);},_setHintAttr:function(_46){this.hint=_46;var _47=StringUtil.removeWarp(this.getI18NString(_46));this.domNode.title=_47;this.labelNode.title=_47;},_setVisibilityAttr:function(_48){this.visibility=_48;if(_48==="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");dojo.style(this.labelNode,"visibility","visible");dojo.style(this.labelNode,"display","none");}else{if(_48==="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","visible");}}},_setReadOnlyAttr:function(_49){this.inherited(arguments);if(_49==="true"||_49===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_setDisabledAttr:function(_4a){this.inherited(arguments);if(this.uncheckedField!=null){dojo.attr(this.uncheckedField,"disabled",_4a);}},_getValueAttr:function(){if(this.isChecked){return this.checkedValue;}else{return this.unCheckedValue;}},_setTextWrapAttr:function(_4b){this.textWrap=_4b;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_4c){if(this.width!=""){this.width=_4c;var _4d=_4c.replace(new RegExp("px","gm"),"");try{_4d=Number(_4d);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_4c+" to number.");return;}var box=dojo.marginBox(this.domNode);var _4e=_4d-box.w;if(_4e<0){_4e=0;}dojo.style(this.labelNode,"width",_4e+"px");}},_setHeightAttr:function(_4f){if(this.height!=""){this.height=_4f;var _50=_4f.replace(new RegExp("px","gm"),"");dojo.style(this.labelNode,"height",_50+"px");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]){dojo._hasResource["com.ibm.btt.dijit.ValidationTextBox"]=true;dojo.provide("com.ibm.btt.dijit.ValidationTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.ValidationTextBox",[dijit.form.ValidationTextBox,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",errorDisplayer:null,singleFieldErrorMessage:"",attributeMap:dojo.delegate(dijit.form.ValidationTextBox.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"}}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},startup:function(){this.inherited(arguments);if(this.singleFieldErrorMessage){try{var _51=dojo.fromJson(this.singleFieldErrorMessage);if(dojo.isArray(_51)){this.showErrorMessage(_51);}}catch(e){this.showErrorMessage(this.singleFieldErrorMessage);}}},validator:function(_52,_53){var _54=typeof (this.regExpGen(_53))!="undefined"&&this.testRegularExpression(this.regExpGen(_53),_52);if(!_54){this.invalidMessage=this.bundle.getMessage("regularExpressionMessage");return false;}else{var res=(!this.required||!this._isEmpty(_52))&&(this._isEmpty(_52)||this.parse(_52,_53)!==undefined);if(res){return true;}else{this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}}},testRegularExpression:function(reg,_55){return (new RegExp("^(?:"+reg+")"+(this.required?"":"?")+"$")).test(_55);},_setWidthAttr:function(_56){if(_56!=""){this.width=_56;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setVisibilityAttr:function(_57){this.visibility=_57;var _58;if(typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[0])!="undefined"){_58=this.domNode.children[0].children[0];}else{_58=null;}if(_57=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_58!=null){dojo.style(_58,"visibility","");}}else{if(_57=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_58!=null){dojo.style(_58,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_58!=null){dojo.style(_58,"visibility","");}}}},_onFocus:function(by){this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);},onShowErrorFlag:false,showErrorMessage:function(_59){if(dojo.isArray(_59)){var _5a=[];for(var i=0;i<_59.length;i++){var _5b=this.getI18NString(_59[i]);if(_5b==null){_5b=_59[i];}_5a.push(_5b);}if(_5a.length!=0){var _5c=_5a.join(" ");}else{var _5c="";}}else{var _5d=[];var _5e=[];if(arguments.length==0){arguments[0]="";_59="";}for(var i=1;i<arguments.length;i++){_5e[i-1]=arguments[i];}_5d[0]=arguments[0];_5d[1]=_5e;_5d[2]=true;var _5c=this.getI18NString.apply(this,_5d);if(_5c==null){_5c=_59;}}if(_59!=""){this._message=_59;dijit.hideTooltip(this.domNode);dojo.window.scrollIntoView(this.focusNode);this.onShowErrorFlag=true;if(!this.errorDisplayer){this.errorDisplayer=new dijit._MasterTooltip();}this.errorDisplayer.show(_5c,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{this.onShowErrorFlag=false;if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}}this._refreshState();},validate:function(_5f){if(this.onShowErrorFlag){this.state="Error";this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",false?"false":"true");if(_5f){if(this.state=="Error"){message=this.getErrorMessage(true);}else{message=this.getPromptMessage(true);}this._maskValidSubsetError=true;}return false;}else{return this.inherited(arguments);}},destroy:function(){this.displayMessage("");if(this.errorDisplayer){this.errorDisplayer.hide(this.domNode);}this.inherited(arguments);if(this.errorDisplayer){this.errorDisplayer.destroy();this.errorDisplayer=undefined;}}});dojo.declare("com.ibm.btt.dijit.MappedTextBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.MappedTextBox],{});dojo.declare("com.ibm.btt.dijit.RangeBoundTextBox",[com.ibm.btt.dijit.MappedTextBox,dijit.form.RangeBoundTextBox],{postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},rangeCheck:function(_60,_61){if("min" in _61&&this.compare(_60,_61.min)<0){this.rangeMessage=this.bundle.getMessage("rangeMinMessage",{value:_61.min});return false;}if("max" in _61&&this.compare(_60,_61.max)>0){this.rangeMessage=this.bundle.getMessage("rangeMaxMessage",{value:_61.max});return false;}return true;}});}if(!dojo._hasResource["com.ibm.btt.dijit.ComboBox"]){dojo._hasResource["com.ibm.btt.dijit.ComboBox"]=true;dojo.provide("com.ibm.btt.dijit.ComboBox");dojo.declare("com.ibm.btt.dijit.ComboBox",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.ComboBox,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",storeURL:"",labelField:"label",storeDataFormat:{itemLabel:this.labelField},asyncStatus:0,asyncErrorMessage:"",constructor:function(){this.storeDataFormat={itemLabel:"label"};this.searchAttr=this.storeDataFormat.itemLabel;},attributeMap:dojo.delegate(dijit.form.ComboBox.prototype.attributeMap,{visibility:{node:"domNode"}}),postMixInProperties:function(){this.storeDataFormat.itemLabel=this.labelField;this.searchAttr=this.storeDataFormat.itemLabel;var _62=this.srcNodeRef;var _63={label:this.storeDataFormat.itemLabel,items:[]};var _64=this.storeDataFormat.itemLabel;var _65=this;dojo.query("> option",_62).forEach(function(_66){var _67={};_67[_64]=_65.getI18NString(dojo.trim(_66.innerHTML));_63.items.push(_67);});if(_63.items.length==0){if(this.storeData){var _68=dojo.fromJson(this.storeData);_63=this._formatStoreData(_68);}}this.store=new dojo.data.ItemFileReadStore({data:_63});this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){this.loadStoreFromURL(this.storeURL);}},setStoreData:function(_69){var _69=this._formatStoreData(_69);this.store.clearOnClose=true;this.store.data=_69;this.store._jsonData=null;this.store.close();},_formatStoreData:function(_6a){var _6b={label:this.storeDataFormat.itemLabel,items:[]};if(_6a instanceof Array){for(var i=0;i<_6a.length;i++){if(_6a[i]!=null){var _6c={};if(dojo.isObject(_6a[i])){if(_6a[i][_6b.label]!=null){_6c[_6b.label]=this.getI18NString(_6a[i][_6b.label]);}}else{if(dojo.isString(_6a[i])){_6c[_6b.label]=this.getI18NString(_6a[i]);}else{_6c[_6b.label]=_6a[i].toString();}}if(_6c[_6b.label]){_6b.items.push(_6c);}}}}else{if(_6a instanceof Object){for(var p in _6a){var _6c={};_6c[_6b.label]=this.getI18NString(p);_6b.items.push(_6c);}}}return _6b;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _6d={url:this.storeURL,handleAs:"json",load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_6d);},_handleStoreLoadingResponse:function(_6e){this.setStoreData(_6e);this.onAsyncOK();},_setVisibilityAttr:function(_6f){this.visibility=_6f;var _70;if(typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[1])!="undefined"){_70=this.domNode.children[0].children[1];}else{_70=null;}if(_6f=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_70!=null){dojo.style(_70,"visibility","");}}else{if(_6f=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_70!=null){dojo.style(_70,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_70!=null){dojo.style(_70,"visibility","");}}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]){dojo._hasResource["com.ibm.btt.dijit.NumberTextBox"]=true;dojo.provide("com.ibm.btt.dijit.NumberTextBox");dojo.declare("com.ibm.btt.dijit.NumberTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.NumberTextBox],{numberType:"",minimumNumber:NaN,maximumNumber:NaN,locale:dojo.locale,pattern:"",decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);if(this.numberType=="byte"||this.numberType=="int"||this.numberType=="short"||this.numberType=="integer"||this.numberType=="long"||this.numberType=="bigInteger"){this.fractional=false;}else{this.fractional=true;}if(!isNaN(this.minimumNumber)){if(this.fractional){this.constraints.min=Number(this.minimumNumber);}else{this.constraints.min=parseInt(this.minimumNumber);}}if(!isNaN(this.maximumNumber)){if(this.fractional){this.constraints.max=Number(this.maximumNumber);}else{this.constraints.max=parseInt(this.maximumNumber);}}this.constraints.locale=this.locale;if(this.pattern!=""){this.constraints.pattern=this.pattern;}this.constraints.fractional=this.fractional;if(!isNaN(this.decimalPlaces)){this.decimalPlaces=Number(this.decimalPlaces);}if(this.fractional&&this.decimalPlaces>0){this.constraints.places=this.decimalPlaces;}this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");},isNumber:function(_71){return /^-?\d+(\.\d+)?$/.test(_71);},validator:function(_72,_73){var _74;if(this.isNumber(_72)){_74=_72;}else{_74=this.parse(_72,this.constraints);if(!this.isNumber(_74)&&_72!=""){this.invalidMessage=this.bundle.getMessage("invalidMessage");return false;}else{if(new RegExp("^[+-]?\\d+$").test(_74)&&this.decimalPlaces>0){var con={};con["max"]=this.constraints["max"];con["min"]=this.constraints["min"];con["places"]=this.constraints["places"];con["fractional"]=this.constraints["fractional"];con["locale"]=this.constraints["locale"];_74+=".";for(var i=0;i<this.decimalPlaces;i++){_74+="0";}}}}if(this.isNumber(_74)&&this.fractional&&this.decimalPlaces>0&&!(new RegExp("^[+-]?.+[.,]\\d{"+this.decimalPlaces+"}$").test(_72))){this.invalidMessage=this.bundle.getMessage("decimalPlacesMessage",{value:this.decimalPlaces});return false;}if(this.isNumber(_74)&&this.numberType=="byte"&&(_74>127||_74<-128)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:127,min:-128});return false;}if(this.isNumber(_74)&&this.numberType=="short"&&(_74>32767||_74<-32768)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:32767,min:-32768});return false;}if(this.isNumber(_74)&&this.numberType=="int"&&(_74>2147483647||_74<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_74)&&this.numberType=="integer"&&(_74>2147483647||_74<-2147483648)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:2147483647,min:-2147483648});return false;}if(this.isNumber(_74)&&this.numberType=="long"&&(_74>9223372036854776000||_74<-9223372036854776000)){this.invalidMessage=this.bundle.getMessage("intOutOfRange",{max:9223372036854776000,min:-9223372036854776000});return false;}if(_74.toString().replace(new RegExp(".","g"),"").length>16){this.invalidMessage=this.bundle.getMessage("numberOutOfRange");return false;}return this.inherited(arguments);},_setValueAttr:function(_75,_76,_77){if(typeof _75==="string"&&_75!==""){var _78=Number(_75);if(isNaN(_78)&&_75&&_75!=""){var _79={};if(this.constraints["pattern"]){_79["pattern"]=this.constraints["pattern"];}_75=this.parse(_75,_79);}else{_75=_78;}}this.inherited(arguments);},create:function(_7a,_7b){this.inherited(arguments);var _7c=dojo.attr(_7b,"value");if(_7c&&_7c!=""){var _7d={};if(this.constraints["pattern"]){_7d["pattern"]=this.constraints["pattern"];}_7a.value=this.parse(_7c,_7d);if(isNaN(_7a.value)){_7a.value=Number(_7c);}this.set("value",_7a.value);}},serialize:function(val,_7e){return this.format(val,_7e);}});}if(!dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]){dojo._hasResource["com.ibm.btt.dijit.CurrencyTextBox"]=true;dojo.provide("com.ibm.btt.dijit.CurrencyTextBox");dojo.declare("com.ibm.btt.dijit.CurrencyTextBox",[com.ibm.btt.dijit.NumberTextBox,dijit.form.CurrencyTextBox],{decimalPlaces:0,postMixInProperties:function(){this.inherited(arguments);this.decimalPlaces=this.constraints.places;},serialize:function(val,_7f){return isNaN(val)?"":(val.toString?val.toString():"");}});}if(!dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]){dojo._hasResource["com.ibm.btt.dijit.DateTextBox"]=true;dojo.provide("com.ibm.btt.dijit.DateTextBox");dojo.declare("com.ibm.btt.dijit.DateTextBox",[com.ibm.btt.dijit.RangeBoundTextBox,dijit.form.DateTextBox],{maximumDate:"",minimumDate:"",locale:dojo.locale,pattern:"",postMixInProperties:function(){this.inherited(arguments);this.lang=this.locale;this.constraints.locale=this.locale;if(this.minimumDate!=""){if(this.isToday(this.minimumDate)){this.constraints.min=this.parseToday(this.minimumDate);}else{this.constraints.min=dojo.date.stamp.fromISOString(this.minimumDate);}}if(this.maximumDate!=""){if(this.isToday(this.maximumDate)){this.constraints.max=this.parseToday(this.maximumDate);}else{this.constraints.max=dojo.date.stamp.fromISOString(this.maximumDate);}}if(this.pattern!=""){this.constraints.datePattern=this.pattern;}},create:function(_80,_81){if(_80.value==null){if(_81.value!=null&&_81.value!=""&&_80.pattern!=null&&_80.pattern!=""){try{var _82={selector:"date",datePattern:_80.pattern,fullYear:true};var val=dojo.date.locale.parse(_81.value,_82);_80.value=val;}catch(e){}}}this.inherited(arguments);},serialize:function(val,_83){if(val.toGregorian){val=val.toGregorian();}if(this.pattern!=""){return this.format(val,_83);}else{return dojo.date.stamp.toISOString(val,_83);}},isToday:function(_84){if(_84.replace(" ","").toLowerCase().indexOf("today")>-1){return true;}else{return false;}},parseToday:function(_85){var _86=_85.replace("today","");var _87="";var _88=0;var _89=0;var day=0;var _8a=new Date();_8a.setHours(0);_8a.setMinutes(0);_8a.setSeconds(0);_8a.setMilliseconds(0);if(_86.indexOf("+")>-1){_87="plus";_86=_86.replace("+","#");}if(_86.indexOf("-")>-1){_87="sub";_86=_86.replace("-","#");}if(_86.indexOf("y")>-1){_88=_86.substring(_86.lastIndexOf("#")+1,_86.indexOf("y"));_86=_86.replace("y","#");}if(_86.indexOf("m")>-1){_89=_86.substring(_86.lastIndexOf("#")+1,_86.indexOf("m"));_86=_86.replace("m","#");}if(_86.indexOf("d")>-1){day=_86.substring(_86.lastIndexOf("#")+1,_86.indexOf("d"));}if("plus"==_87){_8a=dojo.date.add(_8a,"year",+_88);_8a=dojo.date.add(_8a,"month",+_89);_8a=dojo.date.add(_8a,"day",+day);}else{_8a=dojo.date.add(_8a,"year",-_88);_8a=dojo.date.add(_8a,"month",-_89);_8a=dojo.date.add(_8a,"day",-day);}return _8a;},_setValueAttr:function(_8b,_8c,_8d){if(typeof (_8b)=="string"||_8b instanceof String){var val=null;if(this.pattern==""){_8b=dojo.date.stamp.fromISOString(_8b);}else{var _8e={selector:"date",datePattern:this.pattern,fullYear:true};_8b=dojo.date.locale.parse(_8b,_8e);}}this.inherited(arguments);},_getValueAttr:function(){if(this.textbox.value==""){return null;}else{return this.inherited(arguments);}},_handleOnChange:function(_8f,_90){if(this._lastValueReported==undefined&&(_90===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_8f;}this._pendingOnChange=this._pendingOnChange||(typeof _8f!=typeof this._lastValueReported)||(this._lastValueReported!=null&&_8f==null)||(this._lastValueReported==null&&_8f!=null);var _91=this.compare(_8f,this._lastValueReported)!=0;if(_8f==null&&null==this._lastValueReported){_91=false;}this._pendingOnChange=this._pendingOnChange||_91;if((this.intermediateChanges||_90||_90===undefined)&&this._pendingOnChange){this._lastValueReported=_8f;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_8f);}),0);}}}});}if(!dojo._hasResource["com.ibm.btt.util.AjaxUtil"]){dojo._hasResource["com.ibm.btt.util.AjaxUtil"]=true;dojo.provide("com.ibm.btt.util.AjaxUtil");(function(){AjaxUtil={ajaxOperationUrl:"Ajax",constants:{"BTT_OPERATIONNAME":"dse_operationName","BTT_PAGEID":"dse_pageId","BTT_SESSIONID":"dse_sessionId","BTT_ERRORPAGE":"dse_errorPage","BTT_PROCESSORID":"dse_processorId","BTT_TIMEZONE":"dse_timezone"},xhrPost:function(_92,_93){_92.postData=dojo.toJson(_93);if(typeof _92.url=="undefined"){_92.url=this.ajaxOperationUrl;}if(typeof _92.handleAs=="undefined"){_92.handleAs="text";}if(typeof _92.success=="undefined"){_92.load=function(e){console.info("Ajax request response from ajax channel. "+e);};}else{_92.load=_92.success;delete _92.success;}if(typeof _92.error=="undefined"){_92.error=function(e){console.info("Ajax request error. "+e);};}dojo.xhrPost(_92);},getTimzone:function(){var d=new Date();return d.getTimezoneOffset()/60;},prepareBTTParams:function(_94){var obj={};if(_94!=undefined){if(_94[this.constants.BTT_ERRORPAGE]){obj[this.constants.BTT_ERRORPAGE]=_94[this.constants.BTT_ERRORPAGE];}if(_94[this.constants.BTT_OPERATIONNAME]){obj[this.constants.BTT_OPERATIONNAME]=_94[this.constants.BTT_OPERATIONNAME];}if(_94[this.constants.BTT_PAGEID]){obj[this.constants.BTT_PAGEID]=_94[this.constants.BTT_PAGEID];}else{obj[this.constants.BTT_PAGEID]="-1";}if(_94[this.constants.BTT_PROCESSORID]){obj[this.constants.BTT_PROCESSORID]=_94[this.constants.BTT_PROCESSORID];}if(_94[this.constants.BTT_SESSIONID]){obj[this.constants.BTT_SESSIONID]=_94[this.constants.BTT_SESSIONID];}if(_94[this.constants.BTT_TIMEZONE]){obj[this.constants.BTT_TIMEZONE]=_94[this.constants.BTT_TIMEZONE];}else{obj[this.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();}}return obj;}};})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractAjaxMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractAjaxMixin");dojo.declare("com.ibm.btt.dijit.AbstractAjaxMixin",null,{_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Form"),bttParams:"",asyncCode:"",asyncStatus:0,asyncErrorMessage:"",asyncOperation:"",callAsyncOperation:function(_95,_96,_97,_98){var _99=this.get("value");var _9a={};if(this.bttParams){_9a=dojo.fromJson(this.bttParams);}_9a[AjaxUtil.constants.BTT_OPERATIONNAME]=_95;_9a=AjaxUtil.prepareBTTParams(_9a);AjaxUtil.xhrPost({success:dojo.hitch(this,"_handleOperationResponse",_96,_98),error:dojo.hitch(this,"_handleOperationError",_96),"timeout":_97},dojo.mixin(_99,_9a));},_handleOperationResponse:function(_9b,_9c,_9d){try{var _9e=dojo.fromJson(_9d||null);_9d=_9e;}catch(e){this._handleHTMLResponse(_9d);return;}this.asyncCode=_9b;var _9f=null;var _a0=null;var _a1=null;if(dojo.isArray(_9d)){_9f=_9d[0].data;if(_9d[0].validationError){_a0=_9d[0].singleFieldErrors;_a1=_9d[0].crossFieldErrors;}}else{_9f=_9d;}if(_9f){if(_9c&&dijit.byId(_9c)){dijit.byId(_9c).set("value",_9f);}else{this.set("value",_9f);}}if((_a0&&_a0.length!=0)||(_a1&&_a1.length!=0)){var _a2=this._getWidgetMap();this._handleSingleFieldErrors(_a0,_a2);this._handleCrossFieldErrors(_a1,_a2);}this.onAsyncOK();},_handleHTMLResponse:function(_a3){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:_a3})).show();},_getWidgetMap:function(){var map={};dojo.forEach(this.getDescendants(),function(_a4){if(!_a4.name){return;}var _a5=map[_a4.name]||(map[_a4.name]=[]);_a5.push(_a4);});return map;},_handleSingleFieldErrors:function(_a6,_a7){if(_a6!=null){for(var i=0;i<_a6.length;i++){if(_a7[_a6[i].id]){var _a8=_a7[_a6[i].id];if(_a8){for(var j=0;j<_a8.length;j++){if(_a8[j].showErrorMessage){_a8[j].showErrorMessage(_a6[i].msg);}}}}}}},_handleCrossFieldErrors:function(_a9,_aa){if(_a9!=null){var _ab=_aa["dse_errorMessages"];if(_ab){for(var j=0;j<_ab.length;j++){_ab[j].displayMessageArray(_a9);}}}},setStoreData:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_ac){if(!_ac.name){return;}var _ad=map[_ac.name]||(map[_ac.name]=[]);_ad.push(_ac);});for(var _ae in map){if(!map.hasOwnProperty(_ae)){continue;}var _af=map[_ae],_b0=dojo.getObject(_ae,false,obj);if(_b0===undefined){continue;}if(!dojo.isArray(_b0)){_b0=[_b0];}dojo.forEach(_af,function(w,i){if(w.setStoreData){w.setStoreData(_b0[i]);}});}},_handleOperationError:function(_b1,_b2){if(_b2.dojoType==="timeout"){this.asyncCode=_b1;this.asyncStatus=0;this.asyncErrorMessage=_b2.message;this.onAsyncTimeOut();}else{if(_b2.status!==undefined){this.asyncCode=_b1;this.asyncStatus=_b2.status;this.asyncErrorMessage=_b2.message;this.onAsyncError();}}},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){},_getValueAttr:function(){var obj={};var _b3=this;dojo.forEach(this.getDescendants(),function(_b4){var _b5=_b4.name;if((!_b5||_b4.disabled||_b4.isNotSubmitted)&&(!_b4.storeDataName||!_b4.getEditableStroeData||((_b4 instanceof com.ibm.btt.dijit.Grid)&&_b4.readOnly))){return;}if(typeof (_b4.ajaxSubmit)!="undefined"&&_b4.ajaxSubmit==false){return;}if(_b4.storeDataName&&_b4.getEditableStroeData&&((_b4 instanceof com.ibm.btt.dijit.Grid)&&_b4.editable&&!_b4.readOnly)&&_b4.getEditableStroeData()){dojo.setObject(_b4.storeDataName,_b3._convertValueToString(_b4.getEditableStroeData()),obj);}var _b6=_b4.get("value");if(_b6===undefined){return;}if((_b4 instanceof com.ibm.btt.dijit.Grid)&&(_b6==null||_b6==undefined)){return;}if(_b6==null){_b6="";}if(typeof _b4.checked!=="undefined"){if(/Radio/.test(_b4.declaredClass)){if(_b6!==false){dojo.setObject(_b5,_b3._convertValueToString(_b6),obj);}else{_b6=dojo.getObject(_b5,false,obj);if(_b6===undefined){dojo.setObject(_b5,null,obj);}}}else{if(_b6!==false){dojo.setObject(_b5,_b3._convertValueToString(_b6),obj);}}}else{if(typeof _b6=="number"&&_b4.serialize){_b6=_b4.serialize(_b6,_b4.constraints);}else{if(_b6!=null&&_b6 instanceof Date){if(_b4.serialize){_b6=_b4.serialize(_b6,_b4.constraints);}else{_b6=_b6.getFullYear()+"-"+(_b6.getMonth()+1)+"-"+_b6.getDate();}}}_b6=_b3._convertValueToString(_b6);var _b7=dojo.getObject(_b5,false,obj);if(typeof _b7!="undefined"){if(dojo.isArray(_b7)){_b7.push(_b6);}else{dojo.setObject(_b5,[_b7,_b6],obj);}}else{dojo.setObject(_b5,_b6,obj);}}});return obj;},_convertValueToString:function(_b8){if(_b8===null){return null;}if(typeof _b8==="string"){return _b8;}else{if(typeof _b8==="number"||typeof _b8==="boolean"){return String(_b8);}else{if(typeof _b8==="object"){if(dojo.isArray(_b8)){for(var i=0;i<_b8.length;i++){_b8[i]=arguments.callee(_b8[i]);}}else{for(var p in _b8){if(p.indexOf("_")!=0){_b8[p]=arguments.callee(_b8[p]);}}}return _b8;}else{return null;}}}},_setValueAttr:function(obj){var map={};var _b9={};dojo.forEach(this.getDescendants(),function(_ba){if(_ba.storeDataName){var _bb=_b9[_ba.storeDataName]||(_b9[_ba.storeDataName]=[]);_bb.push(_ba);}if(!_ba.name){return;}var _bc=map[_ba.name]||(map[_ba.name]=[]);_bc.push(_ba);});for(var _bd in _b9){var _be=_b9[_bd];var _bf=dojo.getObject(_bd,false,obj);if(_bf!==undefined){dojo.forEach(_be,function(w,i){w.setStoreData(i==0?_bf:dojo.clone(_bf));});}}for(var _bd in map){if(!map.hasOwnProperty(_bd)){continue;}var _be=map[_bd],_c0=dojo.getObject(_bd,false,obj);if(_c0===undefined){continue;}if(!dojo.isArray(_c0)){_c0=[_c0];}if(typeof _be[0].checked!=="undefined"){dojo.forEach(_be,function(w,i){w.set("value",dojo.indexOf(_c0,w.value)!=-1);});}else{if(_be[0].multiple){_be[0].set("value",_c0);}else{dojo.forEach(_be,function(w,i){w.set("value",_c0[i]);});}}}},validValue:null,_getValidValueAttr:function(){var obj={};var _c1=this;dojo.forEach(this.getDescendants(),function(_c2){var _c3=_c2.name;if((!_c3||_c2.disabled||_c2.isNotSubmitted)&&(!_c2.storeDataName||!_c2.getEditableStroeData||((_c2 instanceof com.ibm.btt.dijit.Grid)&&_c2.readOnly&&!_c2.disabled))){return;}if(_c2.state&&!(_c2.get("state")==""||_c2.get("state")=="Normal")){return;}if(typeof (_c2.ajaxSubmit)!="undefined"&&_c2.ajaxSubmit==false){return;}if(_c2.storeDataName&&_c2.getEditableStroeData&&((_c2 instanceof com.ibm.btt.dijit.Grid)&&!_c2.readOnly)){var _c4=_c2.getEditableStroeData();if(_c4){dojo.setObject(_c2.storeDataName,_c1._convertValueToString(_c4),obj);}}var _c5=_c2.get("value");if(_c5===undefined){return;}if(_c5==null){_c5="";}if(typeof _c2.checked!=="undefined"){if(/Radio/.test(_c2.declaredClass)){if(_c5!==false){dojo.setObject(_c3,_c1._convertValueToString(_c5),obj);}else{_c5=dojo.getObject(_c3,false,obj);if(_c5===undefined){dojo.setObject(_c3,null,obj);}}}else{if(_c5!==false){dojo.setObject(_c3,_c1._convertValueToString(_c5),obj);}}}else{if(typeof _c5=="number"&&_c2.serialize){_c5=_c2.serialize(_c5,_c2.constraints);}else{if(_c5!=null&&_c5 instanceof Date){if(_c2.serialize){_c5=_c2.serialize(_c5,_c2.constraints);}else{_c5=_c5.getFullYear()+"-"+(_c5.getMonth()+1)+"-"+_c5.getDate();}}}_c5=_c1._convertValueToString(_c5);if(_c2.type!=="hidden"&&((_c2.params.value&&_c2.params.value==_c5)||(!_c2.params.value&&""==_c5))){return;}var _c6=dojo.getObject(_c3,false,obj);if(typeof _c6!="undefined"){if(dojo.isArray(_c6)){_c6.push(_c5);}else{dojo.setObject(_c3,[_c6,_c5],obj);}}else{dojo.setObject(_c3,_c5,obj);}}});return obj;}});}if(!dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]){dojo._hasResource["com.ibm.btt.dijit._FormXValidationMixin"]=true;dojo.provide("com.ibm.btt.dijit._FormXValidationMixin");dojo.declare("com.ibm.btt.dijit._FormXValidationMixin",null,{xValidations:[],xValid:true,_xHintWidget:null,getPW:function(id,_c7){var _c8=dijit.byId(id).get(_c7);return _c8;},getW:function(id){return dijit.byId(id);},runWF:function(id,_c9,_ca){var _cb=dijit.byId(id);var _cc=[];for(var i=2;i<arguments.length;i++){_cc[i-2]=arguments[i];}var _cd=_cb[_c9].apply(_cb,_cc);return _cd;},xValidate:function(_ce){if(!_ce||_ce.length==0){return "";}var _cf=null;for(var i=0;i<_ce.length;i++){if(!_ce[i].cond.call(this)){_cf=_ce[i];break;}}return _cf;},_getActiveXValidationsForWidget:function(_d0){return this._getActiveXValidations(this._getXValidationRuleByWidget(_d0),_d0);},_getActiveXValidations:function(_d1,_d2){return dojo.filter(_d1,function(_d3){return dojo.every(_d3.widgets,function(id){return ((id==_d2)||(id!=_d2&&dijit.byId(id).get("value")!=""));});});},_getXValidationRuleByWidget:function(_d4){var _d5=dojo.filter(this.xValidations,function(_d6){return dojo.indexOf(_d6.widgets,_d4)>=0;});return _d5;},showXValidationMsg:function(_d7,_d8){if(_d8){this._hideXHint();this._xHintWidget=_d8;dijit.showTooltip(this.getI18NString(_d7),_d8.domNode);}},_hideXHint:function(){if(this._xHintWidget){_xHintWidget=null;dijit.hideTooltip(this._xHintWidget.domNode);}},destroy:function(){this.inherited(arguments);this._hideXHint();}});}if(!dojo._hasResource["com.ibm.btt.dijit.Form"]){dojo._hasResource["com.ibm.btt.dijit.Form"]=true;dojo.provide("com.ibm.btt.dijit.Form");dojo.declare("com.ibm.btt.dijit.Form",[dijit.form.Form,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin,com.ibm.btt.dijit._FormXValidationMixin],{bttErrorPage:"",validateOnSubmit:true,hiddenParamHandle:{},_isStarted:false,_events:[],attributeMap:dojo.delegate(dijit.form.Form.prototype.attributeMap,{visibility:{node:"domNode"}}),create:function(){this.submitButton=new Array();this.submitButtonOS=new Array();this.inherited(arguments);this._events.push(dojo.connect(this.domNode,"onkeydown",this,"_onKey"));},onLoaded:function(){},onFormSubmit:function(){},_setXValidationsAttr:function(_d9){this.xValidations=_d9;if(this.xValidate(this.xValidations)){this.xValid=false;this.setSubmitButtonState();}},_xValidateByWidget:function(_da){var _db=this.xValidate(this._getActiveXValidationsForWidget(_da.get("id")));var _dc=_da;if(!_db){_db=this.xValidate(this._getActiveXValidations(this.xValidations));_dc=_db?dijit.byId(_db.widgets[0]):_da;}if(_db){this.showXValidationMsg(_db.hint,_dc);}var _dd;if(_dd=this.xValidate(this.xValidations)){if(!_db){this.showXValidationMsg(_dd.hint,dijit.byId(_dd.widgets[0]));}this.xValid=false;}else{this.xValid=true;this._hideXHint();}this.setSubmitButtonState();},fireWidgetBlurEvent:function(_de){this._xValidateByWidget(_de);},fireWidgetChangeEvent:function(_df){this._xValidateByWidget(_df);this.onWidgetChange();},onWidgetChange:function(){},connectChildren:function(_e0){this.inherited(arguments);var _e1=this._childConnections;var _e2=this;var _e3=this.getDescendants();dojo.forEach(dojo.filter(_e3,function(_e4){return _e4.onChange;}),function(_e5){_e1.push(_e2.connect(_e5,"onChange",dojo.hitch(_e2,"fireWidgetChangeEvent",_e5)));_e1.push(_e2.connect(_e5,"onBlur",dojo.hitch(_e2,"fireWidgetBlurEvent",_e5)));});},_onWidgetValidateStatesChange:function(_e6){if(this.isValid()&&!this.xValid){if((inValidRule=this.xValidate(this.xValidations))){this.xValid=false;this.showXValidationMsg(inValidRule.hint,dijit.byId(inValidRule.widgets[0]));}else{this.xValid=true;this._hideXHint();}}this.setSubmitButtonState();},onSubmit:function(e){var _e7=this._querySubmitButton(e);if(_e7&&_e7.bttParams){this.handleButtonSubmit(_e7);}else{this.parameterHandler(this.bttParams);}if(this.validateOnSubmit){if(!this.isValid()||!this.xValid){return false;}}dojo.forEach(this.getDescendants(),function(_e8){if(_e8.onFormSubmit){_e8.onFormSubmit();}});if(this.onFormSubmit){this.onFormSubmit();}return true;},_querySubmitButton:function(e){if(this._lastClickedButton){return this._lastClickedButton;}},setSubmitButtonState:function(){if(this.validateOnSubmit){if((this.get("state")==""||this.get("state")=="Normal")&&this.xValid){for(var i=0;i<this.submitButton.length;i++){var btn=this.submitButton[i];btn.set("disabled",btn.get("inValid"));}}else{for(var i=0;i<this.submitButton.length;i++){this.submitButton[i].set("disabled",true);}}}},handleButtonSubmit:function(_e9){if(_e9&&_e9.bttParams&&_e9.bttParams!=""){this.parameterHandler(_e9.bttParams);}},startup:function(){if(this._isStarted){return;}this._isStarted=true;this.inherited(arguments);var _ea=this;watches=this._childWatches;var _eb=this._childConnections;dojo.forEach(dojo.filter(this.getDescendants(),function(_ec){return _ec.get("type")&&_ec.get("type").toLowerCase()=="submit";}),function(_ed){_ea.submitButton.push(_ed);_ea.submitButtonOS.push(_ed.attr("disabled"));watches.push(_ed.watch("isValid",function(_ee,_ef,_f0){_ea.setSubmitButtonState();}));});if(this.bttParams!=null&&this.bttParams!=""){this.parameterHandler(this.bttParams);}if(this.bttErrorPage!=null&&this.bttErrorPage!=""){this.errorPageHandler();}this.watch("state",this._onWidgetValidateStatesChange);this.onWidgetChange();this.setSubmitButtonState();},parameterHandler:function(e){var _f1=dojo.fromJson(e);_f1[AjaxUtil.constants.BTT_TIMEZONE]=AjaxUtil.getTimzone();this.destroyHiddenParams();for(var _f2 in _f1){if(typeof (_f2)!="undefined"){var _f3=_f1[_f2];this.hiddenParamHandle[_f2]=dojo.create("input",{type:"hidden",name:_f2,value:_f3});dojo.place(this.hiddenParamHandle[_f2],this.containerNode,"last");}}},destroyHiddenParams:function(){for(var _f4 in this.hiddenParamHandle){dojo.destroy(this.hiddenParamHandle[_f4]);}this.hiddenParamHandle={};},errorPageHandler:function(){var _f5=dojo.create("input",{type:"hidden",name:AjaxUtil.constants["BTT_ERRORPAGE"],value:this.bttErrorPage});dojo.place(_f5,this.containerNode,"last");},_onKey:function(evt){if(evt.keyCode!=dojo.keys.ENTER){return evt.keyCode;}var _f6;for(var _f7=evt.target;_f7&&_f7!=this.domNode;_f7=_f7.parentNode){var id=_f7.getAttribute("widgetId");if(id){_f6=dijit.byId(id);break;}}if(_f6&&!_f6.isInstanceOf(com.ibm.btt.dijit.Button)&&!_f6.isInstanceOf(com.ibm.btt.dijit.Anchor)){if(this.bttParams&&this.bttParams.indexOf("dse_operationName")>-1){dojo.stopEvent(evt);this.submit();}else{evt.preventDefault();}return false;}return evt.keyCode;},destroy:function(){this.destroyHiddenParams();this.inherited(arguments);while(this._events.length>0){dojo.disconnect(this._events.pop());}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Image"]){dojo._hasResource["com.ibm.btt.dijit.Image"]=true;dojo.provide("com.ibm.btt.dijit.Image");dojo.declare("com.ibm.btt.dijit.Image",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<img >",location:"",width:"",height:"",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{location:{node:"domNode",type:"attribute",attribute:"src"},width:{node:"domNode",type:"attribute"},height:{node:"domNode",type:"attribute"},visibility:{node:"domNode"}}),_setLocationAttr:function(_f8){this.location=_f8;if(_f8){this.domNode.src=_f8;dojo.style(this.domNode,"display","");}else{dojo.style(this.domNode,"display","none");}},_setWidthAttr:function(_f9){if(_f9!=""){this.width=_f9;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_fa){if(_fa!=""){this.height=_fa;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Label"]){dojo._hasResource["com.ibm.btt.dijit.Label"]=true;dojo.provide("com.ibm.btt.dijit.Label");dojo.declare("com.ibm.btt.dijit.Label",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<label class='dijitLabelBase' dojoAttachPoint='labelContainer' ${nameAttrSetting} ></label>",text:"",name:"","for":"",width:"",height:"",textWrap:false,isNotSubmitted:true,fieldReference:"",postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{text:{node:"domNode",type:"innerHTML"},visibility:{node:"domNode"},"for":{node:"domNode"}}),postCreate:function(){this.inherited(arguments);if(this.hint==undefined||this.hint==null||this.hint==""){this.set("hint",this.text);}},_setTextAttr:function(_fb){this.text=_fb;this.domNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_fb));},_setTextWrapAttr:function(_fc){this.textWrap=_fc;if(this.textWrap){dojo.addClass(this.domNode,"dijitLabelWrap");}else{dojo.removeClass(this.domNode,"dijitLabelWrap");}},_setValueAttr:function(_fd){this.set("text",_fd);},_getValueArrt:function(_fe){return this.get("text");},_setForAttr:function(_ff){this.domNode.htmlFor=_ff;},_setWidthAttr:function(_100){if(this.width!=""){this.width=_100;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_101){if(this.height!=""){this.height=_101;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.RadioButton"]){dojo._hasResource["com.ibm.btt.dijit.RadioButton"]=true;dojo.provide("com.ibm.btt.dijit.RadioButton");dojo.declare("com.ibm.btt.dijit.RadioButton",[dijit.form.RadioButton,com.ibm.btt.dijit.AbstractWidgetMixin],{isChecked:false,text:"",visibility:"visible",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit.form.RadioButton.prototype.attributeMap,{text:{node:"labelNode"},isChecked:{node:"domNode"},visibility:{node:"domNode"}}),postMixInProperties:function(){if(this.isChecked==true){this.checked="checked";this.params.checked="checked";}this.inherited(arguments);},create:function(){this.labelNode=dojo.create("label",{"class":"dijitLabelBase"},this.domNode,"after");this.inherited(arguments);this.labelNode.htmlFor=this.id;dojo.place(this.labelNode,this.domNode,"after");if(this.width&&this.width!=""){this.set("width",this.width);}if(this.height&&this.height!=""){this.set("height",this.height);}},_setIsCheckedAttr:function(_102){this.set("checked",_102);},_setCheckedAttr:function(_103){if(_103==false||_103=="false"||_103==""){this.isChecked=false;}else{this.isChecked=true;}this.inherited(arguments);},_setTextAttr:function(_104){this.text=_104;this.labelNode.innerHTML=StringUtil.escapeEnterWrap(this.getI18NString(_104));},_setStyleAttr:function(_105){dojo.attr(this.labelNode,"style",_105);},_setClassAttr:function(_106){dojo.attr(this.labelNode,"class",_106);},_setHintAttr:function(_107){this.hint=_107;var _108=StringUtil.removeWarp(this.getI18NString(_107));this.domNode.title=_108;this.labelNode.title=_108;},_setVisibilityAttr:function(_109){this.visibility=_109;if(_109==="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");dojo.style(this.labelNode,"visibility","visible");dojo.style(this.labelNode,"display","none");}else{if(_109==="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");dojo.style(this.labelNode,"display","");dojo.style(this.labelNode,"visibility","visible");}}},_setReadOnlyAttr:function(_10a){this.inherited(arguments);if(_10a==="true"||_10a===true){this.labelNode.htmlFor="";}else{this.labelNode.htmlFor=this.id;}},_onClick:function(e){this.inherited(arguments);if(dojo.isIE&&this.readOnly&&this.focusNode.form){dojo.stopEvent(e);dojo.query("INPUT[type=radio]",this.focusNode.form).forEach(dojo.hitch(this,function(_10b){if(_10b.name==this.name&&_10b.form==this.focusNode.form){var _10c=dijit.getEnclosingWidget(_10b);if(_10c&&"checked" in _10c){_10c.set("checked",_10c.checked);}}}));}},_setTextWrapAttr:function(_10d){this.textWrap=_10d;if(this.textWrap){dojo.addClass(this.labelNode,"dijitLabelWrap");}else{dojo.removeClass(this.labelNode,"dijitLabelWrap");}},_setWidthAttr:function(_10e){if(this.width!=""){this.width=_10e;var _10f=_10e.replace(new RegExp("px","gm"),"");try{_10f=Number(_10f);}catch(e){console.error("Illegal input argument. Can not convert input width:"+_10e+" to number.");return;}var box=dojo.marginBox(this.domNode);var _110=_10f-box.w;if(_110<0){_110=0;}dojo.style(this.labelNode,"width",_110+"px");}},_setHeightAttr:function(_111){if(this.height!=""){this.height=_111;var _112=_111.replace(new RegExp("px","gm"),"");dojo.style(this.labelNode,"height",_112+"px");}},_onFocus:function(){this.inherited(arguments);if(!this.text||this.text===""||this.text===null){dojo.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}},destroy:function(){this.inherited(arguments);dojo.destroy(this.labelNode);this.labelNode=null;}});}if(!dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]){dojo._hasResource["com.ibm.btt.dijit.RichTextEditor"]=true;dojo.provide("com.ibm.btt.dijit.RichTextEditor");dojo.declare("com.ibm.btt.dijit.RichTextEditor",[dijit.Editor,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"",readOnly:false,attributeMap:dojo.delegate(dijit.Editor.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"},readOnly:{node:"domNode"}}),_setReadOnlyAttr:function(_113){this.set("disabled",_113);},_getReadOnlyAttr:function(){return this.get("disabled");},postCreate:function(){var _114=this.name;this.inherited(arguments);this._setWidthAttr(this.width);this._setHintAttr(this.hint);this._setVisibilityAttr(this.visibility);this.resetContent=this.get("savedContent");if(_114==""||_114==null||_114==undefined){this.name=null;}},_setWidthAttr:function(_115){if(_115!=""){this.width=_115;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHintAttr:function(_116){this.hint=_116;if(typeof (this.editingArea)!="undefined"&&this.editingArea!=null){this.editingArea.parentNode.title=StringUtil.removeWarp(this.getI18NString(_116));}},_getValueAttr:function(){var _117=this.inherited(arguments);if(dojo.isFF&&(_117=="<br _moz_editor_bogus_node=\"TRUE\" />"||_117=="<br />")){return "";}else{return _117;}},reset:function(e){this.set("value",this.resetContent);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Select"]){dojo._hasResource["com.ibm.btt.dijit.Select"]=true;dojo.provide("com.ibm.btt.dijit.Select");dojo.declare("com.ibm.btt.dijit.Select",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.FilteringSelect,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",storeData:"",width:"",storeURL:"",labelField:"label",valueField:"value",asyncStatus:0,asyncErrorMessage:"",constructor:function(){this.storeDataFormat={itemLabel:"label",itemValue:"value"};this.searchAttr=this.storeDataFormat.itemLabel;},attributeMap:dojo.delegate(dijit.form.FilteringSelect.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"}}),postCreate:function(){this.inherited(arguments);if(!this.storeDataName&&this.storeURL){if(this.params.value){this.value=this.params.value;this._lastValueReported=this.params.value;this._resetValue=this.params.value;}this.loadStoreFromURL(this.storeURL);}this._setWidthAttr(this.width);},postMixInProperties:function(){var root=this.srcNodeRef;var _118={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};var _119=this;dojo.query("> option",root).forEach(dojo.hitch(this,function(node,i){var item={};item[this.storeDataFormat.itemLabel]=_119.getI18NString(dojo.trim(node.innerHTML));var _11a=dojo.attr(node,"value");if(_11a==""){_11a="#";}item[this.storeDataFormat.itemValue]=_11a;_118.items.push(item);}));if(_118.items.length==0&&this.storeData){if(typeof this.storeData=="string"){this.storeData=dojo.fromJson(this.storeData);}_118=this._formatStoreData(this.storeData);}_118=this.prepareStoreData(_118);this.item=null;if(this.params.value){for(var i=0;i<_118.items.length;i++){if(this.params.value==_118.items[i].value){this.item=_118.items[i];}}}if(_118.items.length==0){var item={};item[this.storeDataFormat.itemValue]="#";item[this.storeDataFormat.itemLabel]="";_118.items.push(item);this._lastValueReported="#";this.value="#";}if(!this.item){this.item=_118.items[0];this.value=this.item.value;this._lastValueReported=this.item.value;}this.store=new dojo.data.ItemFileReadStore({data:_118});this.inherited(arguments);},_setStoreDataAttr:function(_11b){if(typeof _11b=="string"){_11b=dojo.fromJson(_11b);}this.storeData=_11b;},setStoreData:function(data){this._onChangeActive=false;var _11c=this.prepareStoreData(this._formatStoreData(data));this.store.clearOnClose=true;this.store.data=_11c;this.searchAttr=_11c.label;this.store.close();this.set("value",this.value);this._setBlurValue();this._onChangeActive=true;},prepareStoreData:function(data){return data;},_formatStoreData:function(data){var _11d={identifier:this.storeDataFormat.itemValue,label:this.storeDataFormat.itemLabel,items:[]};if(data instanceof Array){for(var i=0;i<data.length;i++){if(data[i]!=null&&data[i][this.valueField]!=null&&data[i][this.labelField]!=null){var item={};item[this.storeDataFormat.itemValue]=data[i][this.valueField];item[this.storeDataFormat.itemLabel]=this.getI18NString(data[i][this.labelField]);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_11d.items.push(item);}}}else{if(data instanceof Object){for(var p in data){if(data[p]!=null){var item={};item[this.storeDataFormat.itemValue]=data[p];item[this.storeDataFormat.itemLabel]=this.getI18NString(p);if(item[this.storeDataFormat.itemValue]==""&&item[this.storeDataFormat.itemLabel]==""){item[this.storeDataFormat.itemValue]="#";}_11d.items.push(item);}}}}return _11d;},_handleStoreLoadingError:function(err){if(err.status!==undefined){this.asyncStatus=err.status;this.asyncErrorMessage=err.message;this.onAsyncError();}},onAsyncOK:function(){},onAsyncError:function(){},loadStoreFromURL:function(url){this.storeURL=url;var _11e={url:this.storeURL,handleAs:"json",sync:true,load:dojo.hitch(this,"_handleStoreLoadingResponse"),error:dojo.hitch(this,"_handleStoreLoadingError")};this.asyncStatus=0;this.asyncErrorMessage="";dojo.xhrGet(_11e);},_handleStoreLoadingResponse:function(data){this.setStoreData(data);this.onAsyncOK();},_setVisibilityAttr:function(_11f){this.visibility=_11f;var _120;if(typeof (this.domNode.children)!="undefined"&&typeof (this.domNode.children[0])!="undefined"&&typeof (this.domNode.children[0].children[1])!="undefined"){_120=this.domNode.children[0].children[1];}else{_120=null;}if(_11f=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");if(_120!=null){dojo.style(_120,"visibility","");}}else{if(_11f=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");if(_120!=null){dojo.style(_120,"visibility","hidden");}}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");if(_120!=null){dojo.style(_120,"visibility","");}}}},_setWidthAttr:function(_121){if(_121!=""){this.width=_121;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setValueAttr:function(_122){var _123=false;this.store.fetchItemByIdentity({identity:_122,onItem:function(item){}});var _124=this.store._getItemsArray();if(_124){dojo.some(_124,function(item){if(item.value&&item.value[0]&&item.value[0]==_122){_123=true;return false;}});}if(!_123){var _124=this.store._getItemsArray();if(_124.length==0){_122="";}else{var id=this.store.getIdentity(_124[0]);this.store.fetchItemByIdentity({identity:id,onItem:dojo.hitch(this,function(item){if(item){_123=true;_122=item.value&&item.value[0]?item.value[0]:null;this.set("item",item);}})});}this.value=_122;this._lastValueReported=_122;}this.inherited(arguments);},_getValueAttr:function(){var _125=this.inherited(arguments);if(_125==null||_125=="#"){return "";}else{return _125;}},_setItemAttr:function(){this.inherited(arguments);this.valueNode.value=this.get("value");}});}if(!dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]){dojo._hasResource["com.ibm.btt.dijit.StringTextBox"]=true;dojo.provide("com.ibm.btt.dijit.StringTextBox");dojo.requireLocalization("com.ibm.btt.dijit","TextBox", null, "ROOT");dojo.declare("com.ibm.btt.dijit.StringTextBox",[com.ibm.btt.dijit.ValidationTextBox],{maximumLength:NaN,minimumLength:NaN,validCharacters:"",password:false,postMixInProperties:function(){this.inherited(arguments);if(this.password){this.type="password";}},postCreate:function(){this.inherited(arguments);this.attr("value",this.attr("value"));},validator:function(_126,_127){var _128=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","TextBox");if(this.attr("value")!=""&&(!isNaN(this.minimumLength))&&this.attr("value").length<this.minimumLength){this.invalidMessage=_128.getMessage("stringMinMessage",{value:this.minimumLength});return false;}else{if(this.attr("value")!=""&&(!isNaN(this.maximumLength))&&this.attr("value").length>this.maximumLength){this.invalidMessage=_128.getMessage("stringMaxMessage",{value:this.maximumLength});return false;}else{return this.inherited(arguments);}}},_setValueAttr:function(_129){if(_129!=null&&_129!=undefined){_129=this.getI18NString(_129);_129=_129.replace(/&amp;/g,"&").replace(/&lt;/g,"<");this.value=_129;this.inherited(arguments);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.TextArea"]){dojo._hasResource["com.ibm.btt.dijit.TextArea"]=true;dojo.provide("com.ibm.btt.dijit.TextArea");dojo.declare("com.ibm.btt.dijit.TextArea",[com.ibm.btt.dijit.ValidationTextBox,dijit.form.SimpleTextarea],{width:"",height:"",attributeMap:dojo.delegate(dijit.form.SimpleTextarea.prototype.attributeMap,{visibility:{node:"domNode"},width:{node:"domNode"},height:{node:"domNode"}}),validator:function(_12a,_12b){if(!(!this.required||!this._isEmpty(_12a))){return false;}return true;},_setVisibilityAttr:function(_12c){this.visibility=_12c;if(_12c=="gone"){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");}else{if(_12c=="hidden"){dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");}}},_setWidthAttr:function(_12d){if(_12d!=""){this.width=_12d;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_12e){if(_12e!=""){this.height=_12e;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setValueAttr:function(_12f){_12f=this.getI18NString(_12f);this.inherited(arguments);}});}if(!dojo._hasResource["com.ibm.btt.dijit.Tree"]){dojo._hasResource["com.ibm.btt.dijit.Tree"]=true;dojo.provide("com.ibm.btt.dijit.Tree");dojo.declare("com.ibm.btt.dijit.Tree",[dijit.Tree,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",name:"",storeData:null,showRoot:false,value:"",_selectedItem:null,width:"",height:"",persist:false,templateString:dojo.cache("com.ibm.btt.dijit","templates/Tree.html","<div class=\"dijitTree dijitTreeContainer\" waiRole=\"tree\" style=\"overflow:auto\"\r\n\tdojoAttachEvent=\"onkeypress:_onKeyPress\">\r\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" dojoAttachPoint=\"indentDetector\"></div>\r\n\t<input type=\"hidden\" dojoAttachPoint=\"formNode\"/>\r\n</div>\r\n"),attributeMap:dojo.delegate(dijit.Tree.prototype.attributeMap,{visibility:{node:"domNode"},name:{node:"formNode"},value:{node:"formNode"},width:{node:"formNode"},height:{node:"formNode"}}),postMixInProperties:function(){this.inherited(arguments);this.loadStoreData();},postCreate:function(){this.inherited(arguments);this.treeEvents=[];var _130=this;this.treeEvents.push(dojo.connect(this,"onClick",this,function(item){_130.set("value",item.id[0]);}));this._lastValue=this.value;},onLoad:function(){this.inherited(arguments);this._expandNode(this.tree.rootNode.getChildren()[0],false);this.reset();if(this.value!=""){var _131=this.value.split(".");var _132=_131[0];for(var i=1;i<_131.length;i++){var n=this._itemNodesMap[_132];if(n){this._expandNode(n[0],false);}_132+="."+_131[i];}var _133=this._itemNodesMap[this.value];this._expandNode(_133[0],false);_133[0].setSelected(true);}},_parseStoreData:function(_134,data){this.firstSelectedItem=null;var _135=[];for(var name in data){var item={};if(_134!=null&&typeof (_134.id)!="undefined"){item.id=_134.id+"."+name;}else{item.id=name;}item.label=data[name]["label"];item.value=data[name]["value"];if(data[name]["children"]){item.children=this._parseStoreData(item,data[name]["children"]);}_135.push(item);}return _135;},getLabel:function(item){return I18nUtil.getI18nString(this.inherited(arguments));},loadStoreData:function(){var _136=this._parseStoreData(null,this.storeData);if(!this.model){var data={"identifier":"id","label":"label","items":_136};var _137=new dojo.data.ItemFileWriteStore({"data":data});this.model=new dijit.tree.ForestStoreModel({"store":_137});}else{var tree=this;var _137=this.model.store;this.model.store.fetch({queryOptions:{deep:true},onComplete:function(_138,_139){for(var i=_138.length-1;i>=0;i--){_137.deleteItem(_138[i]);}}});_137.save();(function(_13a,_13b){for(var i=0;i<_13a.length;i++){var _13c;if(_13a[i].children&&_13a[i].children.length){_13c=_13a[i].children;_13a[i].children=[];}else{_13c=null;}if(_13b){var _13d=_137.newItem(_13a[i],{parent:_13b,attribute:"children"});}else{var _13d=_137.newItem(_13a[i]);}if(_13c){arguments.callee(_13c,_13d);}}})(_136);_137.save();}},setStoreData:function(data){var _13e={};_13e[this.storeDataName]=data;this.storeData=_13e;this.loadStoreData();if(this.dndController){this.dndController.destroy();var _13f={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_13f[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController.constructor(this,_13f);}this.set("paths",[]);},destroy:function(){this.inherited(arguments);for(var i=0;this.treeEvents.length;i++){dojo.disconnect(this.treeEvents.pop());}this.treeEvents=null;},_setValueAttr:function(_140){dojo.forEach(this.get("selectedNodes"),function(_141){_141.setSelected(false);});if(this._lastValue){var node=this._itemNodesMap[this._lastValue];if(node){node[0].setSelected(false);}}this.set("paths",[]);var _142=this._itemNodesMap[_140];this.value=_140;this.formNode.value=_140;if(_142){this.set("selectedNodes",_142);this._selectedItem=_142[0].item;}},getSelectedLabel:function(){if(this._selectedItem){return this._selectedItem.label[0];}else{return undefined;}},getSelectedLabelNLS:function(){if(this._selectedItem){return I18nUtil.getI18nString(this._selectedItem.label[0]);}else{return undefined;}},getSelectedValue:function(){if(this._selectedItem){return this._selectedItem.value[0];}else{return undefined;}},isFocusable:function(){return (!this.disabled)&&(!this.readOnly)&&(dojo.style(this.domNode,"display")!=="none")&&(dojo.style(this.domNode,"visibility")!=="hidden");},reset:function(){this.inherited(arguments);if(this.params.value){this.set("value",this.params.value);}else{this.set("value","");}},getTooltip:function(item){var tip=this.getI18NString(this.hint);if(tip==undefined){tip="";}this.hint=tip;return tip;},_setHintAttr:function(_143){this.hint=_143;var _144=StringUtil.removeWarp(this.getI18NString(_143));this.domNode.title=_144;if(this.rootNode){this._setHintForAllChild(this.rootNode,_144);}},_setHintForAllChild:function(root,hint){var _145=this;root.set("tooltip",hint);root.set("hint",hint);if(root.hasChildren()){dojo.forEach(root.getChildren(),function(_146,idx){_145._setHintForAllChild(_146,hint);});}},_setWidthAttr:function(_147){if(_147!=""){this.width=_147;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_148){if(_148!=""){this.height=_148;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},_setVisibilityAttr:function(_149){this.inherited(arguments);this.resize();}});}if(!dojo._hasResource["com.ibm.btt.event._ConditionMixin"]){dojo._hasResource["com.ibm.btt.event._ConditionMixin"]=true;dojo.provide("com.ibm.btt.event._ConditionMixin");dojo.declare("com.ibm.btt.event._ConditionMixin",null,{_conditionMap:{},registerCond:function(url){if(url){var _14a={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadCond"),error:dojo.hitch(this,"_loadCondError",url)};dojo.xhrGet(_14a);}else{console.error("The argument can not be null.");}},_loadCond:function(cond){if(cond){for(var name in cond){if(name&&cond[name]&&typeof (cond[name])=="function"){this._conditionMap[name]=cond[name];}}}},_loadCondError:function(url,_14b){console.error("Fail to load the condition on "+url+", error : "+_14b);},executeCond:function(){var name=arguments[0];var args=[];var _14c=Number(arguments.length);var i=1;while(i<_14c){args.push(arguments[i]);i++;}try{if(this._conditionMap[name]){return this._conditionMap[name].apply(this,args);}else{console.error("Condition with specified name is not found. condition="+name);}}catch(e){console.error("An error occured while executing the condition "+name+", error "+e);}},executeDeprecatedCond:function(){var name=arguments[0];console.warn("The condition ["+name+"] is deprecated.");this.executeCond(arguments);}});}if(!dojo._hasResource["com.ibm.btt.event._AccessKeyMixin"]){dojo._hasResource["com.ibm.btt.event._AccessKeyMixin"]=true;dojo.provide("com.ibm.btt.event._AccessKeyMixin");dojo.declare("com.ibm.btt.event._AccessKeyMixin",null,{_registeredKeyMaps:{},_globalKeyHandler:null,constructor:function(){this._connectKeyEvents();},_debugKeyState:function(evt){if(dojo.config.isDebug){console.debug("keyCode : "+evt.keyCode);console.debug("altKey : "+evt.altKey);console.debug("ctrlKey : "+evt.ctrlKey);console.debug("shiftKey : "+evt.shiftKey);console.debug("metaKey : "+evt.metaKey);}},_connectKeyEvents:function(){_globalKeyHandler=dojo.connect(document,"onkeydown",this,this._onKeyDown);},_onKeyDown:function(evt){var _14d=this._checkKeys(evt);if(_14d==null){return true;}if(_14d.onKeyDown){_14d.onKeyDown.apply(this,arguments);}if(_14d.keys.defaultPrevented){dojo.stopEvent(evt);return false;}},_checkKeys:function(evt){for(var _14e in this._registeredKeyMaps){var _14f=this._registeredKeyMaps[_14e];if(_14f.keys.keyCode==evt.keyCode&&_14f.keys.altKey==evt.altKey&&_14f.keys.ctrlKey==evt.ctrlKey&&_14f.keys.shiftKey==evt.shiftKey&&_14f.keys.metaKey==evt.metaKey){return _14f;}}return null;},registerKeys:function(url){if(url){var _150={"url":url,handleAs:"json",sync:true,load:dojo.hitch(this,"_loadKeys"),error:dojo.hitch(this,"_loadKeysError",url)};dojo.xhrGet(_150);}else{console.error("The argument can not be null.");}},_loadKeys:function(_151){if(_151){for(var i=0;i<_151.length;i++){var _152=_151[i];if(_152&&_152.name&&_152.onKeyDown){this._registeredKeyMaps[_152.name]=_152;}}}},_loadKeysError:function(url,_153){console.error("Fail to load the condition from : "+url);console.error("  Error : "+_153);},destroy:function(){this.inherited(arguments);if(_globalKeyHandler!=null){dojo.disconnect(_globalKeyHandler);}}});}if(!dojo._hasResource["com.ibm.btt.event.Engine"]){dojo._hasResource["com.ibm.btt.event.Engine"]=true;dojo.provide("com.ibm.btt.event.Engine");dojo.declare("com.ibm.btt.event.Engine",[com.ibm.btt.event._ConditionMixin,com.ibm.btt.event._AccessKeyMixin],{monitor:null,_ruleEvents:[],_ruleMaps:{},setMonitor:function(_154){this.monitor=_154;},registerRules:function(_155){this._formOnLoaded=[];for(var i=0;i<_155.length;i++){if(_155[i].evts){for(var j=0;j<_155[i].evts.length;j++){this._registerEvent(_155[i],_155[i].evts[j]);}}if(_155[i].type&&_155[i].type=="AG"){this._ruleMaps[_155[i].name]=_155[i];}}for(var i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i].onLoaded){this._formOnLoaded[i].onLoaded();}}this._formOnLoaded=undefined;delete this._formOnLoaded;},_getWidget:function(id){if(id.lastIndexOf(".")==-1){return dijit.byId(id);}else{var _156=id.substring(0,id.indexOf("."));var _157=id.substring(id.indexOf(".")+1,id.length);obj=dijit.byId(_156);if(obj&&obj.getWidget){return obj.getWidget(_157);}else{return null;}}},_registerEvent:function(rule,_158){var obj=this._getWidget(_158.id);if(!obj){obj=document;}var _159=dojo.connect(obj,_158.e,this,function(evt){if(this.monitor!=null){this.monitor.monitorStartRule(_158,rule);}var _15a=this._executeCondition(rule,evt);if(this.monitor!=null){this.monitor.monitorCondition(_158,rule,_15a);}this._executeAction(_15a,rule,evt);if(this.monitor!=null){this.monitor.monitorEndRule(_158,rule);}});if(_158.e==="onLoaded"){var i;for(i=0;i<this._formOnLoaded.length;i++){if(this._formOnLoaded[i]==obj){break;}}if(i==this._formOnLoaded.length){this._formOnLoaded.push(obj);}}this._ruleEvents.push(_159);},_executeCondition:function(rule,evt){var _15b=true;if(rule&&rule.cond){try{_15b=rule.cond.call(this,evt);}catch(e){console.error("An error occured while ECA condition excuting."+e.toString());}}return _15b;},_executeAction:function(_15c,rule,evt){if(_15c){if(rule.onTrue){try{rule.onTrue.call(this,evt);}catch(e){console.error("An error occured while ECA on true state excuting."+e.toString());}}}else{if(rule.onFalse){try{rule.onFalse.call(this,evt);}catch(e){console.error("An error occured while ECA on false state excuting."+e.toString());}}}},executeAG:function(name){if(name){var rule=this._ruleMaps[name];if(rule){if(this.monitor&&this.monitor.monitorStartAG){this.monitor.monitorStartAG(rule);}var _15d=this._executeCondition(rule);if(this.monitor&&this.monitor.monitorAGCondition){this.monitor.monitorAGCondition(rule,_15d);}this._executeAction(_15d,rule);if(this.monitor&&this.monitor.monitorEndAG){this.monitor.monitorEndAG(rule);}}else{console.error("can not find corresponding action group with given name '"+name+"'");}}else{console.error("Input argument name to execute an action group can not be null or undefined or empty.");}},clearRules:function(){while(this._ruleEvents.length>0){dojo.disconnect(this._ruleEvents.pop());}this._ruleMaps={};},setPW:function(id,_15e,_15f){if(this.monitor!=null){this.monitor.monitorSetPropertyAction(id,_15e,_15f);}var obj=this._getWidget(id);if(!obj){console.error("Failed to register event '"+event.id+"', "+"parent widget mush provide getWidget(id) widget to support subwidget listening funcion.");return;}obj.set(_15e,_15f);},getPW:function(id,_160){var obj=this._getWidget(id);if(!obj){obj=dijit.byId(event.id);console.error("Failed to register event '"+event.id+"', "+"parent widget mush provide getWidget(id) widget to support subwidget listening funcion.");return;}var _161=obj.get(_160);if(this.monitor!=null){this.monitor.monitorGetPropertyAction(id,_160,_161);}return _161;},getW:function(id){var obj=this._getWidget(id);if(!obj){console.error("Failed to register event '"+event.id+"', "+"parent widget mush provide getWidget(id) widget to support subwidget listening funcion.");return;}return obj;},runWF:function(id,_162,_163){var _164=this._getWidget(id);if(!_164){console.error("Failed to register event '"+event.id+"', "+"parent widget mush provide getWidget(id) widget to support subwidget listening funcion.");return;}var args=[];for(var i=2;i<arguments.length;i++){args[i-2]=arguments[i];}var _165=_164[_162].apply(_164,args);if(this.monitor!=null){this.monitor.monitorCallFunctionAction(id,_162,args,_165);}return _165;},runFunction:function(obj,func,args){return func.apply(obj,args);},runInlineScript:function(obj,func){return this.runFunction(obj,func,[]);},stopEvent:function(evt){dojo.stopEvent(evt);return false;},destroy:function(){this.clearRules();this._ruleEvents=undefined;this.monitor=undefined;this._ruleMaps=undefined;}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridDijit"]){dojo._hasResource["com.ibm.btt.dijit.GridDijit"]=true;dojo.provide("com.ibm.btt.dijit.GridDijit");dojo.declare("dojox.btt.grid.cells.BaseCellWidget",dojox.grid.cells._Widget,{constructor:function(){if(!this.widget){this.widget=this.createWidget(dojo.create("div"),"");}},createWidget:function(_166,_167,_168){var _169=this.inherited(arguments);var _16a=this;_169.watch("state",function(attr,_16b,_16c){_16a.grid._set("state",_16a.grid._getState());});return _169;},setValue:function(_16d,_16e){if(this.widget&&this.widget.set){if(this.widget.onLoadDeferred){var self=this;this.widget.onLoadDeferred.addCallback(function(){self.widget._lastValueReported=_16e;self.widget.set("value",_16e===null?"":_16e);});}else{this.widget._lastValueReported=_16e;this.widget.set("value",_16e,_16e);}}else{this.inherited(arguments);}},getWidget:function(){return this.widget;}});dojo.declare("dojox.btt.grid.cells.Label",dojox.btt.grid.cells.BaseCellWidget,{formatter:function(_16f){return I18nUtil.getI18nString(_16f);}});dojo.declare("dojox.btt.grid.cells.DateTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.DateTextBox,formatter:function(_170){if(_170==undefined||_170==null||_170==""||_170=="null"){return "";}var date;if(typeof _170=="string"){if(this.widget&&this.widget.pattern){date=this.widget.parse(_170,this.widget.constraints);}else{var _171=this.widget.constraints;_171["datePattern"]="yyyy-MM-dd";date=this.widget.parse(_170,_171);}}else{date=_170;}return this.widget.format(date,this.widget.constraints);},getWidgetProps:function(_172){return dojo.mixin(this.inherited(arguments),{value:new Date(_172)});},setValue:function(_173,_174){if(_174==undefined||_174==null||_174==""||_174=="null"){this.widget._lastValueReported=null;this.widget.set("value",null);return;}if(this.widget){if(typeof _174=="string"){if(this.widget&&this.widget.pattern){var date=this.widget.parse(_174,this.widget.constraints);this.widget._lastValueReported=date;this.widget.set("value",date);}else{this.widget._lastValueReported=new Date(_174);this.widget.set("value",new Date(_174));}}else{this.widget._lastValueReported=_174;this.widget.set("value",_174);}}else{this.inherited(arguments);}},getValue:function(_175){if(this.widget.isValid()){var _176=this.widget.get("value");if(_176){return _176;}else{return "";}}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},formatNode:function(_177,_178){this.inherited(arguments);this.setValue(_177,_178);}});dojo.declare("dojox.btt.grid.cells.CurrencyTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CurrencyTextBox,formatter:function(_179){if(_179===null){return "";}if(typeof _179=="string"){_179=Number(_179);}this.widget._lastValueReported=_179;this.widget.set("value",_179);return dojo.number.format(_179,this.widget.constraints);},getWidgetProps:function(_17a){return dojo.mixin(this.inherited(arguments),{value:new Number(_17a)});},getValue:function(_17b){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},setValue:function(_17c,_17d){if(_17d&&typeof _17d=="string"){inData=Number(_17d);}this.inherited(arguments);}});dojo.declare("dojox.btt.grid.cells.NumberTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.NumberTextBox,formatter:function(_17e){if(_17e===null||_17e===""){return "";}this.widget.set("value",_17e);if(typeof _17e=="string"){var _17f=this.widget.parse(_17e,this.widget.constraints);if(isNaN(_17f)){_17f=Number(_17e);}if(isNaN(_17f)){return _17e;}else{return this.widget.format(_17f,this.widget.constraints);}}else{return this.widget.format(_17e,this.widget.constraints);}},getWidgetProps:function(_180){return dojo.mixin(this.inherited(arguments),{value:new Number(_180)});},getValue:function(_181){if(this.widget.isValid()){var _182=this.widget.get("value");if(isNaN(_182)){return "";}else{return _182;}}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}}});dojo.declare("dojox.btt.grid.cells.CheckBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.CheckBox,getValue:function(){return this.widget.get("value");},setValue:function(_183,_184){if(_184&&this.widget){if(_184.toString()==this.widget.checkedValue.toString()){this.widget._lastValueReported=true;this.widget.set("isChecked",true);}else{this.widget._lastValueReported=false;this.widget.set("isChecked",false);}}else{this.inherited(arguments);}},sizeWidget:function(_185,_186,_187){return;}});dojo.declare("dojox.btt.grid.cells.StringTextBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.StringTextBox,getValue:function(_188){if(this.widget.isValid()){return this.widget.get("value");}else{this.widget.displayMessage(this.widget.getErrorMessage(true));return undefined;}},formatter:function(_189){return I18nUtil.getI18nString(_189);}});dojo.declare("dojox.btt.grid.cells.ComboBox",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.ComboBox,getValue:function(){var e=this.widget;e.attr("displayedValue",e.attr("displayedValue"));return e.attr("value");}});dojo.declare("dojox.btt.grid.cells.Select",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Select,comparator:function(_18a,_18b){var _18c=this.widget.store;var _18d=_18c._itemsByIdentity[_18a];var v1=_18d?_18d.label[0]:_18a;var _18e=_18c._itemsByIdentity[_18b];var v2=_18e?_18e.label[0]:_18b;if(v1>v2){return 1;}else{if(v1<v2){return -1;}else{return 0;}}},formatter:function(_18f){if((_18f===null)||(_18f==="")){return "";}var _190=this.widget.store;var item=_190._itemsByIdentity[_18f];if(item){return item.label[0];}else{return _18f;}}});dojo.declare("dojox.btt.grid.cells.Image",dojox.btt.grid.cells.BaseCellWidget,{widgetClass:com.ibm.btt.dijit.Image,formatter:function(_191){var html="<img src=\""+_191+"\"";if(this.widgetProps&&this.widgetProps.imageWidth){html+=" width=\""+this.grid.handleLenUint(this.widgetProps.imageWidth)+"\"";}if(this.widgetProps&&this.widgetProps.imageHeight){html+=" height=\""+this.grid.handleLenUint(this.widgetProps.imageHeight)+"\"";}html+="/>";return html;}});dojo.declare("dojox.btt.grid.cells.LabelFromList",dojox.btt.grid.cells.BaseCellWidget,{constructor:function(prop){var _192=this;if(prop.storeData){_192.storeData=prop.storeData;}else{var _193=prop.storeURL?prop.storeURL:prop.widgetProps.storeURL;if(_193){var _194={url:_193,handleAs:"json",sync:true,load:function(arg){_192.storeData=arg;},error:function(e){console.error("dojox.btt.grid.cells.LabelFromList: Failed to get the list file from "+_193);}};dojo.xhrGet(_194);}else{_192.storeData={};}}if(_192.storeData){var _195={};for(var key in _192.storeData){if(_192.storeData[key]!=null&&typeof (_192.storeData[key])!="undefined"){_195[_192.storeData[key]]=key;}}_192.storeData=_195;}},formatter:function(_196){if(this.storeData&&this.storeData[_196]){return "<label>"+I18nUtil.getI18nString(this.storeData[_196])+"</label>";}else{if(_196&&_196===null&&_196==="null"){return "";}else{return "<label>"+_196+"</label>";}}}});dojo.declare("dojox.btt.grid.cells._LinkMixin",null,{_onClick:function(e){if(!e.target.tagName||(!this._tagartTagName[e.target.tagName.toUpperCase()])){return;}e.defaultPrevented=true;dojo.stopEvent(e);var rowd=this.grid.getItem(e.rowIndex);var _197=false;if(this.widgetProps){if((!this.widgetProps.dataNameForClickable||this.grid.store.getValue(rowd,this.widgetProps.dataNameForClickable))&&((this.widgetProps.dataNameForLink&&this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink))||this.widgetProps.flowEvent)){_197=true;}}if(!_197){return;}if(this.onClick(e)===false){return;}if(this.grid.selectionMode==="single"||this.grid.selectionMode==="extended"){if(!this.grid.selection.isSelected(e.rowIndex)){this.grid.selection.setSelected(e.rowIndex,true);}}var _198={};for(var key in rowd){if(key.charAt(0)!="_"&&rowd[key]){_198[key]=rowd[key][0];}}if(this.widgetProps&&this.widgetProps.dataNameForLink){var url=this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink);if(url&&url!=""){return this._openLink(url,_198);}}if(this.widgetProps&&this.widgetProps.href){var url=this.widgetProps.href;if(url&&url!=""){return this._openLink(url,_198);}}if(this.widgetProps&&this.widgetProps.flowEvent&&this.widgetProps.flowEvent!=""){var form=this.grid._getParentForm();if(!form){console.error("can't find form to submit");return;}var pd=dojo.fromJson(this.grid.bttParam4Link);pd["dse_nextEventName"]=this.widgetProps.flowEvent;if(this.widgetProps.dataNameForRow){pd[this.widgetProps.dataNameForRow]=e.rowIndex;}if(this.widgetProps.dataNameForColumn){pd[this.widgetProps.dataNameForColumn]=this.field;}form.bttParams=dojo.toJson(pd);form.submit();return;}console.error("find nothing, something is wrong!");},_openLink:function(url,_199){var _19a=[];for(var key in _199){if(_199[key]!=null){_19a.push(key);_19a.push("=");_19a.push(_199[key]);_19a.push("&");}}if(this.widgetProps.dataNameForRow){_19a.push(this.widgetProps.dataNameForRow+"="+this.index);_19a.push("&");}if(this.widgetProps.dataNameForColumn){_19a.push(this.widgetProps.dataNameForColumn+"="+this.field);_19a.push("&");}_19a.pop();if(url.toString().indexOf("?")>0){url+="&"+_19a.join("");}else{url+="?"+_19a.join("");}var _19b;if(this.widgetProps&&this.widgetProps.target){_19b=this.widgetProps.target;}else{if(this.widgetProps&&this.widgetProps.newWindow){if(this.widgetProps.newWindow.toString()=="true"){_19b="_blank";}}}if(_19b){window.open(url,_19b);}else{window.open(url,"_self");}},onClick:function(e){return true;}});dojo.declare("dojox.btt.grid.cells.Link",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:{"A":true,"IMG":true},formatter:function(_19c,_19d){var atag={"tn":"a","attr":{},ih:""};atag.ih="";var text;if(this.field&&_19c){text=_19c;}else{if(this.widgetProps&&this.widgetProps.linkText){text=this.widgetProps.linkText;}}atag.ih=text?I18nUtil.getI18nString(text):atag.ih;if(this.widgetProps&&this.widgetProps.target){atag.attr.target=this.widgetProps.target;}else{if(this.widgetProps&&this.widgetProps.newWindow){if(this.widgetProps.newWindow.toString()=="true"){atag.attr.target="_blank";}}}var rowd=this.grid.getItem(_19d);if(this.widgetProps){var _19e;if(this.widgetProps.dataNameForTooltip){_19e=this.grid.store.getValue(rowd,this.widgetProps.dataNameForTooltip);}if(!_19e){_19e=this.widgetProps.tooltip;}if(_19e){atag.attr.title=I18nUtil.getI18nString(_19e);}}atag.attr.href="#";var _19f=false;if(this.widgetProps){if((!this.widgetProps.dataNameForClickable||this.grid.store.getValue(rowd,this.widgetProps.dataNameForClickable))&&((this.widgetProps.dataNameForLink&&this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink))||this.widgetProps.flowEvent)){_19f=true;}}if(this.widgetProps.renderMode=="image"){var _1a0=_19e?"title=\""+_19e+"\"":"";var _1a1=_19c?"src=\""+_19c+"\"":"";return "<img "+_1a1+(_19f?"":" style = \"filter:Alpha(opacity=10);-moz-opacity:.1;opacity:0.1;\" ")+_1a0+" />";}else{if(_19f){atag.tn="a";}else{atag.tn="span";}var os="<"+atag.tn+" ";for(var key in atag.attr){os+=key+"=\""+atag.attr[key]+"\" ";}os+=">"+atag.ih+"</"+atag.tn+">";return os;}}});dojo.declare("dojox.btt.grid.cells.Button",[dojox.btt.grid.cells.BaseCellWidget,dojox.btt.grid.cells._LinkMixin],{_tagartTagName:"SPAN",_tagartTagName:{"SPAN":true},formatter:function(_1a2,_1a3){var text;if(this.field&&_1a2){text=_1a2;}else{if(this.widgetProps&&this.widgetProps.linkText){text=this.widgetProps.linkText;}}text=text?I18nUtil.getI18nString(text):atag.ih;var rowd=this.grid.getItem(_1a3);var _1a4;if(this.widgetProps){var _1a4;if(this.widgetProps.dataNameForTooltip){_1a4=this.grid.store.getValue(rowd,this.widgetProps.dataNameForTooltip);}if(!_1a4){_1a4=this.widgetProps.tooltip;}if(_1a4){_1a4=I18nUtil.getI18nString(_1a4);}}var _1a5=false;if(this.widgetProps){if((!this.widgetProps.dataNameForClickable||this.grid.store.getValue(rowd,this.widgetProps.dataNameForClickable))&&((this.widgetProps.dataNameForLink&&this.grid.store.getValue(rowd,this.widgetProps.dataNameForLink))||this.widgetProps.flowEvent)){_1a5=true;}}var _1a6=_1a4?"title=\""+_1a4+"\"":"";var _1a7=_1a5?"":" dijitButtonDisabled dijitDisabled ";return "<span class=\"dijit dijitReset dijitInline dijitButton"+_1a7+"\""+_1a6+" ><span class=\"dijitReset dijitInline dijitButtonNode\">"+"<div style=\"background: none repeat scroll 0% 0% transparent; -moz-user-select: none;\" class=\"dijitReset dijitStretch dijitButtonContents\">"+"<span class=\"dijitReset dijitInline dijitButtonText\">"+text+"</span></div></span></span>";}});}if(!dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]){dojo._hasResource["com.ibm.btt.dijit.QueryReadStore"]=true;dojo.provide("com.ibm.btt.dijit.QueryReadStore");dojo.declare("com.ibm.btt.dijit.QueryReadStore",dojox.data.QueryReadStore,{bttParams:{},_fetchItems:function(_1a8,_1a9,_1aa){var _1ab=_1a8.serverQuery||_1a8.query||{};if(!this.doClientPaging){_1ab.start=(_1a8.start||0).toString();if(_1a8.count){_1ab.count=_1a8.count.toString();}}if(!this.doClientSorting&&_1a8.sort){var _1ac=[];dojo.forEach(_1a8.sort,function(sort){if(sort&&sort.attribute){_1ac.push((sort.descending?"-":"")+sort.attribute);}});_1ab.sort=_1ac.join(",");}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(_1ab)==dojo.toJson(this._lastServerQuery)){this._numRows=(this._numRows===-1)?this._items.length:this._numRows;_1a9(this._items,_1a8,this._numRows);}else{var _1ad=dojo.xhrPost;dojo.safeMixin(_1ab,this.bttParams);var _1ae=_1ad({url:this.url,handleAs:"text",postData:dojo.toJson(_1ab),failOk:true});_1a8.abort=function(){_1ae.cancel();};_1ae.addCallback(dojo.hitch(this,function(_1af){try{data=dojo.fromJson(_1af||null);this._xhrFetchHandler(data,_1a8,_1a9,_1aa);}catch(err){console.error(err);}}));_1ae.addErrback(function(_1b0){_1aa(_1b0,_1a8);});this.lastRequestHash=new Date().getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},_1ab);}}});}if(!dojo._hasResource["dojox.grid.enhanced.plugins.AutoScroll"]){dojo._hasResource["dojox.grid.enhanced.plugins.AutoScroll"]=true;dojo.provide("dojox.grid.enhanced.plugins.AutoScroll");dojo.declare("dojox.grid.enhanced.plugins.AutoScroll",dojox.grid.enhanced._Plugin,{name:"autoScroll",autoScrollInterval:1000,autoScrollMargin:30,constructor:function(grid,args){this.grid=grid;this.readyForAutoScroll=false;this._scrolling=false;args=dojo.isObject(args)?args:{};if("interval" in args){this.autoScrollInterval=args.interval;}if("margin" in args){this.autoScrollMargin=args.margin;}this._initEvents();this._mixinGrid();},_initEvents:function(){var g=this.grid;this.connect(g,"onCellMouseDown",function(){this.readyForAutoScroll=true;});this.connect(g,"onHeaderCellMouseDown",function(){this.readyForAutoScroll=true;});this.connect(g,"onRowSelectorMouseDown",function(){this.readyForAutoScroll=true;});this.connect(dojo.doc,"onmouseup",function(evt){this._manageAutoScroll(true);this.readyForAutoScroll=false;});this.connect(dojo.doc,"onmousemove",function(evt){if(this.readyForAutoScroll){this._event=evt;var _1b1=dojo.position(g.domNode),hh=g._getHeaderHeight(),_1b2=this.autoScrollMargin,ey=evt.clientY,ex=evt.clientX,gy=_1b1.y,gx=_1b1.x,gh=_1b1.h,gw=_1b1.w;if(ex>=gx&&ex<=gx+gw){if(ey>=gy+hh&&ey<gy+hh+_1b2){this._manageAutoScroll(false,true,false);return;}else{if(ey>gy+gh-_1b2&&ey<=gy+gh){this._manageAutoScroll(false,true,true);return;}else{if(ey>=gy&&ey<=gy+gh){var _1b3=dojo.some(g.views.views,function(view,i){if(view instanceof dojox.grid._RowSelector){return false;}var _1b4=dojo.position(view.domNode);if(ex<_1b4.x+_1b2&&ex>=_1b4.x){this._manageAutoScroll(false,false,false,view);return true;}else{if(ex>_1b4.x+_1b4.w-_1b2&&ex<_1b4.x+_1b4.w){this._manageAutoScroll(false,false,true,view);return true;}}return false;},this);if(_1b3){return;}}}}}this._manageAutoScroll(true);}});},_mixinGrid:function(){var g=this.grid;g.onStartAutoScroll=function(){};g.onEndAutoScroll=function(){};},_fireEvent:function(_1b5,args){var g=this.grid;switch(_1b5){case "start":g.onStartAutoScroll.apply(g,args);break;case "end":g.onEndAutoScroll.apply(g,args);break;}},_manageAutoScroll:function(_1b6,_1b7,_1b8,view){if(_1b6){this._scrolling=false;clearInterval(this._handler);}else{if(!this._scrolling){this._scrolling=true;this._fireEvent("start",[_1b7,_1b8,view]);this._autoScroll(_1b7,_1b8,view);this._handler=setInterval(dojo.hitch(this,"_autoScroll",_1b7,_1b8,view),this.autoScrollInterval);}}},_autoScroll:function(_1b9,_1ba,view){var g=this.grid,_1bb=null;if(_1b9){var _1bc=g.scroller.firstVisibleRow+(_1ba?1:-1);if(_1bc>=0&&_1bc<g.rowCount){g.scrollToRow(_1bc);_1bb=_1bc;}}else{_1bb=this._scrollColumn(_1ba,view);}if(_1bb!==null){this._fireEvent("end",[_1b9,_1ba,view,_1bb,this._event]);}},_scrollColumn:function(_1bd,view){var node=view.scrollboxNode,_1be=null;if(node.clientWidth<node.scrollWidth){var _1bf=dojo.filter(this.grid.layout.cells,function(cell){return !cell.hidden;});var _1c0=dojo.position(view.domNode);var _1c1,edge,_1c2,i;if(_1bd){_1c1=node.clientWidth;for(i=0;i<_1bf.length;++i){_1c2=dojo.position(_1bf[i].getHeaderNode());edge=_1c2.x-_1c0.x+_1c2.w;if(edge>_1c1){_1be=_1bf[i].index;node.scrollLeft+=edge-_1c1+10;break;}}}else{_1c1=0;for(i=_1bf.length-1;i>=0;--i){_1c2=dojo.position(_1bf[i].getHeaderNode());edge=_1c2.x-_1c0.x;if(edge<_1c1){_1be=_1bf[i].index;node.scrollLeft+=edge-_1c1-10;break;}}}}return _1be;}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.AutoScroll);}if(!dojo._hasResource["dojox.grid.enhanced.plugins.Selector"]){dojo._hasResource["dojox.grid.enhanced.plugins.Selector"]=true;dojo.provide("dojox.grid.enhanced.plugins.Selector");(function(){var _1c3=0,_1c4=1,_1c5=2,_1c6={col:"row",row:"col"},_1c7=function(type,_1c8,_1c9,end,_1ca){if(type!=="cell"){_1c8=_1c8[type];_1c9=_1c9[type];end=end[type];if(typeof _1c8!=="number"||typeof _1c9!=="number"||typeof end!=="number"){return false;}return _1ca?((_1c8>=_1c9&&_1c8<end)||(_1c8>end&&_1c8<=_1c9)):((_1c8>=_1c9&&_1c8<=end)||(_1c8>=end&&_1c8<=_1c9));}else{return _1c7("col",_1c8,_1c9,end,_1ca)&&_1c7("row",_1c8,_1c9,end,_1ca);}},_1cb=function(type,v1,v2){try{if(v1&&v2){switch(type){case "col":case "row":return v1[type]==v2[type]&&typeof v1[type]=="number"&&!(_1c6[type] in v1)&&!(_1c6[type] in v2);case "cell":return v1.col==v2.col&&v1.row==v2.row&&typeof v1.col=="number"&&typeof v1.row=="number";}}}catch(e){}return false;},_1cc=function(evt){try{if(evt&&evt.preventDefault){dojo.stopEvent(evt);}}catch(e){}},_1cd=function(type,_1ce,_1cf){switch(type){case "col":return {"col":typeof _1cf=="undefined"?_1ce:_1cf,"except":[]};case "row":return {"row":_1ce,"except":[]};case "cell":return {"row":_1ce,"col":_1cf};}return null;};dojo.declare("dojox.grid.enhanced.plugins.Selector",dojox.grid.enhanced._Plugin,{name:"selector",constructor:function(grid,args){this.grid=grid;this._config={row:_1c5,col:_1c5,cell:_1c5};this.setupConfig(args);if(grid.selectionMode==="single"){this._config.row=_1c4;}this._enabled=true;this._selecting={};this._selected={"col":[],"row":[],"cell":[]};this._startPoint={};this._currentPoint={};this._lastAnchorPoint={};this._lastEndPoint={};this._lastSelectedAnchorPoint={};this._lastSelectedEndPoint={};this._keyboardSelect={};this._lastType=null;this._selectedRowModified={};this._hacks();this._initEvents();this._initAreas();this._mixinGrid();},destroy:function(){this.inherited(arguments);},setupConfig:function(_1d0){if(!_1d0||!dojo.isObject(_1d0)){return;}var _1d1=["row","col","cell"];for(var type in _1d0){if(dojo.indexOf(_1d1,type)>=0){if(!_1d0[type]||_1d0[type]=="disabled"){this._config[type]=_1c3;}else{if(_1d0[type]=="single"){this._config[type]=_1c4;}else{this._config[type]=_1c5;}}}}var mode=["none","single","extended"][this._config.row];this.grid.selection.setMode(mode);},isSelected:function(type,_1d2,_1d3){return this._isSelected(type,_1cd(type,_1d2,_1d3));},toggleSelect:function(type,_1d4,_1d5){this._startSelect(type,_1cd(type,_1d4,_1d5),this._config[type]===_1c5,false);this._endSelect(type);},select:function(type,_1d6,_1d7){if(!this.isSelected(type,_1d6,_1d7)){this.toggleSelect(type,_1d6,_1d7);}},deselect:function(type,_1d8,_1d9){if(this.isSelected(type,_1d8,_1d9)){this.toggleSelect(type,_1d8,_1d9);}},selectRange:function(type,_1da,end,_1db){this.grid._selectingRange=true;var _1dc=type=="cell"?_1cd(type,_1da.row,_1da.col):_1cd(type,_1da),_1dd=type=="cell"?_1cd(type,end.row,end.col):_1cd(type,end);this._startSelect(type,_1dc,false,false,false,_1db);this._highlight(type,_1dd,_1db===undefined?true:_1db);this._endSelect(type);this.grid._selectingRange=false;},clear:function(type){this._clearSelection(type||"all");},isSelecting:function(type){if(typeof type=="undefined"){return this._selecting.col||this._selecting.row||this._selecting.cell;}return this._selecting[type];},selectEnabled:function(_1de){if(typeof _1de!="undefined"&&!this.isSelecting()){this._enabled=!!_1de;}return this._enabled;},getSelected:function(type,_1df){switch(type){case "cell":return dojo.map(this._selected[type],function(item){return item;});case "col":case "row":return dojo.map(_1df?this._selected[type]:dojo.filter(this._selected[type],function(item){return item.except.length===0;}),function(item){return _1df?item:item[type];});}return [];},getSelectedCount:function(type,_1e0){switch(type){case "cell":return this._selected[type].length;case "col":case "row":return (_1e0?this._selected[type]:dojo.filter(this._selected[type],function(item){return item.except.length===0;})).length;}return 0;},getSelectedType:function(){var s=this._selected;return ["","cell","row","row|cell","col","col|cell","col|row","col|row|cell"][(!!s.cell.length)|(!!s.row.length<<1)|(!!s.col.length<<2)];},getLastSelectedRange:function(type){return this._lastAnchorPoint[type]?{"start":this._lastAnchorPoint[type],"end":this._lastEndPoint[type]}:null;},_hacks:function(){var g=this.grid;var _1e1=function(e){if(e.cellNode){g.onMouseUp(e);}g.onMouseUpRow(e);};var _1e2=dojo.hitch(g,"onMouseUp");var _1e3=dojo.hitch(g,"onMouseDown");var _1e4=function(e){e.cellNode.style.border="solid 1px";};dojo.forEach(g.views.views,function(view){view.content.domouseup=_1e1;view.header.domouseup=_1e2;if(view.declaredClass=="dojox.grid._RowSelector"){view.domousedown=_1e3;view.domouseup=_1e2;view.dofocus=_1e4;}});g.selection.clickSelect=function(){};this._oldDeselectAll=g.selection.deselectAll;var _1e5=this;g.selection.selectRange=function(from,to){_1e5.selectRange("row",from,to,true);if(g.selection.preserver){g.selection.preserver._updateMapping(true,true,false,from,to);}g.selection.onChanged();};g.selection.deselectRange=function(from,to){_1e5.selectRange("row",from,to,false);if(g.selection.preserver){g.selection.preserver._updateMapping(true,false,false,from,to);}g.selection.onChanged();};g.selection.deselectAll=function(){g._selectingRange=true;_1e5._oldDeselectAll.apply(g.selection,arguments);_1e5._clearSelection("row");g._selectingRange=false;if(g.selection.preserver){g.selection.preserver._updateMapping(true,false,true);}g.selection.onChanged();};var _1e6=g.views.views[0];if(_1e6 instanceof dojox.grid._RowSelector){_1e6.doStyleRowNode=function(_1e7,_1e8){dojo.removeClass(_1e8,"dojoxGridRow");dojo.addClass(_1e8,"dojoxGridRowbar");dojo.addClass(_1e8,"dojoxGridNonNormalizedCell");dojo.toggleClass(_1e8,"dojoxGridRowbarOver",g.rows.isOver(_1e7));dojo.toggleClass(_1e8,"dojoxGridRowbarSelected",!!g.selection.isSelected(_1e7));};}this.connect(g,"updateRow",function(_1e9){dojo.forEach(g.layout.cells,function(cell){if(this.isSelected("cell",_1e9,cell.index)){this._highlightNode(cell.getNode(_1e9),true);}},this);});},_mixinGrid:function(){var g=this.grid;g.setupSelectorConfig=dojo.hitch(this,this.setupConfig);g.onStartSelect=function(){};g.onEndSelect=function(){};g.onStartDeselect=function(){};g.onEndDeselect=function(){};g.onSelectCleared=function(){};},_initEvents:function(){var g=this.grid,_1ea=this,dp=dojo.partial,_1eb=function(type,e){if(type==="row"){_1ea._isUsingRowSelector=true;}if(_1ea.selectEnabled()&&_1ea._config[type]&&e.button!=2){if(_1ea._keyboardSelect.col||_1ea._keyboardSelect.row||_1ea._keyboardSelect.cell){_1ea._endSelect("all");_1ea._keyboardSelect.col=_1ea._keyboardSelect.row=_1ea._keyboardSelect.cell=0;}if(_1ea._usingKeyboard){_1ea._usingKeyboard=false;}var _1ec=_1cd(type,e.rowIndex,e.cell&&e.cell.index);_1ea._startSelect(type,_1ec,e.ctrlKey,e.shiftKey);}},_1ed=dojo.hitch(this,"_endSelect");this.connect(g,"onHeaderCellMouseDown",dp(_1eb,"col"));this.connect(g,"onHeaderCellMouseUp",dp(_1ed,"col"));this.connect(g,"onRowSelectorMouseDown",dp(_1eb,"row"));this.connect(g,"onRowSelectorMouseUp",dp(_1ed,"row"));this.connect(g,"onCellMouseDown",function(e){if(e.cell&&e.cell.isRowSelector){return;}if(g.singleClickEdit){_1ea._singleClickEdit=true;g.singleClickEdit=false;}_1eb(_1ea._config["cell"]==_1c3?"row":"cell",e);});this.connect(g,"onCellMouseUp",function(e){if(_1ea._singleClickEdit){delete _1ea._singleClickEdit;g.singleClickEdit=true;}_1ed("all",e);});this.connect(g,"onCellMouseOver",function(e){if(_1ea._curType!="row"&&_1ea._selecting[_1ea._curType]&&_1ea._config[_1ea._curType]==_1c5){_1ea._highlight("col",_1cd("col",e.cell.index),_1ea._toSelect);if(!_1ea._keyboardSelect.cell){_1ea._highlight("cell",_1cd("cell",e.rowIndex,e.cell.index),_1ea._toSelect);}}});this.connect(g,"onHeaderCellMouseOver",function(e){if(_1ea._selecting.col&&_1ea._config.col==_1c5){_1ea._highlight("col",_1cd("col",e.cell.index),_1ea._toSelect);}});this.connect(g,"onRowMouseOver",function(e){if(_1ea._selecting.row&&_1ea._config.row==_1c5){_1ea._highlight("row",_1cd("row",e.rowIndex),_1ea._toSelect);}});this.connect(g,"onSelectedById","_onSelectedById");this.connect(g,"_onFetchComplete",function(){if(!g._notRefreshSelection){this._refreshSelected(true);}});this.connect(g.scroller,"buildPage",function(){if(!g._notRefreshSelection){this._refreshSelected(true);}});this.connect(dojo.doc,"onmouseup",dp(_1ed,"all"));this.connect(g,"onEndAutoScroll",function(_1ee,_1ef,view,_1f0){var _1f1=_1ea._selecting.cell,type,_1f2,dir=_1ef?1:-1;if(_1ee&&(_1f1||_1ea._selecting.row)){type=_1f1?"cell":"row";_1f2=_1ea._currentPoint[type];_1ea._highlight(type,_1cd(type,_1f2.row+dir,_1f2.col),_1ea._toSelect);}else{if(!_1ee&&(_1f1||_1ea._selecting.col)){type=_1f1?"cell":"col";_1f2=_1ea._currentPoint[type];_1ea._highlight(type,_1cd(type,_1f2.row,_1f0),_1ea._toSelect);}}});this.subscribe("dojox/grid/rearrange/move/"+g.id,"_onInternalRearrange");this.subscribe("dojox/grid/rearrange/copy/"+g.id,"_onInternalRearrange");this.subscribe("dojox/grid/rearrange/change/"+g.id,"_onExternalChange");this.subscribe("dojox/grid/rearrange/insert/"+g.id,"_onExternalChange");this.subscribe("dojox/grid/rearrange/remove/"+g.id,"clear");this.connect(g,"onSelected",function(_1f3){if(this._selectedRowModified&&this._isUsingRowSelector){delete this._selectedRowModified;}else{if(!this.grid._selectingRange){this.select("row",_1f3);}}});this.connect(g,"onDeselected",function(_1f4){if(this._selectedRowModified&&this._isUsingRowSelector){delete this._selectedRowModified;}else{if(!this.grid._selectingRange){this.deselect("row",_1f4);}}});},_onSelectedById:function(id,_1f5,_1f6){if(this.grid._noInternalMapping){return;}var _1f7=[this._lastAnchorPoint.row,this._lastEndPoint.row,this._lastSelectedAnchorPoint.row,this._lastSelectedEndPoint.row];_1f7=_1f7.concat(this._selected.row);var _1f8=false;dojo.forEach(_1f7,function(item){if(item){if(item.id===id){_1f8=true;item.row=_1f5;}else{if(item.row===_1f5&&item.id){item.row=-1;}}}});if(!_1f8&&_1f6){dojo.some(this._selected.row,function(item){if(item&&!item.id&&!item.except.length){item.id=id;item.row=_1f5;return true;}return false;});}_1f8=false;_1f7=[this._lastAnchorPoint.cell,this._lastEndPoint.cell,this._lastSelectedAnchorPoint.cell,this._lastSelectedEndPoint.cell];_1f7=_1f7.concat(this._selected.cell);dojo.forEach(_1f7,function(item){if(item){if(item.id===id){_1f8=true;item.row=_1f5;}else{if(item.row===_1f5&&item.id){item.row=-1;}}}});},onSetStore:function(){this._clearSelection("all");},_onInternalRearrange:function(type,_1f9){try{this._refresh("col",false);dojo.forEach(this._selected.row,function(item){dojo.forEach(this.grid.layout.cells,function(cell){this._highlightNode(cell.getNode(item.row),false);},this);},this);dojo.query(".dojoxGridRowSelectorSelected").forEach(function(node){dojo.removeClass(node,"dojoxGridRowSelectorSelected");dojo.removeClass(node,"dojoxGridRowSelectorSelectedUp");dojo.removeClass(node,"dojoxGridRowSelectorSelectedDown");});var _1fa=function(item){if(item){delete item.converted;}},_1fb=[this._lastAnchorPoint[type],this._lastEndPoint[type],this._lastSelectedAnchorPoint[type],this._lastSelectedEndPoint[type]];if(type==="cell"){this.selectRange("cell",_1f9.to.min,_1f9.to.max);var _1fc=this.grid.layout.cells;dojo.forEach(_1fb,function(item){if(item.converted){return;}for(var r=_1f9.from.min.row,tr=_1f9.to.min.row;r<=_1f9.from.max.row;++r,++tr){for(var c=_1f9.from.min.col,tc=_1f9.to.min.col;c<=_1f9.from.max.col;++c,++tc){while(_1fc[c].hidden){++c;}while(_1fc[tc].hidden){++tc;}if(item.row==r&&item.col==c){item.row=tr;item.col=tc;item.converted=true;return;}}}});}else{_1fb=this._selected.cell.concat(this._selected[type]).concat(_1fb).concat([this._lastAnchorPoint.cell,this._lastEndPoint.cell,this._lastSelectedAnchorPoint.cell,this._lastSelectedEndPoint.cell]);dojo.forEach(_1fb,function(item){if(item&&!item.converted){var from=item[type];if(from in _1f9){item[type]=_1f9[from];}item.converted=true;}});dojo.forEach(this._selected[_1c6[type]],function(item){for(var i=0,len=item.except.length;i<len;++i){var from=item.except[i];if(from in _1f9){item.except[i]=_1f9[from];}}});}dojo.forEach(_1fb,_1fa);this._refreshSelected(true);this._focusPoint(type,this._lastEndPoint);}catch(e){console.warn("Selector._onInternalRearrange() error",e);}},_onExternalChange:function(type,_1fd){var _1fe=type=="cell"?_1fd.min:_1fd[0],end=type=="cell"?_1fd.max:_1fd[_1fd.length-1];this.selectRange(type,_1fe,end);},_refresh:function(type,_1ff){if(!this._keyboardSelect[type]){dojo.forEach(this._selected[type],function(item){this._highlightSingle(type,_1ff,item,undefined,true);},this);}},_refreshSelected:function(){this._refresh("col",true);this._refresh("row",true);this._refresh("cell",true);},_initAreas:function(){var g=this.grid,f=g.focus,_200=this,dk=dojo.keys,_201=1,_202=2,_203=function(type,_204,_205,_206,evt){var ks=_200._keyboardSelect;if(evt.shiftKey&&ks[type]){if(ks[type]===_201){if(type==="cell"){var item=_200._lastEndPoint[type];if(f.cell!=g.layout.cells[item.col+_206]||f.rowIndex!=item.row+_205){ks[type]=0;return;}}_200._startSelect(type,_200._lastAnchorPoint[type],true,false,true);_200._highlight(type,_200._lastEndPoint[type],_200._toSelect);ks[type]=_202;}var _207=_204(type,_205,_206,evt);if(_200._isValid(type,_207,g)){_200._highlight(type,_207,_200._toSelect);}_1cc(evt);}},_208=function(type,_209,evt,_20a){if(_20a&&_200.selectEnabled()&&_200._config[type]!=_1c3){switch(evt.keyCode){case dk.SPACE:_200._startSelect(type,_209(),evt.ctrlKey,evt.shiftKey);_200._endSelect(type);break;case dk.SHIFT:if(_200._config[type]==_1c5&&_200._isValid(type,_200._lastAnchorPoint[type],g)){_200._endSelect(type);_200._keyboardSelect[type]=_201;_200._usingKeyboard=true;}}}},_20b=function(type,evt,_20c){if(_20c&&evt.keyCode==dojo.keys.SHIFT&&_200._keyboardSelect[type]){_200._endSelect(type);_200._keyboardSelect[type]=0;}};if(g.views.views[0] instanceof dojox.grid._RowSelector){this._lastFocusedRowBarIdx=0;f.addArea({name:"rowHeader",onFocus:function(evt,step){var view=g.views.views[0];if(view instanceof dojox.grid._RowSelector){var _20d=view.getCellNode(_200._lastFocusedRowBarIdx,0);if(_20d){dojo.toggleClass(_20d,f.focusClass,false);}if(evt&&"rowIndex" in evt){if(evt.rowIndex>=0){_200._lastFocusedRowBarIdx=evt.rowIndex;}else{if(!_200._lastFocusedRowBarIdx){_200._lastFocusedRowBarIdx=0;}}}_20d=view.getCellNode(_200._lastFocusedRowBarIdx,0);if(_20d){dijit.focus(_20d);dojo.toggleClass(_20d,f.focusClass,true);}f.rowIndex=_200._lastFocusedRowBarIdx;_1cc(evt);return true;}return false;},onBlur:function(evt,step){var view=g.views.views[0];if(view instanceof dojox.grid._RowSelector){var _20e=view.getCellNode(_200._lastFocusedRowBarIdx,0);dojo.toggleClass(_20e,f.focusClass,false);_1cc(evt);}return true;},onMove:function(_20f,_210,evt){var view=g.views.views[0];if(_20f&&view instanceof dojox.grid._RowSelector){var next=_200._lastFocusedRowBarIdx+_20f;if(next>=0&&next<g.rowCount){_1cc(evt);var _211=view.getCellNode(_200._lastFocusedRowBarIdx,0);dojo.toggleClass(_211,f.focusClass,false);var sc=g.scroller;var _212=sc.getLastPageRow(sc.page);var rc=g.rowCount-1,row=Math.min(rc,next);if(next>_212){g.setScrollTop(g.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(_200._lastFocusedRowBarIdx));}_211=view.getCellNode(next,0);dijit.focus(_211);dojo.toggleClass(_211,f.focusClass,true);_200._lastFocusedRowBarIdx=next;f.cell=_211;f.cell.view=view;f.cell.getNode=function(_213){return f.cell;};f.rowIndex=_200._lastFocusedRowBarIdx;f.scrollIntoView();f.cell=null;}}}});f.placeArea("rowHeader","before","content");}f.addArea({name:"cellselect",onMove:dojo.partial(_203,"cell",function(type,_214,_215,evt){var _216=_200._currentPoint[type];return _1cd("cell",_216.row+_214,_216.col+_215);}),onKeyDown:dojo.partial(_208,"cell",function(){return _1cd("cell",f.rowIndex,f.cell.index);}),onKeyUp:dojo.partial(_20b,"cell")});f.placeArea("cellselect","below","content");f.addArea({name:"colselect",onMove:dojo.partial(_203,"col",function(type,_217,_218,evt){var _219=_200._currentPoint[type];return _1cd("col",_219.col+_218);}),onKeyDown:dojo.partial(_208,"col",function(){return _1cd("col",f.getHeaderIndex());}),onKeyUp:dojo.partial(_20b,"col")});f.placeArea("colselect","below","header");f.addArea({name:"rowselect",onMove:dojo.partial(_203,"row",function(type,_21a,_21b,evt){return _1cd("row",f.rowIndex);}),onKeyDown:dojo.partial(_208,"row",function(){return _1cd("row",f.rowIndex);}),onKeyUp:dojo.partial(_20b,"row")});f.placeArea("rowselect","below","rowHeader");},_clearSelection:function(type,_21c){if(type=="all"){this._clearSelection("cell",_21c);this._clearSelection("col",_21c);this._clearSelection("row",_21c);return;}this._isUsingRowSelector=true;dojo.forEach(this._selected[type],function(item){if(!_1cb(type,_21c,item)){this._highlightSingle(type,false,item);}},this);this._blurPoint(type,this._currentPoint);this._selecting[type]=false;this._startPoint[type]=this._currentPoint[type]=null;this._selected[type]=[];if(type=="row"&&!this.grid._selectingRange){this._oldDeselectAll.call(this.grid.selection);this.grid.selection._selectedById={};}this.grid.onEndDeselect(type,null,null,this._selected);this.grid.onSelectCleared(type);},_startSelect:function(type,_21d,_21e,_21f,_220,_221){if(!this._isValid(type,_21d)){return;}var _222=this._isSelected(type,this._lastEndPoint[type]),_223=this._isSelected(type,_21d);this._toSelect=_220?_223:!_223;if(!_21e||(!_223&&this._config[type]==_1c4)){this._clearSelection("all",_21d);this._toSelect=_221===undefined?true:_221;}this._selecting[type]=true;this._currentPoint[type]=null;if(_21f&&this._lastType==type&&_222==this._toSelect){if(type==="row"){this._isUsingRowSelector=true;}this._startPoint[type]=this._lastAnchorPoint[type];this._highlight(type,this._startPoint[type]);this._isUsingRowSelector=false;}else{this._startPoint[type]=_21d;}this._curType=type;this._fireEvent("start",type);this._isStartFocus=true;this._isUsingRowSelector=true;this._highlight(type,_21d,this._toSelect);this._isStartFocus=false;},_endSelect:function(type){if(type==="row"){delete this._isUsingRowSelector;}if(type=="all"){this._endSelect("col");this._endSelect("row");this._endSelect("cell");}else{if(this._selecting[type]){this._addToSelected(type);this._lastAnchorPoint[type]=this._startPoint[type];this._lastEndPoint[type]=this._currentPoint[type];if(this._toSelect){this._lastSelectedAnchorPoint[type]=this._lastAnchorPoint[type];this._lastSelectedEndPoint[type]=this._lastEndPoint[type];}this._startPoint[type]=this._currentPoint[type]=null;this._selecting[type]=false;this._lastType=type;this._fireEvent("end",type);}}},_fireEvent:function(_224,type){switch(_224){case "start":this.grid[this._toSelect?"onStartSelect":"onStartDeselect"](type,this._startPoint[type],this._selected);break;case "end":this.grid[this._toSelect?"onEndSelect":"onEndDeselect"](type,this._lastAnchorPoint[type],this._lastEndPoint[type],this._selected);break;}},_calcToHighlight:function(type,_225,_226,_227){if(_227!==undefined){var sltd;if(this._usingKeyboard&&!_226){var last=this._isInLastRange(this._lastType,_225);if(last){sltd=this._isSelected(type,_225);if(_227&&sltd){return false;}if(!_227&&!sltd&&this._isInLastRange(this._lastType,_225,true)){return true;}}}return _226?_227:(sltd||this._isSelected(type,_225));}return _226;},_highlightNode:function(node,_228){if(node){var _229="dojoxGridRowSelected";var _22a="dojoxGridCellSelected";dojo.toggleClass(node,_229,_228);dojo.toggleClass(node,_22a,_228);}},_highlightHeader:function(_22b,_22c){var _22d=this.grid.layout.cells;var node=_22d[_22b].getHeaderNode();var _22e="dojoxGridHeaderSelected";dojo.toggleClass(node,_22e,_22c);},_highlightRowSelector:function(_22f,_230){var _231=this.grid.views.views[0];if(_231 instanceof dojox.grid._RowSelector){var node=_231.getRowNode(_22f);if(node){var _232="dojoxGridRowSelectorSelected";dojo.toggleClass(node,_232,_230);}}},_highlightSingle:function(type,_233,_234,_235,_236){var _237=this,toHL,g=_237.grid,_238=g.layout.cells;switch(type){case "cell":toHL=this._calcToHighlight(type,_234,_233,_235);var c=_238[_234.col];if(!c.hidden&&!c.notselectable){this._highlightNode(_234.node||c.getNode(_234.row),toHL);}break;case "col":toHL=this._calcToHighlight(type,_234,_233,_235);this._highlightHeader(_234.col,toHL);dojo.query("td[idx='"+_234.col+"']",g.domNode).forEach(function(_239){var _23a=_238[_234.col].view.content.findRowTarget(_239);if(_23a){var _23b=_23a[dojox.grid.util.rowIndexTag];_237._highlightSingle("cell",toHL,{"row":_23b,"col":_234.col,"node":_239});}});break;case "row":toHL=this._calcToHighlight(type,_234,_233,_235);this._highlightRowSelector(_234.row,toHL);dojo.forEach(_238,function(cell){_237._highlightSingle("cell",toHL,{"row":_234.row,"col":cell.index,"node":cell.getNode(_234.row)});});this._selectedRowModified=true;if(!_236){g.selection.setSelected(_234.row,toHL);}}},_highlight:function(type,_23c,_23d){if(this._selecting[type]&&_23c!==null){var _23e=this._startPoint[type],_23f=this._currentPoint[type],_240=this,_241=function(from,to,toHL){_240._forEach(type,from,to,function(item){_240._highlightSingle(type,toHL,item,_23d);},true);};switch(type){case "col":case "row":if(_23f!==null){if(_1c7(type,_23c,_23e,_23f,true)){_241(_23f,_23c,false);}else{if(_1c7(type,_23e,_23c,_23f,true)){_241(_23f,_23e,false);_23f=_23e;}_241(_23c,_23f,true);}}else{this._highlightSingle(type,true,_23c,_23d);}break;case "cell":if(_23f!==null){if(_1c7("row",_23c,_23e,_23f,true)||_1c7("col",_23c,_23e,_23f,true)||_1c7("row",_23e,_23c,_23f,true)||_1c7("col",_23e,_23c,_23f,true)){_241(_23e,_23f,false);}}_241(_23e,_23c,true);}this._currentPoint[type]=_23c;this._focusPoint(type,this._currentPoint);}},_focusPoint:function(type,_242){if(!this._isStartFocus){var _243=_242[type],f=this.grid.focus;if(type=="col"){f._colHeadFocusIdx=_243.col;f.focusArea("header");}else{if(type=="row"){f.focusArea("rowHeader",{"rowIndex":_243.row});}else{if(type=="cell"){f.setFocusIndex(_243.row,_243.col);}}}}},_blurPoint:function(type,_244){var f=this.grid.focus;if(type=="col"){f._blurHeader();}else{if(type=="cell"){f._blurContent();}}},_addToSelected:function(type){var _245=this._toSelect,_246=this,_247=[],_248=[],_249=this._startPoint[type],end=this._currentPoint[type];if(this._usingKeyboard){this._forEach(type,this._lastAnchorPoint[type],this._lastEndPoint[type],function(item){if(!_1c7(type,item,_249,end)){(_245?_248:_247).push(item);}});}this._forEach(type,_249,end,function(item){var _24a=_246._isSelected(type,item);if(_245&&!_24a){_247.push(item);}else{if(!_245){_248.push(item);}}});this._add(type,_247);this._remove(type,_248);dojo.forEach(this._selected.row,function(item){if(item.except.length>0){this._selectedRowModified=true;this.grid.selection.setSelected(item.row,false);}},this);},_forEach:function(type,_24b,end,func,_24c){if(!this._isValid(type,_24b,true)||!this._isValid(type,end,true)){return;}switch(type){case "col":case "row":_24b=_24b[type];end=end[type];var dir=end>_24b?1:-1;if(!_24c){end+=dir;}for(;_24b!=end;_24b+=dir){func(_1cd(type,_24b));}break;case "cell":var _24d=end.col>_24b.col?1:-1,_24e=end.row>_24b.row?1:-1;for(var i=_24b.row,p=end.row+_24e;i!=p;i+=_24e){for(var j=_24b.col,q=end.col+_24d;j!=q;j+=_24d){func(_1cd(type,i,j));}}}},_makeupForExceptions:function(type,_24f){var _250=[];dojo.forEach(this._selected[type],function(v1){dojo.forEach(_24f,function(v2){if(v1[type]==v2[type]){var pos=dojo.indexOf(v1.except,v2[_1c6[type]]);if(pos>=0){v1.except.splice(pos,1);}_250.push(v2);}});});return _250;},_makeupForCells:function(type,_251){var _252=[];dojo.forEach(this._selected.cell,function(v1){dojo.some(_251,function(v2){if(v1[type]==v2[type]){_252.push(v1);return true;}return false;});});this._remove("cell",_252);dojo.forEach(this._selected[_1c6[type]],function(v1){dojo.forEach(_251,function(v2){var pos=dojo.indexOf(v1.except,v2[type]);if(pos>=0){v1.except.splice(pos,1);}});});},_addException:function(type,_253){dojo.forEach(this._selected[type],function(v1){dojo.forEach(_253,function(v2){v1.except.push(v2[_1c6[type]]);});});},_addCellException:function(type,_254){dojo.forEach(this._selected[type],function(v1){dojo.forEach(_254,function(v2){if(v1[type]==v2[type]){v1.except.push(v2[_1c6[type]]);}});});},_add:function(type,_255){var _256=this.grid.layout.cells;if(type=="cell"){var _257=this._makeupForExceptions("col",_255);var _258=this._makeupForExceptions("row",_255);_255=dojo.filter(_255,function(item){return dojo.indexOf(_257,item)<0&&dojo.indexOf(_258,item)<0&&!_256[item.col].hidden&&!_256[item.col].notselectable;});}else{if(type=="col"){_255=dojo.filter(_255,function(item){return !_256[item.col].hidden&&!_256[item.col].notselectable;});}this._makeupForCells(type,_255);this._selected[type]=dojo.filter(this._selected[type],function(v){return dojo.every(_255,function(item){return v[type]!==item[type];});});}if(type!="col"&&this.grid._hasIdentity){dojo.forEach(_255,function(item){var _259=this.grid._by_idx[item.row];if(_259){item.id=_259.idty;}},this);}this._selected[type]=this._selected[type].concat(_255);},_remove:function(type,_25a){var comp=dojo.partial(_1cb,type);this._selected[type]=dojo.filter(this._selected[type],function(v1){return !dojo.some(_25a,function(v2){return comp(v1,v2);});});if(type=="cell"){this._addCellException("col",_25a);this._addCellException("row",_25a);}else{this._addException(_1c6[type],_25a);}},_isCellNotInExcept:function(type,item){var attr=item[type],_25b=item[_1c6[type]];return dojo.some(this._selected[type],function(v){return v[type]==attr&&dojo.indexOf(v.except,_25b)<0;});},_isSelected:function(type,item){if(!item){return false;}var res=dojo.some(this._selected[type],function(v){var ret=_1cb(type,item,v);if(ret&&type!=="cell"){return v.except.length===0;}return ret;});if(!res&&type==="cell"){res=(this._isCellNotInExcept("col",item)||this._isCellNotInExcept("row",item));if(type==="cell"){res=res&&!this.grid.layout.cells[item.col].notselectable;}}return res;},_isInLastRange:function(type,item,_25c){var _25d=this[_25c?"_lastSelectedAnchorPoint":"_lastAnchorPoint"][type],end=this[_25c?"_lastSelectedEndPoint":"_lastEndPoint"][type];if(!item||!_25d||!end){return false;}return _1c7(type,item,_25d,end);},_isValid:function(type,item,_25e){if(!item){return false;}try{var g=this.grid,_25f=item[type];switch(type){case "col":return _25f>=0&&_25f<g.layout.cells.length&&dojo.isArray(item.except)&&(_25e||!g.layout.cells[_25f].notselectable);case "row":return _25f>=0&&_25f<g.rowCount&&dojo.isArray(item.except);case "cell":return item.col>=0&&item.col<g.layout.cells.length&&item.row>=0&&item.row<g.rowCount&&(_25e||!g.layout.cells[item.col].notselectable);}}catch(e){}return false;}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.Selector,{"dependency":["autoScroll"]});})();}if(!dojo._hasResource["com.ibm.btt.dijit.Grid"]){dojo._hasResource["com.ibm.btt.dijit.Grid"]=true;dojo.provide("com.ibm.btt.dijit.Grid");dojo.declare("com.ibm.btt.dijit.Grid",[dojox.grid.EnhancedGrid,com.ibm.btt.dijit.AbstractWidgetMixin],{storeDataName:"",templateString:dojo.cache("com.ibm.btt.dijit","templates/Grid.html","<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\r\n\t\r\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridErroressages\" style=\"display: none;\" dojoAttachPoint=\"errorMessageNode\"></div>\r\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\r\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\r\n\t\r\n</div>\r\n"),name:"",width:"",storeData:"",comparatorMap:"",height:"300",sortEnabled:false,_firstTimeLoaded:true,SELECTION_VALID_STATE:true,selectionMode:"none",selectionRequired:false,selectable:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Grid"),readOnly:false,disabled:false,isActionable:false,bttParams:"",bttParam4Link:"",columnIndex:-1,rowIndex:-1,noDataMessage:"",create:function(){this._eventHandlers=[];this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.selectable){console.debug("grid",this);this._eventHandlers.push(dojo.connect(this,"postrender",this,function(){if(this.pagination){this._eventHandlers.push(dojo.connect(this.pagination.plugin,"gotoPage",this,function(){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}));}}));this._eventHandlers.push(dojo.connect(this,"onSelectionChanged",this,this.checkSelectionNum));}if(this.sortEnabled){this._eventHandlers.push(dojo.connect(this,"onHeaderCellClick",this,function(e){if(dojo.hasClass(e.target,"dojoxGridSortBtnSingle")||dojo.hasClass(e.target,"dojoxGridSortBtnNested")){console.debug("the selection before",this.selection);this.selection.deselectAll();console.debug("the selection after",this.selection);}}));}this._eventHandlers.push(dojo.connect(this,"_onFetchComplete",this,function(){this.checkSelectionNum();}));this._eventHandlers.push(dojo.connect(this,"onKeyDown",this,function(e){this._set("state",this._getState());}));if(this.selectionMode==="single"){this._eventHandlers.push(dojo.connect(this.selection,"addToSelection",this,function(_260){if(this._lastSelectedIndex===_260){this.selection.deselectAll();this._lastSelectedIndex=undefined;}else{this._lastSelectedIndex=_260;}}));}this.errorMessageIcon=dojo.create("div",{"class":"errorMessageIcon","style":"display:none;"},this.viewsHeaderNode,"last");this._eventHandlers.push(dojo.connect(this,"onCellClick",this,this._onCellWidgetClick));this._setComparatorForColunm();this._eventHandlers.push(dojo.connect(this,"onRowDblClick",this,this._onRowDblClick));this._eventHandlers.push(dojo.connect(this,"onRowClick",this,this._onRowClick));this._eventHandlers.push(dojo.connect(document,"onkeydown",this,this._onKeyEvent));this._eventHandlers.push(dojo.connect(document,"onkeyup",this,this._onKeyEvent));this._eventHandlers.push(dojo.connect(this.edit,"setEditCell",this,this._onCellEdit));setTimeout(dojo.hitch(this,"render"),500);if(dojo.isIE&&dojo.isIE<8){var ps=this.plugin("nestedSorting");if(ps){ps._doSort_IE7=ps._doSort;ps._doSort=dojo.hitch(ps,function(_261){this._doSort_IE7(_261);this.grid._render();});}}},_onCellWidgetClick:function(e){if(e.cell._onClick){e.cell._onClick(e);}},_onKeyEvent:function(e){this.inherited(arguments);this._isCtrlPressed=e.ctrlKey;},_onCellEdit:function(_262,_263){for(var i=0;i<this.layout.cells.length;i++){if(this.layout.cells[i]==_262){this.columnIndex=i;break;}}this.rowIndex=_263;this.onCellEdit(this.columnIndex,this.rowIndex);},onCellEdit:function(){},_onRowDblClick:function(e){for(var i=0;i<this.layout.cells.length;i++){if(this.layout.cells[i]==e.cell){this.columnIndex=i;break;}}this.rowIndex=e.rowIndex;if(this.selectionMode==="single"){if(!this.selection.isSelected(e.rowIndex)){this.selection.setSelected(e.rowIndex,true);}}else{if(this.selectionMode==="extended"){if(dojo.isIE<=8&&this._isCtrlPressed){this.selection.toggleSelect(e.rowIndex);}}else{}}if(this.isActionable){if(this.readOnly===true||e.cell.editable===false){var form=this._getParentForm();if(this.bttParams!=""&&form){form.bttParams=this.bttParams;form.submit();}}}},_onRowClick:function(e){for(var i=0;i<this.layout.cells.length;i++){if(this.layout.cells[i]==e.cell){this.columnIndex=i;break;}}this.rowIndex=e.rowIndex;},setCellValueByIndex:function(_264,_265,_266){var cell=this.layout.cells[_264];var _267;if(cell&&cell.field){_267=cell.field;}else{return;}if(this.edit&&this.edit.apply){this.edit.apply();}this.store.fetchItemByIdentity({identity:this._by_idx[_265].idty,onItem:dojo.hitch(this,function(item){var _268=this.store.getValue(item,_267);if(typeof _268=="number"){_266=isNaN(_266)?_266:parseFloat(_266);}else{if(typeof _268=="boolean"){_266=_266=="true"?true:_266=="false"?false:_266;}else{if(_268 instanceof Date){var _269=new Date(_266);_266=isNaN(_269.getTime())?_266:_269;}}}this.store.setValue(item,_267,_266);var _26a=this;setTimeout(function(){_26a.focus.findAndFocusGridCell();},50);})});},getCellValueByIndex:function(_26b,_26c){var cell=this.layout.cells[_26b];var _26d;if(cell&&cell.field){_26d=cell.field;}else{return undefined;}var _26e;this.store.fetchItemByIdentity({identity:this._by_idx[_26c].idty,onItem:dojo.hitch(this,function(item){_26e=this.store.getValue(item,_26d);})});return _26e;},setCellValueByName:function(name,_26f,_270){var cell;for(var i=0;i<this.layout.cells.length;i++){if(name==this.layout.cells[i].field){var _271;cell=this.layout.cells[i];if(cell&&cell.field){_271=cell.field;}else{return;}if(this.edit&&this.edit.apply){this.edit.apply();}this.store.fetchItemByIdentity({identity:this._by_idx[_26f].idty,onItem:dojo.hitch(this,function(item){var _272=this.store.getValue(item,_271);if(typeof _272=="number"){_270=isNaN(_270)?_270:parseFloat(_270);}else{if(typeof _272=="boolean"){_270=_270=="true"?true:_270=="false"?false:_270;}else{if(_272 instanceof Date){var _273=new Date(_270);_270=isNaN(_273.getTime())?_270:_273;}}}this.store.setValue(item,_271,_270);var _274=this;setTimeout(function(){_274.focus.findAndFocusGridCell();},50);})});}}},getCellValueByName:function(name,_275){var cell;for(var i=0;i<this.layout.cells.length;i++){if(name==this.layout.cells[i].field){cell=this.layout.cells[i];}}if(!cell){return undefined;}var _276;if(cell&&cell.field){_276=cell.field;}else{return undefined;}var _277;this.store.fetchItemByIdentity({identity:this._by_idx[_275].idty,onItem:dojo.hitch(this,function(item){_277=this.store.getValue(item,_276);})});return _277;},_getParentForm:function(){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _278=dijit.byNode(node);if(_278&&typeof _278._onSubmit=="function"){return _278;}}},_setIsActionableAttr:function(_279){if(_279=="true"){this.isActionable=true;}else{if(_279=="false"){this.isActionable=false;}else{this.isActionable=_279;}}},_getState:function(){var _27a=[];var _27b=this.layout.cells;for(var i=0;i<_27b.length;i++){if(_27b[i].editable&&_27b[i].widget){_27a.push(_27b[i].widget);}}var _27c=dojo.map(_27a,function(w){return w.get("state")||"";});return dojo.indexOf(_27c,"Error")>=0||!this.SELECTION_VALID_STATE?"Error":dojo.indexOf(_27c,"Incomplete")>=0?"Incomplete":"";},postMixInProperties:function(){this.inherited(arguments);var _27d=this;(function(obj){if(dojo.isArray(obj)){for(var i=0;i<obj.length;i++){arguments.callee(obj[i]);}}else{if(dojo.isObject(obj)){if(obj.name){obj.name=_27d.getI18NString(obj.name);}else{if(obj.cells){arguments.callee(obj.cells);}}}}})(this.structure);},setStoreData:function(_27e){var flag=this.store!=null;this.setStore(new dojo.data.ItemFileWriteStore({data:{items:_27e},hierarchical:false}));if(flag){this._setComparatorForColunm();}},_setStoreDataAttr:function(_27f){if(!this.store){this.store=new dojo.data.ItemFileWriteStore({data:{items:dojo.fromJson(_27f)},hierarchical:false});}},_setComparatorForColunm:function(){var _280;if(this.comparatorMap!=""){_280=dojo.fromJson(this.comparatorMap);}else{_280={};}for(var i=0;i<this.structure[0].length;i++){if(this.structure[0][i].type){var cell=this.getCellByField(this.structure[0][i].field);if(cell.comparator){_280[this.structure[0][i].field]=dojo.hitch(cell,cell.comparator);}}}this.store.comparatorMap=_280;},getEditableStroeData:function(){if(this.storeDataName){var _281=this.layout.cells;var _282=this.store;var _283=this.selectable;var _284=[];this.store.fetch({onComplete:function(_285,_286){for(var m=0;m<_285.length;m++){var _287={};var flag=false;for(var i=0;i<_281.length;i++){if(_281[i].editable){var name=_281[i].field;var _288=_282.getValue(_285[m],_281[i].field);if(_288&&_288!==""&&typeof _288!="string"){if(_281[i].editable&&_281[i].widget&&_281[i].widget.serialize){_288=_281[i].widget.serialize(_288,_281[i].widget.constraints);}}_287[name]=(_288===null||_288==="null"?"":_288);flag=true;}}if(flag){_284.push(_287);}}}});if(_284.length>0){return _284;}else{return;}}else{return;}},_createInputNodesForObj:function(_289,obj,_28a){for(var p in obj){if(obj[p]!=null&&typeof obj[p]=="object"){this._createInputNodesForObj(_289,obj[p],_28a+"."+p);}else{var _28b=_28a+"."+p;var _28c=obj[p]===null||typeof obj[p]=="undefined"?"":obj[p];var _28d=dojo.query("input[type='hidden',name='"+_28b+"']",_289);if(_28d.length>0){_28d.attr("value",_28c);}else{var _28e={};_28e.type="hidden";_28e.name=_28b;_28e.value=_28c;dojo.create("input",_28e,_289,"last");}}}},onFormSubmit:function(){if(this.disabled){return;}if(this.edit&&this.edit.apply){this.edit.apply();}if(this.storeDataName){var _28f=this.layout.cells;var _290=this.store;var _291=this.storeDataName;var node=this.domNode;var _292=this.selectable;dojo.query("> input[type=hidden]",node).forEach(function(node,_293,_294){dojo.destroy(node);});var _295=this;if(!(this.store instanceof dojox.data.QueryReadStore)){this.store.fetch({onComplete:function(_296,_297){for(var m=0;m<_296.length;m++){for(var i=0;i<_28f.length;i++){if(_290.getValue(_296[m],_28f[i].field)!=null){break;}}if(i==_28f.length){continue;}for(var i=0;i<_28f.length;i++){if(_28f[i].editable){var _298={};_298.type="hidden";_298.name=_291+"."+m+"."+_28f[i].field;_298.value=_290.getValue(_296[m],_28f[i].field);if(_298.value&&_298.value!==""&&typeof _298.value!="string"){if(_28f[i].editable&&_28f[i].widget&&_28f[i].widget.serialize){_298.value=_28f[i].widget.serialize(_298.value,_28f[i].widget.constraints);}}if(_298.value!==null&&typeof _298.value=="object"){_295._createInputNodesForObj(node,_298.value,_298.name);}else{_298.value=_298.value===null?"":_298.value;dojo.create("input",_298,node,"last");}}}}}});}if(this.name&&this.selectable){var _28f=this.layout.cells;var name=this.name;var _290=this.store;var node=this.domNode;var _299=this.selection.getSelected();for(var m=0;m<_299.length;m++){var _29a=this.selectionMode=="single";if(_29a&&m==1){break;}var _29b=_299[m];dojo.forEach(_290.getAttributes(_29b),function(_29c){var _29d={};_29d.type="hidden";if(_29a){_29d.name=name+"."+_29c;}else{_29d.name=name+"."+m+"."+_29c;}_29d.value=_290.getValue(_29b,_29c);for(var i=0;i<_28f.length;i++){if(_28f[i].field==_29c){if(_29d.value&&_29d.value!==""&&typeof _29d.value!="string"){if(_28f[i].editable&&_28f[i].widget&&_28f[i].widget.serialize){_29d.value=_28f[i].widget.serialize(_29d.value,_28f[i].widget.constraints);}}if(_29d.value!==null&typeof _29d.value=="object"){_295._createInputNodesForObj(node,_29d.value,_29d.name);}else{_29d.value=_29d.value===null?"":_29d.value;dojo.create("input",_29d,node,"last");}break;}}console.debug("tempObj",_29d);});}}}},_getValueAttr:function(_29e){if(this.selectable){var _29f=this.selection.getSelected();var _2a0=this.layout.cells;var _2a1=this.store;var _2a2=[];if(_29f.length>0){for(var m=0;m<_29f.length;m++){var _2a3=_29f[m];var _2a4={};dojo.forEach(_2a1.getAttributes(_2a3),function(_2a5){for(var i=0;i<_2a0.length;i++){if(_2a0[i].field==_2a5){_2a4[_2a5]=_2a1.getValue(_2a3,_2a5);if(_2a4[_2a5]&&_2a4[_2a5]!==""&&typeof _2a4[_2a5]!="string"){if(_2a0[i].editable&&_2a0[i].widget&&(_2a0[i].widget instanceof com.ibm.btt.dijit.DateTextBox||_2a0[i].widget instanceof com.ibm.btt.dijit.NumberTextBox)&&_2a0[i].formatter){_2a4[_2a5]=_2a0[i].widget.serialize(_2a4[_2a5],_2a0[i].widget.constraints);}}_2a4[_2a5]=_2a4[_2a5]===null?"":_2a4[_2a5];break;}}});console.debug("tempObj",_2a4);if(this.selectionMode=="single"){return _2a4;}if(_2a4&&_2a4!==""){_2a2.push(_2a4);}}return _2a2;}else{return null;}}else{if(this._cellEventRowData){return this._cellEventRowData;}else{return undefined;}}},_setVisibilityAttr:function(_2a6){this.visibility=_2a6;if(_2a6=="gone"){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}if(this._firstTimeLoaded){this._eventHandlers.push(dojo.connect(this,"startup",dojo.hitch(this,function(){dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");})));}else{dojo.style(this.domNode,"visibility","visible");dojo.style(this.domNode,"display","none");}}else{if(_2a6=="hidden"){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");this.update();}}this._firstTimeLoaded=false;},getValueInSelectedItem:function(_2a7){return this.getValueInFirstSelectedItem(_2a7);},getValueInFirstSelectedItem:function(_2a8){var _2a9=this.selection.getFirstSelected();if(_2a9){return this.store.getValue(_2a9,_2a8);}else{return null;}},getLengthOfSelectedRows:function(){return this.selection.getSelected().length;},getSelectedItem:function(){return this.attr("value");},_setWidthAttr:function(_2aa){if(_2aa!=""){this.width=this.handleLenUint(_2aa);dojo.style(this.domNode,"width",this.width);}},_setHeightAttr:function(_2ab){if(_2ab!=""){this.height=this.handleLenUint(_2ab);}},canSort:function(){if(this.sortEnabled&&this.disabled==false){return this.inherited(arguments);}else{return false;}},validate:function(_2ac,_2ad,_2ae){},checkSelectionNum:function(){this.showErrorIcon("");var _2af=this.selection.getSelected().length;var msg="";console.debug("this.selectionRequired",this.selectionRequired);console.debug("selectNum",_2af);if(this.selectionRequired&&_2af<1){if(this.selectionMode==="single"){msg=this._bundle.getMessage("rangeSingleMessage");this.SELECTION_VALID_STATE=false;}else{if(this.selectionMode==="extended"){msg=this._bundle.getMessage("rangeMultiMessage");this.SELECTION_VALID_STATE=false;}else{this.SELECTION_VALID_STATE=true;}}}else{this.SELECTION_VALID_STATE=true;}this.showErrorIcon(msg);this._set("state",this._getState());},showErrorIcon:function(_2b0){if(this.errorMessageIcon){if(_2b0){this.errorMessageIcon.title=_2b0;this.errorMessageIcon.style.display="";var hint=this.get("hint");if(hint!=undefined&&hint!=null&&hint!=""){this._hint=hint;this.set("hint",_2b0);}}else{this.errorMessageIcon.title="";this.errorMessageIcon.style.display="none";if(this._hint){this.set("hint",this._hint);delete this._hint;}}}},isValid:function(){var _2b1=this._getState()=="";console.debug("isValid",_2b1);return _2b1;},reset:function(){if((this.readOnly===true)||(this.disabled===true)){this.removeSelectedRows();return;}if(this.store instanceof dojo.data.ItemFileReadStore){var rows=this.get("rowCount");for(var i=0;i<rows;i++){this.doCancelEdit(i);}this.store.revert();}},_setReadOnlyAttr:function(_2b2){console.debug("_setReadOnlyAttr",_2b2);this.readOnly=_2b2;},_setDisabledAttr:function(_2b3){console.debug("_setDisabledAttr",_2b3);this.disabled=_2b3;if(this.disabled){if(this.selectionMode!="none"){if(!this._disableCache){this._disableCache={};}this._disableCache.selectionMode=this.selectionMode;this.selectionMode="none";this.selection.setMode(this.selectionMode);}if(this.columnReordering){if(!this._disableCache){this._disableCache={};}this._disableCache.columnReordering=this.columnReordering;this.columnReordering=false;if(this._pending_requests){this._refresh(true);}else{setTimeout(dojo.hitch(this,function(){this._refresh(true);}),1000);}}console.log("Grid attached events : ",this._attachEvents);dojo.query(".dojoxGridScrollbox",this.id).forEach(function(node,_2b4,arr){dojo.style(node,"overflow","hidden");});if(!dojo.query(".disabledGrid",this.id).length){var mask=dojo.create("div",{"class":"disabledGrid"},this.domNode);mask.onclick=dojo.stopEvents;mask.onDblClick=dojo.stopEvents;mask.onmouseover=dojo.stopEvents;mask.onmousemove=dojo.stopEvents;mask.onmouseout=dojo.stopEvents;mask.onmouseleave=dojo.stopEvents;mask.onmouseenter=dojo.stopEvents;mask.onmouseup=dojo.stopEvents;mask.onmousedown=dojo.stopEvents;mask.onfocus=dojo.stopEvents;mask.onkeydown=dojo.stopEvents;mask.onkeyup=dojo.stopEvents;mask.onkeypress=dojo.stopEvents;mask.onblur=dojo.stopEvents;mask.onkeypress=dojo.stopEvents;}dojo.addClass(this.domNode,"dijitDisabled");}else{if(this._disableCache&&this._disableCache.selectionMode){this.selectionMode=this._disableCache.selectionMode;this.selection.setMode(this.selectionMode);delete this._disableCache.selectionMode;}if(this._disableCache&&this._disableCache.columnReordering){this.columnReordering=this._disableCache.columnReordering;delete this._disableCache.columnReordering;if(dojo.isIE&&dojo.isIE<9){var _2b5=this;setTimeout(function(){try{_2b5._refresh(true);}catch(e){_2b5._refresh(true);}},10);}else{this._refresh(true);}}dojo.query(".dojoxGridScrollbox",this.id).forEach(function(node,_2b6,arr){dojo.style(node,"overflow","auto");});dojo.query(".disabledGrid",this.id).forEach(function(node){dojo.destroy(node);});if(this._disableCache){delete this._disableCache;}dojo.removeClass(this.domNode,"dijitDisabled");}this.checkSelectionNum();},focusOn:function(){if(!this.isFocusable()){console.info("can't focus on grid, because it's not focusable");return;}var _2b7=(this.rowCount===0);if(!_2b7){var _2b8=0;var cell=this.getCell(_2b8);if(cell.hidden){_2b8=this.focus.isNavHeader()?this.focus._colHeadFocusIdx:0;}this.focus.setFocusIndex(0,_2b8);}else{this.focus.focusHeader();}},canEdit:function(_2b9,_2ba){if((this.readOnly===true)||(this.disabled===true)){return false;}else{return this.inherited(arguments);}},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){vs.onBeforeRow=function(_2bb,_2bc){if(_2bb<0){_2bc[0].hidden=false;return;}var item=this.grid.getItem(_2bb);if(!item){return;}var _2bd=this.grid.layout.cells;for(var i=0;i<_2bd.length;i++){if(this.grid.store.getValue(item,_2bd[i].field)!==null){_2bc[0].hidden=false;return;}}_2bc[0].hidden=true;};}this.inherited(arguments);},onFetchError:function(err,req){if(err.responseText){(new dijit.Dialog({title:this._bundle.getMessage("errorDialogTitle"),content:err.responseText})).show();}},getWidget:function(arg){var _2be=this.layout.cells;for(var i=0;i<_2be.length;i++){if(_2be[i].id==arg&&_2be[i].getWidget){return _2be[i].getWidget();}}return undefined;},showColumn:function(_2bf){if(_2bf>-1&&_2bf<this.layout.cells.length&&this.disabled===false){this.layout.setColumnVisibility(_2bf,true);if(dojo.isIE){var _2c0=this;setTimeout(function(){try{_2c0._refresh();_2c0._refresh();}catch(e){_2c0._refresh();}},0);}}},hideColumn:function(_2c1){if(_2c1>-1&&_2c1<this.layout.cells.length&&this.disabled===false){this.layout.setColumnVisibility(_2c1,false);if(dojo.isIE){var _2c2=this;setTimeout(function(){try{_2c2._refresh();_2c2._refresh();}catch(e){_2c2._refresh();}},0);}}},isColumnVisible:function(_2c3){if(_2c3>-1&&_2c3<this.layout.cells.length){return !this.layout.cells[_2c3].hidden;}else{undefined;}},destroy:function(){dojo.forEach(this._eventHandlers,dojo.disconnect);this._eventHandlers=undefined;this.inherited(arguments);if(this.store&&this.store.destroy){this.store.destroy();}},_setClassAttr:function(arg){if(this.disabled){return;}else{this.inherited(arguments);}},_setNoDataMessageAttr:function(msg){if(msg){this.noDataMessage="<span class=\"dojoxGridNoData\">"+msg+"</span>";}},onAsyncTimeOut:function(){},onAsyncOK:function(){},onAsyncError:function(){}});}if(!dojo._hasResource["com.ibm.btt.dijit.Message"]){dojo._hasResource["com.ibm.btt.dijit.Message"]=true;dojo.provide("com.ibm.btt.dijit.Message");dojo.requireLocalization("com.ibm.btt.dijit","Message", null, "ROOT,zh-cn");dojo.declare("com.ibm.btt.dijit.Message",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div><div dojoAttachPoint='staticHolder'><span dojoAttachPoint='staticMessageHolder' class='dijitLabelBase'></span><span dojoAttachPoint='closeHandler' style='margin:0 0 0 5px;text-decoration:underline;cursor:pointer'></span></div><div dojoAttachPoint='dialogHolder'><span dojoAttachPoint='popupMessageHolder' class='dijitLabelBase'></span></div></div>",level:"ERROR",text:"",styleClass:"",name:"",messageArray:"",_popupDialog:null,isNotSubmitted:true,displayMode:"STATIC",width:"",height:"",textWrap:false,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{visibility:{node:"domNode"},value:{}}),postMixInProperties:function(){this.inherited(arguments);this.bundle=new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","Message");},postCreate:function(){this._init();this._showHideCloseHandler(false);if(this.text){this.display(this.text,this.level);}else{if(this.messageArray){try{var _2c4=dojo.fromJson(this.messageArray);this.displayMessageArray(_2c4);}catch(e){}}}},_init:function(){this.closeHandler.innerHTML=this.bundle.getMessage("closeMessage");this.styleClass={"ERROR":"errorMessage","WARN":"warnMessage","INFO":"infoMessage"};dojo.connect(this.closeHandler,"onclick",this,"closeMessage");},display:function(text,_2c5){if((text==="")||(text===null)||(text===undefined)){console.info("[display] Need text message for displaying");this._showHideCloseHandler(false);return;}var _2c6=this._getMessageValue.apply(this,arguments);this.staticMessageHolder.innerHTML=_2c6;if(_2c5===undefined){_2c5=this.level;}this._switchModeAndStyles("STATIC",_2c5);this._showHideCloseHandler(true);},displayMessageArray:function(_2c7){if(_2c7.length>0){var _2c8=[];for(var i=0;i<_2c7.length;i++){_2c8.push((i+1)+" ");_2c8.push(this._getMessageValue(_2c7[i]));if(i!=_2c7.length-1){_2c8.push("<br>");}}var _2c9=_2c8.join("");if(this.displayMode==="STATIC"){this.display(_2c9);}else{this.displayPopup(_2c9);}}},_showHideCloseHandler:function(flag){if(flag){dojo.style(this.closeHandler,{"display":""});}else{dojo.style(this.closeHandler,{"display":"none"});}},displayPopup:function(text,_2ca){if((text==="")||(text===null)||(text===undefined)){console.info("[displayPopup] Need text message for displaying");return;}var _2cb=this._getMessageValue.apply(this,arguments);this.popupMessageHolder.innerHTML=_2cb;if(_2ca===undefined){_2ca=this.level;}this._switchModeAndStyles("POPUP",_2ca);if(this._popupDialog===null){var _2cc=this.id+"messagePopup";this._popupDialog=new dijit.Dialog({id:_2cc,style:"min-width:100px;",title:this.bundle.getMessage("popupTitle")},this.dialogHolder);}this._popupDialog.show();},closeMessage:function(){if(this.displayMode==="STATIC"){dojo.style(this.staticHolder,{"display":"none"});}else{if(this._popupDialog!==null){this._popupDialog.hide();}else{console.error("[Should have a popup dialog]");}}},_setTextWrapAttr:function(_2cd){this.textWrap=_2cd;this._setTextLabelStyle();},_setWidthAttr:function(_2ce){if(_2ce!=""&&_2ce!=null){this.width=_2ce;dojo.style(this.staticMessageHolder,"width",this.handleLenUint(this.width));dojo.style(this.popupMessageHolder,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_2cf){if(_2cf!=""&&_2cf!=null){this.height=_2cf;dojo.style(this.staticMessageHolder,"height",this.handleLenUint(this.height));dojo.style(this.popupMessageHolder,"height",this.handleLenUint(this.height));}},_switchModeAndStyles:function(mode,_2d0){this.displayMode=mode;if(this.displayMode==="STATIC"){dojo.style(this.staticHolder,{"display":""});dojo.style(this.dialogHolder,{"display":"none"});if(this._popupDialog!==null){this._popupDialog.hide();}dojo.removeClass(this.staticMessageHolder);dojo.addClass(this.staticMessageHolder,this.styleClass[_2d0]);}else{dojo.style(this.dialogHolder,{"display":""});dojo.style(this.staticHolder,{"display":"none"});dojo.removeClass(this.popupMessageHolder);dojo.addClass(this.popupMessageHolder,this.styleClass[_2d0]);}this._setTextLabelStyle();},_setTextLabelStyle:function(){dojo.addClass(this.popupMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.popupMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.popupMessageHolder,"dijitLabelWrap");}dojo.addClass(this.staticMessageHolder,"dijitLabelBase");if(this.textWrap==true){dojo.addClass(this.staticMessageHolder,"dijitLabelWrap");}else{dojo.removeClass(this.staticMessageHolder,"dijitLabelWrap");}},_getMessageValue:function(text,_2d1){var _2d2="";if(arguments.length===1){_2d2=StringUtil.escapeEnterWrap(this.getI18NString(text));}else{if(arguments.length===2){_2d2=StringUtil.escapeEnterWrap(this.getI18NString(text));}else{if(arguments.length>2){var _2d3=[];for(var i=2;i<arguments.length;i++){_2d3.push(arguments[i]);}console.debug("display,dynamic attributes values",_2d3);_2d2=StringUtil.escapeEnterWrap(this.getI18NString(text,_2d3,true));}}}return _2d2;},_setValueAttr:function(_2d4){this.text=_2d4;},destroy:function(){this.inherited(arguments);if(this._popupDialog!==null){this._popupDialog.destroyRecursive();}}});}if(!dojo._hasResource["dojox.uuid.generateRandomUuid"]){dojo._hasResource["dojox.uuid.generateRandomUuid"]=true;dojo.provide("dojox.uuid.generateRandomUuid");dojox.uuid.generateRandomUuid=function(){var _2d5=16;function _2d6(){var _2d7=Math.floor((Math.random()%1)*Math.pow(2,32));var _2d8=_2d7.toString(_2d5);while(_2d8.length<8){_2d8="0"+_2d8;}return _2d8;};var _2d9="-";var _2da="4";var _2db="8";var a=_2d6();var b=_2d6();b=b.substring(0,4)+_2d9+_2da+b.substring(5,8);var c=_2d6();c=_2db+c.substring(1,4)+_2d9+c.substring(4,8);var d=_2d6();var _2dc=a+_2d9+b+_2d9+c+d;_2dc=_2dc.toLowerCase();return _2dc;};}if(!dojo._hasResource["com.ibm.btt.dijit.FileUpload"]){dojo._hasResource["com.ibm.btt.dijit.FileUpload"]=true;dojo.provide("com.ibm.btt.dijit.FileUpload");dojo.declare("com.ibm.btt.dijit.FileUpload",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:dojo.cache("com.ibm.btt.dijit","templates/FileUpload.html","<div dojoAttachPoint=\"fileuploader\" class = \"fileupload_pane\">\r\n<!--\r\n/* \r\n *------------------------------------------------------------------- \r\n * Licensed Materials - Property of IBM\r\n * Restricted Materials of IBM\r\n * 5724-H82\r\n * (C) Copyright IBM Corp.2010 All Rights Reserved.\r\n * US Government Users Restricted Rights - Use, duplication or disclosure\r\n * restricted by GSA ADP Schedule Contract with IBM Corp\r\n -------------------------------------------------------------------\r\n */\r\n-->\r\n\t<span dojoAttachPoint=\"inputBox\"></span>\r\n\t<span dojoAttachPoint=\"browseBtn\"></span>\r\n\t<div dojoAttachPoint=\"uploadBtn\"></div>\r\n\t<span dojoAttachPoint=\"statusMessage\" class=\"loadingMsg\"></span>\r\n\t<div dojoAttachPoint=\"clearBtn\"></div>\r\n\t<span dojoAttachPoint=\"errorMessage\" class=\"errorMsg\"></span>\r\n</div>\r\n\r\n\r\n"),state:"Incomplete",required:false,disabled:false,_visibilityHolder:[],_isDisabled_uploadButton:false,tabIndex:"-1",width:"",_browse_width:null,inputText:null,f0:null,uploadButton:null,cancelButton:null,_state:"none",value:"",currentFileInfo:null,fileExtension:"",uploadUrl:"",storeDataName:"",bttParams:"",_bttParamJSON:null,_accessByKey:false,_bundle:new com.ibm.btt.util.I18nBundle("com.ibm.btt.dijit","FileUpload"),postCreate:function(){this._bttParamJSON=dojo.fromJson(this.bttParams);this.createInsideWidgets();this.renderItems();this.connectEvents();this.onShow();this._tabSupport(false);this.inherited(arguments);},createInsideWidgets:function(){this.inputText=new dijit.form.TextBox({},this.inputBox);dojo.addClass(this.inputText.domNode,"inputBox");this.setReadOnly(this.inputText,true);this.inputText.reset=null;this.uploadButton=new dijit.form.Button({label:this._bundle.getMessage("UPLOAD_BUTTON_LABEL")},this.uploadBtn);this.cancelButton=new dijit.form.Button({label:this._bundle.getMessage("CANCEL_BUTTON_LABEL")},this.clearBtn);this.browseBtn.innerHTML=this._bundle.getMessage("BROWSE_BUTTON_LABEL");var _2dd=this._buildParameter();var _2de;if(dojo.isIE){dojo.addClass(this.uploadButton.domNode,"commonButton");dojo.addClass(this.cancelButton.domNode,"commonButton");}this.f0=new com.ibm.btt.dijit.FileUploader(dojo.mixin({force:"html",uploadUrl:this.uploadUrl+_2dd,showProgress:false,selectMultipleFiles:false,uploadOnChange:false,tabIndex:-1},_2de),this.browseBtn);dojo.style(this.f0.insideNode,{"width":"0px"});this._calculateWidth();},_buildParameter:function(){var _2df="?dataName="+this.storeDataName;if(this._bttParamJSON.dse_processorId){_2df+="&processId="+this._bttParamJSON.dse_processorId;}if(this._bttParamJSON.dse_sessionId){_2df+="&sessionId="+this._bttParamJSON.dse_sessionId;}return _2df;},_calculateWidth:function(){var _2e0=dojo.style(this.inputText.domNode,"width");var _2e1=dojo.style(this.uploadButton.domNode,"width");var _2e2=dojo.style(this.f0.domNode,"width");var _2e3=dojo.style(this.cancelButton.domNode,"width");var _2e4=35;var _2e5=_2e1+_2e2+_2e3+_2e4;var _2e6=_2e0+_2e5;if(this.width){var _2e7=this.width.substr(0,this.width.lastIndexOf("px"));if(_2e7&&_2e7>_2e6){if(this.width&&_2e7>_2e6){dojo.style(this.fileuploader,"width",this.width);dojo.style(this.inputText.domNode,"width",(_2e7-_2e5)+"px");}else{dojo.style(this.fileuploader,"width",_2e6+"px");}}}this._browse_width=dojo.style(this.f0.domNode,"width");},_tabSupport:function(_2e8){if(_2e8){}else{this.inputText.set("tabIndex","-1");this.f0.domNode.setAttribute("tabIndex","-1");this.f0.domNode.setAttribute("wairole","presentation");this.f0.domNode.setAttribute("role","presentation");this.f0.insideNode.setAttribute("wairole","presentation");this.f0.insideNode.setAttribute("role","presentation");this.f0._fileInput.setAttribute("tabIndex","0");}},renderItems:function(){console.debug("this.value",this.value);if(this.value){this._state="done";this._set("state","");try{this.currentFileInfo=dojo.fromJson(this.value);}catch(e){console.debug("error occurs",e);this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.value="";}}else{this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}}this._initRenderItems();this._initUIProperties();},_initRenderItems:function(){this.inputText.set("value","");this._clearMessage();if(this._state=="done"){console.debug("this.currentFileInfo",this.currentFileInfo);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width","0px");this.setVisibility(this.inputText.domNode,false,true);this.setVisibility(this.uploadButton.domNode,false,true);this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML=this.currentFileInfo.name;}else{dojo.style(this.f0.domNode,"visibility","visible");dojo.style(this.f0.insideNode,"visibility","inherit");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.inputText.domNode,true);this.setVisibility(this.uploadButton.domNode,false,false);this.setVisibility(this.cancelButton.domNode,false,false);}},_initUIProperties:function(){this._visibilityHolder=[];if(this.visibility=="hidden"||this.visibility=="gone"){if(this._state=="none"){this._visibilityHolder.push({dijit:this.inputText.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});this.setVisibility(this.inputText.domNode,false,false);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}else{this._visibilityHolder.push({dijit:this.cancelButton.domNode,visibility:"visible"});this.setVisibility(this.cancelButton.domNode,false,true);this._visibilityHolder.push({dijit:this.statusMessage,visibility:"visible"});dojo.style(this.statusMessage,"visibility","hidden");}}},_clearMessage:function(){this.statusMessage.innerHTML="";this.errorMessage.innerHTML="";dojo.style(this.errorMessage,"display","none");this._showErrorInputBox(false);},connectEvents:function(){dojo.connect(this.f0,"onChange",this,this._handleSelect);dojo.connect(this.uploadButton,"onClick",this,this._handleUpload);dojo.connect(this.f0,"onComplete",this,function(_2e9){var _2ea=_2e9[0];console.debug("response",_2ea);var _2eb=_2ea.name;var _2ec=_2ea.errorCode;if(_2eb=="TypeError"||_2ec){this.handleError(_2ec);}else{this.handleSuccess(_2ea);}});dojo.connect(this.f0,"onCancel",this,function(){if(this.required){if(this._state=="none"&&(!this.f0._fileInput.value)){this._showErrorInputBox(true);this.displayMessage(this._bundle.getMessage("UPLOAD_REQUIRED"));}}});dojo.connect(this.f0,"onError",this,function(){console.debug("onError",this._state);if(this._state=="canceling"){}else{this.handleError();}});dojo.connect(this.cancelButton,"onClick",this,function(){this.reset();});},_handleSelect:function(data){this.setVisibility(this.cancelButton.domNode,true);this.setVisibility(this.uploadButton.domNode,true);this._clearMessage();var _2ed=data[0];this.inputText.set("value",_2ed.name);var mask=_2ed.name.substr(_2ed.name.lastIndexOf(".")+1).toLowerCase();if(this.fileExtension!=""&&this.fileExtension.indexOf(mask)==-1){this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.displayMessage(this._bundle.getMessage("UPLOAD_ERRORFILEMASK",{value:this.fileExtension}));this._showErrorInputBox(true);this._state="error";this._set("state","Error");this.validate();}else{this.setDisabled(this.uploadButton,false);this._isDisabled_uploadButton=false;this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.validate();}},_handleUpload:function(){this._state="uploading";this._set("state","Incomplete");this.setVisibility(this.uploadButton.domNode,false,true);dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.domNode,"width","0px");dojo.fadeOut({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.cancelButton.domNode,true);this.statusMessage.innerHTML="";var _2ee=document.createElement("img");var _2ef=dojo.moduleUrl("com.ibm.btt.dijit","images/loading.gif");_2ee.setAttribute("src",_2ef.path);this.statusMessage.appendChild(_2ee);var _2f0=document.createElement("span");_2f0.innerHTML="  "+this._bundle.getMessage("UPLOAD_UPLOADING");this.statusMessage.appendChild(_2f0);console.debug("before f0.upload");var uuid=this.getUUID();this.f0.fileUploadUUID=uuid;this.f0.upload();console.debug("after f0.upload");setTimeout(dojo.hitch(this,this._queryFileSizeFromServer),3000);this.onUpload();},getUUID:function(){return dojox.uuid.generateRandomUuid();},_queryFileSizeFromServer:function(){if(this._state=="uploading"&&this.f0.fileUploadUUID){var _2f1={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=querySize",handleAs:"json",load:dojo.hitch(this,function(data){if(data&&this._state=="uploading"){if(data.errorCode=="7"){this.f0.cancel();}}}),error:dojo.hitch(this,function(_2f2){if(this._state=="uploading"){this.reset();}})};dojo.xhrGet(_2f1);}},_clearFizeSizePendingOnServer:function(){if(this.f0.fileUploadUUID){var _2f3={url:this.f0.uploadUrl+"&uuid="+this.f0.fileUploadUUID+"&fileUpLoadAction=cancelPending",handleAs:"json",load:dojo.hitch(this,function(data){console.debug("Cancel the file uploading pending on server successfully");}),error:dojo.hitch(this,function(_2f4){console.debug("Error when canceling the file uploading pending on server");})};dojo.xhrGet(_2f3);}},reset:function(){if(this._state=="done"){this._handleDelete();}else{this._handleCancel();}},_handleCancel:function(){if(this._state=="none"||this._state=="error"){this._resetUIforCancel();this.onCancel();}else{if(this._state=="uploading"){this._state="canceling";this._set("state","Incomplete");this.f0.cancel();this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();var _2f5=function(_2f6,args){this._resetUIforCancel();this.setDisabled(this.f0,false);this.onCancel();};var _2f7=function(_2f8,args){this.displayMessage(this._bundle.getMessage("CANCEL_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._clearFizeSizePendingOnServer();this._deleteFile(_2f5,_2f7);}}},_resetUIforCancel:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this.f0._clearUserSelection();this._initRenderItems();},_handleDelete:function(){this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();var _2f9=function(_2fa,args){console.debug("sucess delete");this._state="none";if(this.required){this._set("state","Incomplete");}else{this._set("state","");}this._initRenderItems();this.onDelete();};var _2fb=function(_2fc,args){console.debug("error delete");this.displayMessage(this._bundle.getMessage("DELETE_FAILSURE_MESSAGE"));this._state="error";this._set("state","Error");};this._deleteFile(_2f9,_2fb);},handleError:function(_2fd){this._state="error";this._set("state","Error");this.statusMessage.innerHTML="";this.setVisibility(this.inputText.domNode,true);this._showErrorInputBox(true);dojo.style(this.f0.domNode,"visibility","visible");dojo.style(this.f0.domNode,"width",this._browse_width+"px");dojo.fadeIn({node:this.f0.domNode,duration:275}).play();this.setVisibility(this.uploadButton.domNode,true);this.setDisabled(this.f0,false);this.setDisabled(this.uploadButton,true);this._isDisabled_uploadButton=true;this.setVisibility(this.cancelButton.domNode,true);if(_2fd=="7"){this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE_FILESIZE"));}else{this.displayMessage(this._bundle.getMessage("UPLOAD_FAILSURE_MESSAGE"));}this._clearFizeSizePendingOnServer();this.onError();},handleSuccess:function(_2fe){this._state="done";this._set("state","");this.statusMessage.innerHTML=_2fe.name;this.value=_2fe.name;this.currentFileInfo=_2fe;console.debug("currentFileInfo",this.currentFileInfo);this.setVisibility(this.inputText.domNode,false,true);this.onComplete();},_showErrorInputBox:function(_2ff){if(_2ff){dojo.removeClass(this.inputText.domNode,"inputBox");dojo.addClass(this.inputText.domNode,"errInputBox");}else{dojo.removeClass(this.inputText.domNode,"errInputBox");dojo.addClass(this.inputText.domNode,"inputBox");}},_deleteFile:function(_300,_301){if(this._bttParamJSON&&this.currentFileInfo){console.debug("currentFileInfo",this.currentFileInfo);var _302=this._buildParameter();_302+="&fileId="+this.currentFileInfo.fileId;dojo.xhrDelete({url:this.uploadUrl+_302,preventCache:true,error:dojo.hitch(this,function(_303,args){dojo.hitch(this,_301)(_303,args);}),load:dojo.hitch(this,function(_304,args){if(_304.errorCode){dojo.hitch(this,_301)(_304,args);}else{this.currentFileInfo=null;dojo.hitch(this,_300)(_304,args);}})});}},onUpload:function(){this.validate();},onComplete:function(){this.validate();},onCancel:function(){this.validate();},onError:function(){this.validate();},onDelete:function(){this.validate();},validate:function(){},getFileInfo:function(){return this.currentFileInfo;},reload:function(){this.value="";this.currentFileInfo=null;this._resetUIforCancel();},_setVisibilityAttr:function(_305){this.visibility=_305;if(_305=="gone"){this._allDisappear();dojo.style(this.domNode,"visibility","hidden");dojo.style(this.domNode,"display","none");}else{if(_305=="hidden"){this._allDisappear();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","hidden");}else{this._allShowUp();dojo.style(this.domNode,"display","");dojo.style(this.domNode,"visibility","visible");}}},_allShowUp:function(){dojo.forEach(this._visibilityHolder,function(v){dojo.style(v.dijit,"visibility",v.visibility);});this._visibilityHolder=[];},_holdVisibilityFeatures:function(_306){this._visibilityHolder.push({dijit:_306,visibility:"visible"});},_allDisappear:function(){if(this.inputText){if(this.isVisible(this.inputText.domNode)){this._holdVisibilityFeatures(this.inputText.domNode);}dojo.style(this.inputText.domNode,"visibility","hidden");}if(this.f0){if(this.isVisible(this.f0.domNode)){this._visibilityHolder.push({dijit:this.f0.domNode,visibility:"visible"});this._visibilityHolder.push({dijit:this.f0.insideNode,visibility:"inherit"});}dojo.style(this.f0.domNode,"visibility","hidden");dojo.style(this.f0.insideNode,"visibility","inherit");}if(this.uploadButton){if(this.isVisible(this.uploadButton.domNode)){this._holdVisibilityFeatures(this.uploadButton.domNode);}dojo.style(this.uploadButton.domNode,"visibility","hidden");}if(this.cancelButton){if(this.isVisible(this.cancelButton.domNode)){this._holdVisibilityFeatures(this.cancelButton.domNode);}dojo.style(this.cancelButton.domNode,"visibility","hidden");}},displayMessage:function(_307){dojo.style(this.errorMessage,"display","");if(_307){this.errorMessage.innerHTML=_307;}},setVisibility:function(_308,_309,_30a){if(_309){dojo.style(_308,"visibility","visible");dojo.style(_308,"display","");}else{dojo.style(_308,"visibility","hidden");if(_30a){dojo.style(_308,"display","none");}}},isVisible:function(_30b){var _30c=dojo.style(_30b,"visibility");if(_30c=="visible"){return true;}else{if(_30c=="inherit"&&dojo.style(this.domNode,"visibility")=="visible"){return true;}else{return false;}}},setDisabled:function(_30d,_30e){if(_30d){_30d.set("disabled",_30e);}},setReadOnly:function(_30f,_310){if(_30f){_30f.set("readOnly",_310);}},onFormSubmit:function(){if(dojo.isIE){this.f0._formNode.innerHTML="";}},_setDisabledAttr:function(_311){this.disabled=_311;this.inherited(arguments);this.setDisabled(this.f0,_311);if(!_311){this.setDisabled(this.uploadButton,this._isDisabled_uploadButton);}else{this.setDisabled(this.uploadButton,_311);}this.setDisabled(this.cancelButton,_311);}});dojo.declare("com.ibm.btt.dijit.FileUploader",[dojox.form.FileUploader],{dfd:null,trueFocus:false,isShowDialog:false,fileUploadUUID:"",cancel:function(){if(this.dfd){this.dfd.cancel();if(dojo.isIE){dojo.io.iframe._frame.contentWindow.document.location.replace("about:blank");}else{dojo.io.iframe._frame.contentWindow.stop();}}},uploadHTML:function(){if(this.selectMultipleFiles){dojo.destroy(this._fileInput);}this._setHtmlPostData();if(this.showProgress){this._animateProgress();}if(this.dfd){dojo.destroy(this.dfd);}this.dfd=dojo.io.iframe.send({url:this.fileUploadUUID?(this.uploadUrl+"&uuid="+this.fileUploadUUID):this.uploadUrl,form:this._formNode,handleAs:"json",error:dojo.hitch(this,function(err){console.debug("error",err.message);this._error("HTML Upload Error:"+err.message);}),load:dojo.hitch(this,function(data,_312,_313){this._complete(data);})});console.debug("dfd",this.dfd);},_clearUserSelection:function(){this.fileInputs=[];if(dojo.isIE){if(this._fileInput){this._disconnect();this._formNode.removeChild(this._fileInput);}this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var nm=this.htmlFieldName;var _314=this.id;if(this.selectMultipleFiles){nm+=this.fileCount;_314+=this.fileCount;this.fileCount++;}dojo.attr(this._fileInput,{id:this.id,name:nm,type:"file",onKeyPress:function(){return !(window.event&&window.event.keyCode==13);}()});dojo.addClass(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);var real=dojo.marginBox(this._fileInput);dojo.style(this._fileInput,{position:"relative",left:(this.fhtml.nr.w-real.w)+"px",opacity:0});this._connectInput();}else{this._fileInput.value="";}},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{tabIndex:"insideNode"}),onFocusOnInputText:function(){},_connectInput:function(){this._disconnect();this._cons.push(dojo.connect(this._fileInput,"mouseover",this,function(evt){dojo.addClass(this.domNode,this.hoverClass);this.onMouseOver(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseout",this,function(evt){setTimeout(dojo.hitch(this,function(){dojo.removeClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseOut(evt);this._checkHtmlCancel("off");}),0);}));this._cons.push(dojo.connect(this._fileInput,"mousedown",this,function(evt){dojo.addClass(this.domNode,this.activeClass);dojo.removeClass(this.domNode,this.hoverClass);this.onMouseDown(evt);}));this._cons.push(dojo.connect(this._fileInput,"mouseup",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);this.onMouseUp(evt);this.onClick(evt);this._checkHtmlCancel("up");}));this._cons.push(dojo.connect(this._fileInput,"change",this,function(){this._checkHtmlCancel("change");this._change([{name:this._fileInput.value,type:"",size:0}]);}));if(this.tabIndex>=0){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this._cons.push(dojo.connect(this._fileInput,"focus",this,function(){if(!dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}else{this.trueFocus=true;}if(this.dialogIsOpen){if(dojo.isIE){dojo.addClass(this.domNode,this.activeClass);}this.onCancel();}this.dialogIsOpen=false;}));if(dojo.isIE){this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.keyCode==dojo.keys.TAB&&this.trueFocus){dojo.addClass(this.domNode,this.activeClass);}else{if(evt.charCode==dojo.keys.SPACE&&this.trueFocus){this.dialogIsOpen=true;}else{if(evt.keyCode==dojo.keys.ENTER){dojo.stopEvent(evt);}}}}));}else{this._cons.push(dojo.connect(this._fileInput,"keypress",this,function(evt){if(evt.charCode==dojo.keys.SPACE){this.dialogIsOpen=true;}}));}this._cons.push(dojo.connect(this._fileInput,"blur",this,function(evt){dojo.removeClass(this.domNode,this.activeClass);if(dojo.isIE){this.trueFocus=false;}}));},applyAccessKey:function(){if(this.f0._fileInput&&this.accessKey){this.f0._fileInput.setAttribute("accessKey",this.accessKey);}}});}if(!dojo._hasResource["com.ibm.btt.dijit.Group"]){dojo._hasResource["com.ibm.btt.dijit.Group"]=true;dojo.provide("com.ibm.btt.dijit.Group");dojo.declare("com.ibm.btt.dijit.Group",[dijit._Widget,dijit._Templated,dijit._Container,dijit.layout._ContentPaneResizeMixin,com.ibm.btt.dijit.AbstractWidgetMixin],{text:"",parseOnLoad:true,isContainer:true,width:"",height:"",templateString:"<fieldset dojoAttachPoint='domNode' class='dijitGroupBase'><legend dojoAttachPoint='textNode'></legend><div dojoAttachPoint='containerNode'></div></fieldset>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{text:{node:"textNode"},width:{node:"containerNode"},height:{node:"containerNode"}}),_setTextAttr:function(_315){this.text=_315;this.textNode.innerHTML=StringUtil.escapeHTML(this.getI18NString(_315));},_setWidthAttr:function(_316){if(_316!=""){this.width=_316;dojo.style(this.containerNode,"width",this.handleLenUint(this.width));dojo.style(this.containerNode,"overflow","auto");}},_setHeightAttr:function(_317){if(_317!=""){this.height=_317;dojo.style(this.containerNode,"height",this.handleLenUint(this.height));}}});}if(!dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]){dojo._hasResource["com.ibm.btt.dijit.TabbedPane"]=true;dojo.provide("com.ibm.btt.dijit.TabbedPane");dojo.declare("com.ibm.btt.dijit.TabbedPane",[dijit.layout.TabContainer,com.ibm.btt.dijit.AbstractWidgetMixin],{width:"800",height:"600",constructor:function(){this._disableWatch={};},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"com.ibm.btt.dijit.ScrollingTabController":"com.ibm.btt.dijit.TabController";},startup:function(){this.inherited(arguments);this.set("visibility",this.visibility);var _318=this.getChildren();dojo.forEach(_318,function(_319){this._disableWatch[_319.id]=_319.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_319));},this);this._setInitialTabSelection();},_setVisibilityAttr:function(_31a){this.inherited(arguments);if(typeof (this.tablist)!=="undefined"){if(_31a=="gone"){dojo.style(this.tablist.domNode,"visibility","visible");}else{if(_31a=="hidden"){dojo.style(this.tablist.domNode,"visibility","hidden");}else{dojo.style(this.tablist.domNode,"visibility","visible");}}}},closeChildByIndex:function(i){var _31b=this.getChildren();this.closeChild(_31b[i]);},closeChildById:function(id){var _31c=this.getChildren();for(var i=0;i<_31c.length;i++){if(id===_31c[i].id){this.closeChild(_31c[i]);}}},selectChildByIndex:function(i){var _31d=this.getChildren();this.selectChild(_31d[i]);},selectChildById:function(id){var _31e=this.getChildren();for(var i=0;i<_31e.length;i++){if(id===_31e[i].id){this.selectChild(_31e[i]);break;}}},closeChild:function(_31f){if(_31f.get("disabled")!=true){this.inherited(arguments);}},selectChild:function(_320){if(_320.get("disabled")!=true){this.inherited(arguments);}},hideTabByIndex:function(_321){var _322=this.getChildren();if(_321>-1&&_321<_322.length){var _323=this._getCurrentVisibleTabs();if(_323.length>1){var _324=_322[_321];var _325=this.tablist.pane2button[_324.id];dojo.style(_325.domNode,"display","none");_325._displayMark="hidden";if(_324.selected){var i;for(i=0;i<_323.length;i++){if(_323[i].id==_324.id){break;}}if(i+1<_323.length){this.selectChildById(_323[i+1].id);}else{this.selectChildById(_323[i-1].id);}}}}},showTabByIndex:function(_326){var _327=this.getChildren();if(_326>-1&&_326<_327.length){var _328=this.getChildren()[_326];this.showTabById(_328.id);}},hideTabById:function(id){var _329=this.getChildren();for(var i=0;i<_329.length;i++){if(id===_329[i].id){this.hideTabByIndex(i);break;}}},showTabById:function(id){var _32a=this.tablist.pane2button[id];dojo.style(_32a.domNode,"display","");_32a._displayMark="visible";},removeChild:function(_32b){this.inherited(arguments);this._disableWatch[_32b.id].unwatch();delete this._disableWatch[_32b.id];},addChild:function(_32c,_32d){this.inherited(arguments);this._disableWatch[_32c.id]=_32c.watch("disabled",dojo.hitch(this,this._checkDisabedPane,_32c));},_checkDisabedPane:function(_32e,name,_32f,_330){if(_330==true){var _331=this.tablist.pane2button[_32e.id];_331.set("disabled",true);}else{var _331=this.tablist.pane2button[_32e.id];_331.set("disabled",false);if(dojo.isIE){dojo.removeAttr(_32e.domNode,"disabled");}}this._setTabSelection();},_setInitialTabSelection:function(){var _332=this._getCurrentVisibleTabs();var _333=0;for(var i=0;i<_332.length;i++){if(_332[i].get("disbaled")==true){_333++;}}if(_332.length>0&&_333==_332.length){_332[0].disable=false;this.selectChildByIndex(0);_332[0].disable=true;}else{this._setTabSelection();}var _334=this.getChildren();for(var i=0;i<_334.length;i++){this._checkDisabedPane(_334[i],_334[i].title,null,_334[i].disabled);}},_setTabSelection:function(){var _335=this._getCurrentVisibleTabs();var _336=-1;for(var i=0;i<_335.length;i++){if(_335[i].selected){_336=i;}}if(_336>-1&&_335[_336].get("disabled")==true){for(var m=_336+1;m<_335.length;m++){if(_335[m].get("disabled")==false){this.selectChildById(_335[m].id);return;}}for(var m=_336-1;m>=0;m--){if(_335[m].get("disabled")==false){this.selectChildById(_335[m].id);return;}}}},_getCurrentVisibleTabs:function(){var _337=this.getChildren();var _338=[];for(var i=0;i<_337.length;i++){var _339=this.tablist.pane2button[_337[i].id];if(!_339._displayMark||_339._displayMark=="visible"){_338.push(_337[i]);}}return _338;},_setWidthAttr:function(_33a){if(_33a!=""){this.width=_33a;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_33b){if(_33b!=""){this.height=_33b;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}}});dojo.declare("com.ibm.btt.dijit.ScrollingTabController",[dijit.layout.ScrollingTabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});dojo.declare("com.ibm.btt.dijit.TabController",[dijit.layout.TabController,com.ibm.btt.dijit.AbstractWidgetMixin],{});}if(!dojo._hasResource["com.ibm.btt.dijit.ContentPane"]){dojo._hasResource["com.ibm.btt.dijit.ContentPane"]=true;dojo.provide("com.ibm.btt.dijit.ContentPane");dojo.declare("com.ibm.btt.dijit.ContentPane",[dijit.layout.ContentPane,com.ibm.btt.dijit.AbstractWidgetMixin,com.ibm.btt.dijit.AbstractAjaxMixin],{disabled:false,postCreate:function(){this.inherited(arguments);if(dojo.isIE&&dojo.hasAttr(this.domNode,"disabled")){dojo.removeAttr(this.domNode,"disabled");}},_setDisabledAttr:function(_33c){this._set("disabled",_33c);},_setTitleAttr:function(_33d){this.titleKey=_33d;var _33e=this.getI18NString(_33d);this._set("title",_33e);},_getTitleAttr:function(){return this.titleKey;}});}if(!dojo._hasResource["com.ibm.btt.dijit.Hidden"]){dojo._hasResource["com.ibm.btt.dijit.Hidden"]=true;dojo.provide("com.ibm.btt.dijit.Hidden");dojo.declare("com.ibm.btt.dijit.Hidden",[dijit._Widget,dijit._Templated],{value:"",name:"",state:"",type:"hidden",templateString:"<input type='${type}'/>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:{node:"domNode"},name:{node:"domNode"}}),_setValueAttr:function(_33f){this.value=_33f;this.domNode.value=_33f;}});}if(!dojo._hasResource["com.ibm.btt.event.BaseMonitor"]){dojo._hasResource["com.ibm.btt.event.BaseMonitor"]=true;dojo.provide("com.ibm.btt.event.BaseMonitor");dojo.declare("com.ibm.btt.event.BaseMonitor",null,{oldEvent:null,monitorEvent:function(_340,rule){},monitorStartRule:function(_341,rule){},monitorEndRule:function(_342,rule){},monitorCondition:function(_343,rule,_344){},monitorStartAG:function(rule){},monitorEndAG:function(rule){},monitorAGCondition:function(rule,_345){},monitorCallFunctionAction:function(id,_346,_347){},monitorGetPropertyAction:function(id,_348,_349){},monitorSetPropertyAction:function(id,_34a,_34b){}});}if(!dojo._hasResource["com.ibm.btt.dijit.GridComparer"]){dojo._hasResource["com.ibm.btt.dijit.GridComparer"]=true;dojo.provide("com.ibm.btt.dijit.GridComparer");dojo.declare("com.ibm.btt.dijit.GridComparer",null,{compareNumber:function(_34c){var cons={};if(_34c["pattern"]){cons["pattern"]=_34c["pattern"];}return function(str1,str2){var num1;if(typeof str1=="string"){num1=dojo.number.parse(str1,cons);}else{num1=str1;}if(isNaN(num1)){num1=Number(str1);}var num2;if(typeof str2=="string"){num2=dojo.number.parse(str2,cons);}else{num2=str2;}if(isNaN(num2)){num2=Number(str1);}if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareCurrency:function(_34d){return function(str1,str2){var num1=parseFloat(str1);var num2=parseFloat(str2);if(num1>num2){return 1;}else{if(num1<num2){return -1;}else{return 0;}}};},compareString:function(_34e){return function(str1,str2){if(str1>str2){return 1;}else{if(str1<str2){return -1;}else{return 0;}}};},compareDate:function(_34f){return function(str1,str2){var _350="yyyy-MM-dd";if(_34f){var _351=_34f["pattern"];if(_351){_350=_351;}}var _352={selector:"date",datePattern:_350,fullYear:true};var _353;var _354;if(typeof str1=="string"){_353=dojo.date.locale.parse(str1,_352);}else{_353=str1;}if(typeof str2=="string"){_354=dojo.date.locale.parse(str2,_352);}else{_354=str2;}var _355=_353?_353:str1;var _356=_354?_354:str2;return dojo.date.compare(_355,_356);};}});(function(){if(com.ibm.btt.dijit.GridComparer.instance==undefined){com.ibm.btt.dijit.GridComparer.instance=new com.ibm.btt.dijit.GridComparer();}})();}if(!dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]){dojo._hasResource["com.ibm.btt.dijit.AbstractWidgetSizeMixin"]=true;dojo.provide("com.ibm.btt.dijit.AbstractWidgetSizeMixin");dojo.declare("com.ibm.btt.dijit.AbstractWidgetSizeMixin",null,{width:"",height:"",_setWidthAttr:function(_357){if(_357!=""){this.width=_357;dojo.style(this.domNode,"width",this.handleLenUint(this.width));}},_setHeightAttr:function(_358){if(_358!=""){this.height=_358;dojo.style(this.domNode,"height",this.handleLenUint(this.height));}},handleLenUint:function(_359){var _35a=function(src,_35b){var reg=new RegExp(_35b+"$");return reg.test(src);};if(_35a(_359,"px")||_35a(_359,"%")||_35a(_359,"em")){return _359;}else{return _359+"px";}}});}if(!dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]){dojo._hasResource["com.ibm.btt.event.ConsoleMonitor"]=true;dojo.provide("com.ibm.btt.event.ConsoleMonitor");dojo.declare("com.ibm.btt.event.ConsoleMonitor",com.ibm.btt.event.BaseMonitor,{monitorStartRule:function(_35c,rule){console.debug("Start Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_35c.id+"."+_35c.e);},monitorEndRule:function(_35d,rule){console.debug("End Rule : "+(rule.name?"["+rule.name+"]":""),rule,"  for event ",_35d.id+"."+_35d.e);},monitorCondition:function(_35e,rule,_35f){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_35f);},monitorStartAG:function(rule){console.debug("Start Action Group : "+rule.name,rule);},monitorEndAG:function(rule){console.debug("End Action Group : "+rule.name,rule);},monitorAGCondition:function(rule,_360){console.debug("    Evaluated Condition : Condition =",rule.cond,",  Result="+_360);},monitorCallFunctionAction:function(id,_361,args,_362){if(typeof (_362)!="undefined"&&_362!=null){console.debug("    CallFunction Action : ",id+"."+_361," , args=",args,", result=",_362);}else{console.debug("    CallFunction Action : ",id+"."+_361," , args=",args);}},monitorGetPropertyAction:function(id,_363,_364){console.debug("    GetProperty Action : ",id+"."+_363+"=="+_364);},monitorSetPropertyAction:function(id,_365,_366){console.debug("    SetProperty Action : ",id+"."+_365+"="+_366);}});}if(!dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]){dojo._hasResource["com.ibm.btt.util.GlobalFunctions"]=true;dojo.provide("com.ibm.btt.util.GlobalFunctions");(function(){function _367(obj){return typeof (obj)=="undefined"||obj==null?true:false;};function _368(obj){if((obj.constructor===Number&&!isFinite(obj)&&!isNaN(obj))||/^[-+]?\d+$|^[-+]?\d+\.\d+$/.test(obj)){return true;}else{return false;}};function _369(obj){if(obj.constructor===Number){return obj;}else{return Number(obj);}};function _36a(obj){if(obj.constructor===Date){return true;}else{return false;}};var _36b={getI18NString:function(arg){return I18nUtil.getI18nString(arg);},length:function(str){return _367(str)?undefined:str.toString().length;},subString:function(str,_36c,end){if(!_367(str)&&_368(_36c)&&_368(end)){_36c=_369(_36c);end=_369(end);if(_36c>end||_36c<0||end>str.toString().length){return undefined;}else{return str.toString().substring(_36c,end);}}else{return undefined;}},indexOf:function(str,_36d){return _367(str)||_367(_36d)?undefined:str.toString().indexOf(_36d.toString());},lastIndexOf:function(str,_36e){return _367(str)||_367(_36e)?undefined:str.toString().lastIndexOf(_36e.toString());},contains:function(str,str2){if(_367(str)||_367(str2)){return false;}else{return this.indexOf(str.toString(),str2.toString())>-1?true:false;}},replace:function(_36f,str1,str2){return !_367(_36f)&&!_367(str1)&&!_367(str1)?_36f.toString().replace(new RegExp(str1.toString(),"g"),str2.toString()):_36f;},trim:function(str){return _367(str)?undefined:str.toString().replace(/^(\s|\u00A0)+/,"").replace(/(\s|\u00A0)+$/,"");},concat:function(str1,str2){if(_367(str1)&&_367(str2)){return undefined;}else{if(_367(str1)){return str2.toString();}else{if(_367(str2)){return str1.toString();}else{return str1.toString().concat(str2.toString());}}}},upperCase:function(str){return _367(str)?undefined:str.toString().toUpperCase();},lowerCase:function(str){return _367(str)?undefined:str.toString().toLowerCase();},compare:function(str1,str2){if(_367(str1)||_367(str2)){return undefined;}if(str1.toString()>str2.toString()){return 1;}else{if(str1.toString()<str2.toString()){return -1;}else{return 0;}}},compareIgnoreCase:function(str1,str2){return _367(str1)||_367(str2)?undefined:str1.toString().toUpperCase().localeCompare(str2.toString().toUpperCase());}};var _370={today:function(){return new Date();},after:function(date,days,_371,_372){if(_367(date)||!_36a(date)){return undefined;}if(!_367(days)&&_368(days)){date.setDate(date.getDate()+_369(days));}if(!_367(_371)&&_368(_371)){date.setMonth(date.getMonth()+_369(_371));}if(!_367(_372)&&_368(_372)){date.setFullYear(date.getFullYear()+_369(_372));}return date;},before:function(date,days,_373,_374){if(_367(date)||!_36a(date)){return undefined;}if(!_367(days)&&_368(days)){date.setDate(date.getDate()-_369(days));}if(!_367(_373)&&_368(_373)){date.setMonth(date.getMonth()-_369(_373));}if(!_367(_374)&&_368(_374)){date.setFullYear(date.getFullYear()-_369(_374));}return date;},daysBetween:function(_375,_376){if(_367(_375)||_367(_376)||!_36a(_375)||!_36a(_376)){return undefined;}var _377=Date.UTC(_375.getFullYear(),_375.getMonth(),_375.getDate(),_375.getHours(),_375.getMinutes(),_375.getSeconds(),_375.getMilliseconds())-Date.UTC(_376.getFullYear(),_376.getMonth(),_376.getDate(),_376.getHours(),_376.getMinutes(),_376.getSeconds(),_376.getMilliseconds());return _377/(1000*60*60*24);},naturalDaysBetween:function(_378,_379){if(_367(_378)||_367(_379)||!_36a(_378)||!_36a(_379)){return undefined;}var _37a=Date.UTC(_378.getFullYear(),_378.getMonth(),_378.getDate(),0,0,0,0)-Date.UTC(_379.getFullYear(),_379.getMonth(),_379.getDate(),0,0,0,0);return _37a/(1000*60*60*24);},dayOfWeek:function(date){if(_367(date)||!_36a(date)){return undefined;}return date.getDay();},year:function(date){if(_367(date)||!_36a(date)){return undefined;}return date.getFullYear();},month:function(date){if(_367(date)||!_36a(date)){return undefined;}return date.getMonth();},day:function(date){if(_367(date)||!_36a(date)){return undefined;}return date.getDate();},parseDate:function(obj,_37b){if(_37b){var _37c={};_37c.formatLength="long";_37c.datePattern=_37b;_37c.selector="date";try{var _37d=dojo.date.locale.parse(obj,_37c);if(_37d!=null){return _37d;}else{return undefined;}}catch(ee){return undefined;}}else{if(_367(obj)||!(/^\d{4}-\d{2}-\d{2}$/.test(obj.toString()))){return undefined;}return new Date(obj);}},toString:function(obj){if(_367(obj)||!_36a(obj)){return undefined;}var _37e=obj.getMonth()+1;if(_37e<10){_37e="0"+_37e;}var day=obj.getDate();if(day<10){day="0"+day;}return obj.getFullYear()+"-"+_37e+"-"+day;}};var _37f={round:function(num){if(_367(num)||!_368(num)){return undefined;}return Math.round(num);},truncate:function(num,flag){if(_367(num)||!_368(num)){return undefined;}if(flag){return Math.ceil(num);}else{return Math.floor(num);}},absolute:function(num){if(_367(num)||!_368(num)){return undefined;}return Math.abs(num);}};window.BTTStringFunctions=_36b;window.BTTDateFunctions=_370;window.BTTNumberFunctions=_37f;})();}if(!dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]){dojo._hasResource["com.ibm.btt.dijit.plugins.Pagination"]=true;dojo.provide("com.ibm.btt.dijit.plugins.Pagination");dojo.declare("com.ibm.btt.dijit.plugins.Pagination",dojox.grid.enhanced._Plugin,{name:"bttpagination",mode:"simple",timeout:500,keepSingleSelection:false,_paginateable:true,init:function(){this._initParams();this._createPaginators(this.option);this._regApis();if(this.initialMode=="client"){if(this.mode=="simple"){this._requestFirstPage();}else{this.gotoPage("initial");}}},_initParams:function(){var _380=this;var _381=function(_382,_383){return _380.option[_382]!=undefined?_380.option[_382]:(_380.grid[_382]!=undefined?_380.grid[_382]:_383);};var _384=function(arg,_385){var tmp=Number(arg);if(isNaN(tmp)){return _385;}else{return tmp;}};this.mode=_381("mode",this.mode);this.timeout=_384(_381("timeout",this.timeout),this.timeout);this.initialMode=_381("initialMode","server");this.totalRowNumber=_381("totalRowNumber",this.totalRowNumber);this.rowsPerPage=_381("rowsPerPage",this.rowsPerPage);this.bttParams=_381("bttParams",{});if(this.mode=="simple"){this._setPageSize(this.totalRowNumber);this.defaultRows=_381("defaultRows",25);this._currentPage=0;this.nls=dojo.i18n.getLocalization("dojox.grid.enhanced","Pagination");}if(this.mode=="nonePageSize"){var _386=function(arg){if(arg=="false"){return false;}else{if(arg=="true"){return true;}else{return arg;}}};this.prevBtnEnabled=_381("enablePrevious",false);this.prevBtnEnabled=_386(this.prevBtnEnabled);this.nextBtnEnabled=_381("enableNext",true);this.nextBtnEnabled=_386(this.nextBtnEnabled);}},_setPageSize:function(_387){if(typeof (_387)!="defined"&&_387!=null&&_387!="null"){this.totalRowNumber=_387;this._maxSize=this.totalRowNumber;this.pageSize=this.rowsPerPage;this.totalPageSize=Math.ceil(this.totalRowNumber/this.rowsPerPage);}},_createPaginators:function(_388){this.paginators=[];if(this.mode=="simple"){if(_388.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_388,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_388,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.SimplePaginator(dojo.mixin(_388,{plugin:this}))];}}else{if(this.mode=="nonePageSize"){if(_388.position==="both"){this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_388,{position:"bottom",plugin:this})),new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_388,{position:"top",plugin:this}))];}else{this.paginators=[new com.ibm.btt.dijit.plugins.NonePageSizePaginator(dojo.mixin(_388,{plugin:this}))];}}else{console.error("Unsupport pagination mode, please check the parameter definition.");}}dojo.forEach(this.paginators,function(f){f.update();});},_stopEvent:function(_389){try{dojo.stopEvent(_389);}catch(e){}},_regApis:function(){var g=this.grid;g.gotoPage=dojo.hitch(this,this.gotoPage);g.nextPage=dojo.hitch(this,this.nextPage);g.prevPage=dojo.hitch(this,this.prevPage);g.gotoFirstPage=dojo.hitch(this,this.gotoFirstPage);g.gotoLastPage=dojo.hitch(this,this.gotoLastPage);g.getTotalRowCount=dojo.hitch(this,this.getTotalRowCount);},destroy:function(){this.inherited(arguments);var g=this.grid;try{dojo.forEach(this.paginators,function(p){p.destroy();});this.paginators=null;}catch(e){console.warn("Pagination.destroy() error: ",e);}},nextPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage+2);}if(this.mode=="nonePageSize"){this.gotoPage("next");}},prevPage:function(e){if(this.mode=="simple"){this.gotoPage(this._currentPage);}if(this.mode=="nonePageSize"){this.gotoPage("prev");}},gotoFirstPage:function(e){this.gotoPage(1);},gotoLastPage:function(e){this.gotoPage(this.totalPageSize);},gotoPage:function(e){if(this._paginateable==true){if(this.mode=="simple"&&e>=1&&e<=this.totalPageSize&&e!=(this._currentPage+1)){this._requestPageByNum(e);this._paginateable=false;dojo.forEach(this.paginators,function(p){p.disableBtns();});}if(this.mode=="nonePageSize"&&((e=="initial")||(e=="next"&&this.nextBtnEnabled)||(e=="prev"&&this.prevBtnEnabled))&&e!=(this._currentPage+1)){this._fetchData({"pageRequest.pageEvent":e,"mode":this.mode});this._paginateable=false;dojo.forEach(this.paginators,function(p){p.disableBtns();});}}},_requestPageByNum:function(e){this._fetchData({"pageRequest.pageEvent":"page","pageRequest.pageNumber":e,"mode":this.mode});this._currentPage=e-1;},_requestFirstPage:function(){this._fetchData({"pageRequest.pageEvent":"initial","pageRequest.pageNumber":1,"mode":this.mode});this._currentPage=0;},_fetchData:function(arg){console.log(this.bttParams);AjaxUtil.xhrPost({handleAs:"text",timeout:this.timeout,success:dojo.hitch(this,this._handleResponse),error:dojo.hitch(this,this._handleError)},dojo.mixin(this.bttParams,arg));},_handleResponse:function(arg){try{var data=dojo.fromJson(arg);if(data.items){if(this.grid.get("store")){var _38a=this.grid.get("store");_38a.close();}this.grid.setStoreData(data.items);this.grid._refresh();try{this.grid._refresh();}catch(e){console.warn("refresh failed");}if(this.mode=="simple"){this._setPageSize(data.totalRowNumber);}if(this.mode=="nonePageSize"){if(typeof (data.enableNext)!="undefined"){}this.nextBtnEnabled=this._setBtnState(data.enableNext);this.prevBtnEnabled=this._setBtnState(data.enablePrevious);}dojo.forEach(this.paginators,function(p){p.update();});}if(this.grid.selection.mode==="single"&&!this.keepSingleSelection){this.grid.selection.deselectAll();}if(data&&data.errMsg){this.grid.showErrorIcon(data.errMsg);}this.grid.onAsyncOK(arguments);}catch(e){this.grid.onAsyncError(arguments);this.handleResponseError(arg);}this._paginateable=true;},handleResponseError:function(arg){(new dijit.Dialog({title:"",content:arg})).show();},_setBtnState:function(_38b){if(typeof (_38b)!="undefined"&&_38b!="null"&&_38b!=null){if(_38b==true||_38b=="true"){return true;}else{return false;}}return false;},_handleError:function(arg){console.error("An error occured when loading pagination data from "+AjaxUtil.ajaxOperationUrl);this._paginateable=true;if(arg.dojoType==="timeout"){this.grid.onAsyncTimeOut(arguments);}else{if(arg.status!==undefined){this.grid.onAsyncError(arguments);}}},getTotalRowCount:function(){return this._maxSize;}});dojo.declare("com.ibm.btt.dijit.plugins.SimplePaginator",[dojox.grid.enhanced.plugins._Paginator],{pageSizes:undefined,showAll:true,_updateDescription:function(){},disableBtns:function(){var _38c=null,_38d=this._getCurrentPageNo(),_38e=this._getPageCount(),_38f=0;var _390=function(node,_391,_392){var _393=node.value,_394=_391?"dojoxGrid"+_393+"Btn":"dojoxGridNumBtnDisabled",_395=_391?"dojoxGrid"+_393+"BtnDisable":"dojoxGridNumBtnDisabled";if(_392){dojo.addClass(node,_395);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_394);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(isNaN(parseInt(node.value,10))){dojo.addClass(node,"dojoxGridWardButton");var _396=node.value=="prevPage"||node.value=="firstPage"?1:_38e;_390(node,true,true);}else{_38c=parseInt(node.value,10);_390(node,false,true);}},this);}});dojo.declare("com.ibm.btt.dijit.plugins.NonePageSizePaginator",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"paginatorBar\">\r\n\t<table cellpadding=\"0\" cellspacing=\"0\"  class=\"dojoxGridPaginator\">\r\n\t\t<tr>\r\n\t\t\t<td dojoAttachPoint=\"descriptionTd\" class=\"dojoxGridDescriptionTd\">\r\n\t\t\t\t<div dojoAttachPoint=\"descriptionDiv\" class=\"dojoxGridDescription\" />\r\n\t\t\t</td>\r\n\t\t\t<td dojoAttachPoint=\"sizeSwitchTd\"></td>\r\n\t\t\t<td dojoAttachPoint=\"pageStepperTd\" class=\"dojoxGridPaginatorFastStep\">\r\n\t\t\t\t<div dojoAttachPoint=\"pageStepperDiv\" class=\"dojoxGridPaginatorStep\"></div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</table>\r\n</div>\r\n",position:"bottom",_maxItemSize:10,description:true,pageStepper:"30em",constructor:function(_397){dojo.mixin(this,_397);this.grid=this.plugin.grid;},postCreate:function(){this.inherited(arguments);this._setWidthValue();var self=this;var g=this.grid;this.plugin.connect(g,"_resize",dojo.hitch(this,"_resetGridHeight"));this._originalResize=dojo.hitch(g,"resize");g.resize=function(_398,_399){self._changeSize=g._pendingChangeSize=_398;self._resultSize=g._pendingResultSize=_399;g.sizeChange();};this._placeSelf();},destroy:function(){this.inherited(arguments);this.grid.focus.removeArea("pagination"+this.position.toLowerCase());this.grid.resize=this._originalResize;this.pageSizes=null;},update:function(){this.nextBtnEnabled=this.plugin.nextBtnEnabled?this.plugin.nextBtnEnabled:this.grid.nextBtnEnabled;this.prevBtnEnabled=this.plugin.prevBtnEnabled?this.plugin.prevBtnEnabled:this.grid.prevBtnEnabled;this._updatePageStepper();},disableBtns:function(){var _39a=function(node,_39b,_39c){var _39d=node.value,_39e=_39b?"dojoxGrid"+_39d+"Btn":"dojoxGridInactived",_39f=_39b?"dojoxGrid"+_39d+"BtnDisable":"dojoxGridActived";if(_39c){dojo.addClass(node,_39f);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_39e);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");_39a(node,true,true);}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");_39a(node,true,true);}},this);},_setWidthValue:function(){var type=["description","sizeSwitch","pageStepper"];var _3a0=function(str1,str2){var reg=new RegExp(str2+"$");return reg.test(str1);};dojo.forEach(type,function(t){var _3a1,flag=this[t];if(flag===undefined||typeof flag=="boolean"){return;}if(dojo.isString(flag)){_3a1=_3a0(flag,"px")||_3a0(flag,"%")||_3a0(flag,"em")?flag:parseInt(flag,10)>0?parseInt(flag,10)+"px":null;}else{if(typeof flag==="number"&&flag>0){_3a1=flag+"px";}}this[t]=_3a1?true:false;this[t+"Width"]=_3a1;},this);},_regFocusMgr:function(_3a2){this.grid.focus.addArea({name:"pagination"+_3a2,onFocus:dojo.hitch(this,this._onFocusPaginator),onBlur:dojo.hitch(this,this._onBlurPaginator),onMove:dojo.hitch(this,this._moveFocus),onKeyDown:dojo.hitch(this,this._onKeyDown)});switch(_3a2){case "top":this.grid.focus.placeArea("pagination"+_3a2,"before","header");break;case "bottom":default:this.grid.focus.placeArea("pagination"+_3a2,"after","content");break;}},_placeSelf:function(){var g=this.grid;var _3a3=dojo.trim(this.position.toLowerCase());switch(_3a3){case "top":this.placeAt(g.viewsHeaderNode,"before");this._regFocusMgr("top");break;case "bottom":default:this.placeAt(g.viewsNode,"after");this._regFocusMgr("bottom");break;}},_resetGridHeight:function(_3a4,_3a5){var g=this.grid;_3a4=_3a4||this._changeSize;_3a5=_3a5||this._resultSize;delete this._changeSize;delete this._resultSize;if(g._autoHeight){return;}var _3a6=g._getPadBorder().h;if(!this.plugin.gh){this.plugin.gh=(g.domNode.clientHeight||dojo.style(g.domNode,"height"))+2*_3a6;}if(_3a5){_3a4=_3a5;}if(_3a4){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_3a6;}var gh=this.plugin.gh,hh=g._getHeaderHeight(),ph=dojo.marginBox(this.domNode).h;ph=this.plugin.paginators[1]?ph*2:ph;if(typeof g.autoHeight=="number"){var cgh=gh+ph-_3a6;dojo.style(g.domNode,"height",cgh+"px");dojo.style(g.viewsNode,"height",(cgh-ph-hh)+"px");this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,cgh-ph-hh);}else{var h=gh-ph-hh-_3a6;dojo.style(g.viewsNode,"height",h+"px");var _3a7=dojo.some(g.views.views,function(v){return v.hasHScrollbar();});dojo.forEach(g.viewsNode.childNodes,function(c,idx){dojo.style(c,"height",h+"px");});dojo.forEach(g.views.views,function(v,idx){if(v.scrollboxNode){if(!v.hasHScrollbar()&&_3a7){dojo.style(v.scrollboxNode,"height",(h-dojox.html.metrics.getScrollbar().h)+"px");}else{dojo.style(v.scrollboxNode,"height",h+"px");}}});this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,h);}},_styleMsgNode:function(top,_3a8,_3a9){var _3aa=this.grid.messagesNode;dojo.style(_3aa,{"position":"absolute","top":top+"px","width":_3a8+"px","height":_3a9+"px","z-Index":"100"});},_updateDescription:function(){},_updatePageStepper:function(){if(!this.pageStepperTd){return;}if(this.pageStepperDiv.childNodes.length<1){this._createWardBtns();}this._updatePageStepNodeClass();},_createWardBtns:function(){var self=this;var _3ab={prevPage:"&#60;",firstPage:"&#171;",nextPage:"&#62;",lastPage:"&#187;"};var _3ac=function(_3ad,_3ae,_3af){_3ae=I18nUtil.getI18nString(_3ae);var node=dojo.create("div",{value:_3ad,title:_3ae,tabindex:1},self.pageStepperDiv,_3af);self.plugin.connect(node,"onclick",dojo.hitch(self,"_onPageStep"));dijit.setWaiState(node,"label",_3ae);var _3b0=dojo.create("span",{value:_3ad,title:_3ae,innerHTML:_3ab[_3ad]},node,_3af);dojo.addClass(_3b0,"dojoxGridWardButtonInner");};_3ac("prevPage","%com.ibm.btt.dijit.Grid/prevPageBtn","first");_3ac("nextPage","%com.ibm.btt.dijit.Grid/nextPageBtn","last");},_updatePageStepNodeClass:function(){var _3b1=function(node,_3b2,_3b3){var _3b4=node.value,_3b5=_3b2?"dojoxGrid"+_3b4+"Btn":"dojoxGridInactived",_3b6=_3b2?"dojoxGrid"+_3b4+"BtnDisable":"dojoxGridActived";if(_3b3){dojo.addClass(node,_3b6);dojo.attr(node,"tabindex","-1");}else{dojo.addClass(node,_3b5);dojo.attr(node,"tabindex","0");}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(node.value=="prevPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.prevBtnEnabled){_3b1(node,true,false);}else{_3b1(node,true,true);}}if(node.value=="nextPage"){dojo.addClass(node,"dojoxGridWardButton");if(this.nextBtnEnabled){_3b1(node,true,false);}else{_3b1(node,true,true);}}},this);},_onFocusPaginator:function(_3b7,step){if(!this._currentFocusNode){if(step!=0){return this._onFocusPageStepNode(_3b7);}else{return false;}}else{return false;}},_onFocusPageStepNode:function(_3b8){var _3b9=this._getPageStepActivableNodes();if(_3b8&&_3b8.type!=="click"){if(_3b9[0]){dijit.focus(_3b9[0]);this._currentFocusNode=_3b9[0];this.focusArea="pageStep";this.plugin._stopEvent(_3b8);return true;}else{return false;}}if(_3b8&&_3b8.type=="click"){if(dojo.indexOf(this._getPageStepActivableNodes(),_3b8.target)>-1){this.focusArea="pageStep";this.plugin._stopEvent(_3b8);return true;}}return false;},_onBlurPaginator:function(_3ba,step){var _3bb=this._getPageStepActivableNodes();if(step>0&&this.focusArea==="pageSize"&&(_3bb.length>1||this.gotoButton)){return false;}else{if(step<0&&this.focusArea==="pageStep"){return false;}}this._currentFocusNode=null;this.focusArea=null;return true;},_onKeyDown:function(_3bc,_3bd){if(_3bd){return;}if(_3bc.altKey||_3bc.metaKey){return;}var dk=dojo.keys;if(_3bc.keyCode===dk.ENTER||_3bc.keyCode===dk.SPACE){if(dojo.indexOf(this._getPageStepActivableNodes(),this._currentFocusNode)>-1){this._onPageStep(_3bc);}}this.plugin._stopEvent(_3bc);},_moveFocus:function(_3be,_3bf,evt){var _3c0;if(this.focusArea=="pageStep"){_3c0=this._getPageStepActivableNodes();if(this.gotoPageDiv){_3c0.push(this.gotoPageDiv);}}if(_3c0.length<1){return;}var _3c1=dojo.indexOf(_3c0,this._currentFocusNode);var _3c2=_3c1+_3bf;if(_3c2>=0&&_3c2<_3c0.length){dijit.focus(_3c0[_3c2]);this._currentFocusNode=_3c0[_3c2];}this.plugin._stopEvent(evt);},_getPageStepActivableNodes:function(){return (dojo.query("div[tabindex='0']",this.pageStepperDiv));},_getAllPageStepNodes:function(){var _3c3=[];for(var i=0,len=this.pageStepperDiv.childNodes.length;i<len;i++){_3c3.push(this.pageStepperDiv.childNodes[i]);}return _3c3;},_onPageStep:function(e){var g=this.grid;if(!this._currentFocusNode){this.grid.focus.currentArea("pagination"+this.position);}if(this.focusArea!="pageStep"){this.focusArea="pageStep";}switch(e.target.value){case "prevPage":if(e.target.className.indexOf("dojoxGridprevPageBtnDisable")<=0){g.prevPage();}break;case "nextPage":if(e.target.className.indexOf("dojoxGridnextPageBtnDisable")<=0){g.nextPage();}break;}}});dojox.grid.EnhancedGrid.registerPlugin(com.ibm.btt.dijit.plugins.Pagination);}if(!dojo._hasResource["com.ibm.btt.dijit.Dialog"]){dojo._hasResource["com.ibm.btt.dijit.Dialog"]=true;dojo.provide("com.ibm.btt.dijit.Dialog");dojo.declare("com.ibm.btt.dijit.Dialog",[dijit.Dialog,com.ibm.btt.dijit.AbstractWidgetMixin],{closable:false,_setClosableAttr:function(_3c4){this.closable=_3c4;if(this.closable){dojo.style(this.closeButtonNode,"display","");}else{dojo.style(this.closeButtonNode,"display","none");}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _3c5=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_3c5){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_3c5){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE&&this.closable){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}}});}if(!dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]){dojo._hasResource["com.ibm.btt.dijit.ScreenCover"]=true;dojo.provide("com.ibm.btt.dijit.ScreenCover");dojo.declare("com.ibm.btt.dijit.ScreenCover",[dijit._Widget,dijit._Templated,com.ibm.btt.dijit.AbstractWidgetMixin],{templateString:"<div class='dijitScreenCover' style='display:none;' tabIndex='1'><div dojoAttachPoint='containerNode' class='dijitScreenCoverContainer'><div dojoAttachPoint='imageNode' class='dijitScreenCoverImage'></div><div dojoAttachPoint='textNode' class='dijitScreenCoverText'></div></div></div>",text:"%com.ibm.btt.dijit.ScreenCover/waitingText",postCreate:function(){this.inherited(arguments);dojo.body().appendChild(this.domNode);this.domNode.style.display="none";this._events=[];this._events.push(dojo.connect(dojo.global,"onresize",this,this.layout));this._events.push(dojo.connect(this.domNode,"onkeydown",this,this.onKey));},onKey:function(evt){if(evt.keyCode&&this.domNode.style.display==="block"){dojo.stopEvent(evt);return false;}},layout:function(){var _3c6=dojo.window.getBox();var bb=dojo._getBorderBox(this.containerNode);var l=Math.floor(_3c6.l+(_3c6.w-bb.w)/2);var t=Math.floor(_3c6.t+(_3c6.h-bb.h)/2);dojo.style(this.domNode,{top:_3c6.t+"px",left:_3c6.l+"px",width:_3c6.w+"px",height:_3c6.h+"px"});dojo.style(this.containerNode,{left:l+"px",top:t+"px"});},_setTextAttr:function(_3c7){this.text=_3c7;this.textNode.innerHTML=this.getI18NString(_3c7);},show:function(){this.domNode.style.display="block";this.layout();this.domNode.focus();},hide:function(){this.domNode.style.display="none";},destroy:function(){this.inherited(arguments);while(this._events.length>0){dojo.disconnect(this._events.pop());}}});}if(!dojo._hasResource["com.ibm.btt.event.NavigationEngine"]){dojo._hasResource["com.ibm.btt.event.NavigationEngine"]=true;dojo.provide("com.ibm.btt.event.NavigationEngine");dojo.declare("com.ibm.btt.event.NavigationEngine",[com.ibm.btt.event.Engine],{url:"Request",_commandMap:{},_contentPane:null,_dialog:null,_cover:null,constructor:function(){var _3c8=this;if(dojo._postLoad){this.postCreate();this.onLoad();}else{dojo.addOnLoad(function(){_3c8.postCreate();_3c8.onLoad();});}},postCreate:function(){this.registerCommand("render_page",dojo.hitch(this,this.renderPageHandler));this.registerCommand("popup_page",dojo.hitch(this,this.popupPageHandler));this.registerCommand("redirect",dojo.hitch(this,this.redirectPage));this.registerCommand("remote_flow",dojo.hitch(this,this.remoteFlowHandler));this.registerCommand("do_nothing",function(){console.info("do nothing is returned from server side.");});},onLoad:function(e){this._delegateAllFormSubmit();dojo.forEach(dojo.filter(dojo.query("form"),function(form){return form.title&&form.title!="";}),function(form){eval(form.title);});this._getCover().hide();},setUrl:function(_3c9){this.url=_3c9;},registerCommand:function(type,_3ca){this._commandMap[type]=_3ca;},_queryAllWidgets:function(node){if(!node){node=dojo.body();}return dojo.query("[widgetId]",node).map(dijit.byNode);},_disposeAllWidgets:function(){this.clearRules();if(this._contentPane){this._destroyContentPane();this._destroyDialog();}else{this._destroyDialog();this._destroyCover();var _3cb=this._queryAllWidgets();_3cb.forEach(function(_3cc){try{_3cc.destroy();}catch(e){console.error("An error occured, while destroying the widget. Error:"+e);}});dojo.empty(dojo.body());dijit._masterTT=undefined;}},_unregisterEvents:function(arg,flag){if(flag){while(arg.length>0){dojo.disconnect(arg.pop());}}else{dojo.disconnect(arg);}},_delegateAllFormSubmit:function(){var _3cd=this;dojo.forEach(this._queryAllWidgets(),function(_3ce){if(_3ce.type!="undefined"&&(_3ce.type=="save"||_3ce.type=="cancel")){var _3cf=_3ce._onButtonClick;_3ce._onButtonClick=dojo.hitch(_3cd,_3cd._onButtonClick,_3ce,_3cf);}if(_3ce.domNode.nodeName==="A"){_3ce.onClick=dojo.hitch(_3cd,_3cd._onLinkClick,_3ce);}if(_3ce.domNode.nodeName==="FORM"){_3ce.onSubmit=dojo.hitch(_3ce,function(e){if(e){if(e.preventDefault){e.preventDefault();}dojo.stopEvent(e);}if(_3ce.validateOnSubmit){if(!_3ce.isValid()||!_3ce.xValid){return false;}}dojo.forEach(_3ce.getDescendants(),function(_3d0){if(_3d0.onFormSubmit){try{_3d0.onFormSubmit();}catch(e){console.error("Error occured while excuting the onFormSubmit events before form submitted.");}}});var _3d1=_3ce._querySubmitButton(e);if(_3ce.onFormSubmit){_3ce.onFormSubmit();}_3cd._submitFormData(_3ce,_3d1);return false;});}});},_onLinkClick:function(link,e){if(link.bttParams){dojo.stopEvent(e);if(link.get("target")!=="_blank"){this._submitData(dojo.fromJson(link.bttParams));}else{window.open(link.domNode.href);}}},_onButtonClick:function(_3d2,_3d3,e){if(_3d2.type=="save"&&_3d2.get("disabled")==false){_3d2._onClick(e);e.preventDefault();var form=_3d2._getParentForm();if(form&&_3d2.bttParams){if(form.onFormSubmit){form.onFormSubmit();}this._submitData(dojo.mixin(form.get("validValue"),dojo.fromJson(_3d2.bttParams)));}}else{if(_3d2.type=="cancel"&&_3d2.get("disabled")==false){_3d2._onClick(e);e.preventDefault();if(_3d2.bttParams){this._submitData(dojo.fromJson(_3d2.bttParams));}}else{_3d3.apply(_3d2,[e]);}}},_submitFormData:function(form,_3d4){if(_3d4&&_3d4.bttParams){var x=dojo.mixin(form.get("value"),dojo.fromJson(_3d4.bttParams));x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;this._submitData(x);}else{if(form.bttParams){var x=dojo.mixin(form.get("value"),dojo.fromJson(form.bttParams));x.dse_errorPage=form.bttErrorPage?form.bttErrorPage:null;this._submitData(x);}else{console.log("Do not find default BTT Params on form for user press enter operation.");}}},_submitData:function(data){AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:this.url,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse),error:dojo.hitch(this,this._handleError)},data);this._getCover().show();},_handleError:function(e,xhr){var _3d5;if(xhr){var _3d6=xhr.xhr.responseText;if(_3d6&&_3d6!=""){try{_3d6=dojo.fromJson(_3d6);if(_3d6["page"]){_3d5=_3d6["page"];}}catch(e){_3d5=_3d6;}}}if(!_3d5){if(e.message){_3d5=e.message;}else{_3d5="An error occured. Messsage : "+e;}}this._disposeAllWidgets();dojo.body().innerHTML=_3d5;this._getCover().hide();},_handleFormResponse:function(e){var _3d7;if(this._commandMap[e["command"]]){try{_3d7=this._commandMap[e["command"]](e);}catch(e){this._handleError("An error occured while excuting the handler:"+e["dse_clientCommand"]+" error:"+e);}}else{this._handleError("Can not find corresponding command handler for command type='"+e["dse_clientCommand"]+"'");}if(_3d7!==false){this._getCover().hide();}},createContentPane:function(){return new com.ibm.btt.dijit.ContentPane({"style":"padding:0px;overflow:auto;",refreshOnShow:false},dojo.create("div",null,dojo.body(),"last"));},_getContentPane:function(data){if(!this._contentPane){this._contentPane=this.createContentPane();}if(this._cpOnLoadEvt){this._unregisterEvents(this._cpOnLoadEvt);}if(this._cpOnErrorEvt){this._unregisterEvents(this._cpOnErrorEvt);}this._cpOnErrorEvt=dojo.connect(this._contentPane,"onContentError",this,dojo.hitch(this,this._afterPageLoaded,data,this._contentPane));this._cpOnLoadEvt=dojo.connect(this._contentPane,"onLoad",this,dojo.hitch(this,this._afterPageLoaded,data,this._contentPane));return this._contentPane;},_destroyContentPane:function(){if(this._contentPane){this._unregisterEvents(this._cpOnLoadEvt);this._cpOnLoadEvt=undefined;this._unregisterEvents(this._cpOnErrorEvt);this._cpOnErrorEvt=undefined;try{this._contentPane.destroyDescendants();this._contentPane.destroy();}catch(e){}this._contentPane=undefined;}},createDialog:function(){var _3d8=dojo.window.getBox();var _3d9=_3d8.w-50;var _3da=_3d8.h-50;var _3db=new com.ibm.btt.dijit.Dialog({title:"",style:"overflow:auto;max-width:"+_3d9+"px;max-height:"+_3da+"px;",closable:false});dojo.style(_3db.containerNode,"overflow","auto");return _3db;},_getDialog:function(data){if(!this._dialog){var _3dc=dojo.window.getBox();this._dialog=this.createDialog();}if(this._dialogOnLoadEvt){this._unregisterEvents(this._dialogOnLoadEvt);}this._dialogOnLoadEvt=dojo.connect(this._dialog,"onLoad",this,dojo.hitch(this,this._afterPageLoaded,data,this._dialog));return this._dialog;},_destroyDialog:function(){if(this._dialog){this._unregisterEvents(this._dialogOnLoadEvt);this._dialogOnLoadEvt=undefined;this._dialog.hide();try{this._dialog.destroyDescendants();this._dialog.destroy();}catch(e){}this._dialog=undefined;}},_getCover:function(){if(!this._cover){this._cover=new com.ibm.btt.dijit.ScreenCover();}return this._cover;},_destroyCover:function(){if(this._cover){this._cover.destroy();this._cover=undefined;}},isECARuleFile:function(src,_3dd){var _3de=function(src,_3df){var reg=new RegExp(_3df+"$");return reg.test(src);};return _3de(src,_3dd+".js");},_afterPageLoaded:function(data,_3e0){if(data["page_name"]){var _3e1=this;dojo.query("script",_3e0.domNode).forEach(dojo.hitch(this,function(_3e2){if(_3e2.src&&this.isECARuleFile(_3e2.src,data["page_name"])){_3e1._registerECAEvent(data["page_name"],_3e2.src);}}));}this.onLoad(data,_3e0);},_registerECAEvent:function(name,url){var _3e3={url:url,handleAs:"text",load:dojo.hitch(this,function(e){dojo.eval(e);if(window[name]){delete window[name];}})};dojo.xhrGet(_3e3);},_parsenextPageUrl:function(e){var data=dojo.fromJson(e.data);var url=["Request?dse_applicationId="+data["dse_applicationId"]];url.push("dse_processorId="+data["dse_processorId"]);url.push("dse_sessionId="+data["dse_sessionId"]);url.push("dse_processorState="+data["dse_processorState"]);url.push("dse_nextEventName="+data["dse_nextEventName"]);url.push("dse_operationName="+data["dse_operationName"]);url.push("dse_pageId="+data["dse_pageId"]);return url.join("&");},redirectPage:function(e){location.href=this._parsenextPageUrl(e);},popupPageHandler:function(data){var _3e4=this._getDialog(data);_3e4.destroyDescendants();_3e4.startup();if(!_3e4.get("open")){_3e4.show();}var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];_3e4.set("content",page);},renderPageHandler:function(data){this._getCover().show();this._disposeAllWidgets();if(this._dialog&&this._dialog.get("open")){this._dialog.hide();}var _3e5=this._getContentPane(data);var page=dojo.isFF<4?data["page"].replace("src=\"js/dojo/dojo_BTT.js\"",""):data["page"];_3e5.set("content",page);_3e5.startup();},remoteFlowHandler:function(data){this._getCover().show();var _3e6=dojo.fromJson(data["data"]);console.info("############ remoteFlowHandler : ",_3e6);if(_3e6.dse_remoteFlowID){this.url=_3e6.dse_RemoteRequest_URL;AjaxUtil.ajaxOperationUrl=_3e6.dse_RemoteAjaxOp_URL;}else{this.url=_3e6.dse_RemoteSubFlow_URL;AjaxUtil.ajaxOperationUrl=_3e6.dse_remote_parent_AjaxURL;}AjaxUtil.xhrPost({headers:{"requesttype":"ajax"},url:_3e6.dse_RemoteSubFlow_URL,handleAs:"json",success:dojo.hitch(this,this._handleFormResponse),error:dojo.hitch(this,this._handleError)},_3e6);return false;},destroy:function(){this.inherited(arguments);this._commandMap=undefined;this._destroyContentPane();this._destroyCover();this._destroyDialog();}});}
